<!doctype html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="viewport" content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover" ><meta name="generator" content="Jekyll v4.3.2" /><meta property="og:title" content="AppStore APP’s Reviews Bot Insights" /><meta name="author" content="ZhgChgLi" /><meta property="og:locale" content="en" /><meta name="description" content="Building an APP review tracking notification Slack bot" /><meta property="og:description" content="Building an APP review tracking notification Slack bot" /><link rel="canonical" href="https://en.zhgchg.li/posts/cb0c68c33994/" /><meta property="og:url" content="https://en.zhgchg.li/posts/cb0c68c33994/" /><meta property="og:site_name" content="ZhgChgLi" /><meta property="og:image" content="https://en.zhgchg.li/assets/cb0c68c33994/1*BMCG3cu21W5MbODBbhI-sA.jpeg" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-04-21T23:16:31+08:00" /><meta name="twitter:card" content="summary_large_image" /><meta property="twitter:image" content="https://en.zhgchg.li/assets/cb0c68c33994/1*BMCG3cu21W5MbODBbhI-sA.jpeg" /><meta property="twitter:title" content="AppStore APP’s Reviews Bot Insights" /><meta name="twitter:site" content="@zhgchgli" /><meta name="twitter:creator" content="@ZhgChgLi" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"ZhgChgLi"},"dateModified":"2024-04-14T00:38:28+08:00","datePublished":"2021-04-21T23:16:31+08:00","description":"Building an APP review tracking notification Slack bot","headline":"AppStore APP’s Reviews Bot Insights","image":"https://en.zhgchg.li/assets/cb0c68c33994/1*BMCG3cu21W5MbODBbhI-sA.jpeg","mainEntityOfPage":{"@type":"WebPage","@id":"https://en.zhgchg.li/posts/cb0c68c33994/"},"url":"https://en.zhgchg.li/posts/cb0c68c33994/"}</script><title>AppStore APP’s Reviews Bot Insights | ZhgChgLi</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="ZhgChgLi"><meta name="application-name" content="ZhgChgLi"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.21.0/dist/tocbot.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return 'mode'; } static get MODE_ATTR() { return 'data-mode'; } static get DARK_MODE() { return 'dark'; } static get LIGHT_MODE() { return 'light'; } static get ID() { return 'mode-toggle'; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener('change', () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia('(prefers-color-scheme: dark)'); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { document.documentElement.setAttribute(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { document.documentElement.setAttribute(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { document.documentElement.removeAttribute(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage( { direction: ModeToggle.ID, message: this.modeStatus }, '*' ); } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.notify(); } /* flipMode() */ } /* ModeToggle */ const modeToggle = new ModeToggle(); </script><body><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper"> <a href="/" id="avatar" class="rounded-circle"> <img src="/assets/images/zhgchgli.jpg" width="112" height="112" alt="avatar" onerror="this.style.display='none'"> </a><div class="site-title"> <a href="/">ZhgChgLi</a></div><div class="site-subtitle fst-italic">Live a life you will remember.</div></div><ul class="nav flex-column flex-grow-1 w-100 ps-0"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle"></i> <span>ABOUT</span> </a><li class="nav-item"> <a href="/real/" class="nav-link"> <i class="fa-fw fa fa-camera-retro"></i> <span>REAL LIFE</span> </a><li class="nav-item"> <a href="/contact/" class="nav-link"> <i class="fa-fw fa fa-envelope-open"></i> <span>CONTACT</span> </a></ul><div class="sidebar-bottom d-flex flex-wrap align-items-center w-100"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://link.zhgchg.li" aria-label="link" target="_blank" rel="noopener noreferrer" > <i class="fas fa-link"></i> </a> <a href="https://www.linkedin.com/in/zhgchgli" aria-label="linkedin" target="_blank" rel="noopener noreferrer" > <i class="fab fa-linkedin"></i> </a> <a href="javascript:location.href = 'mailto:' + ['zhgchgli','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container px-xxl-5"><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100" > <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>AppStore APP’s Reviews Bot Insights</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..." > </span> <span id="search-cancel">Cancel</span></div></div><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pe-xl-4"><div class="post px-1 px-md-2"><h1 data-toc-skip>AppStore APP’s Reviews Bot Insights</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1619018191" data-df="ll" data-bs-toggle="tooltip" data-bs-placement="bottom" > Apr 21, 2021 </em> </span> <span> Updated <em class="" data-ts="1713026308" data-df="ll" data-bs-toggle="tooltip" data-bs-placement="bottom" > Apr 13, 2024 </em> </span><div class="mt-3 mb-3"> <a href="/assets/cb0c68c33994/1*BMCG3cu21W5MbODBbhI-sA.jpeg" class="popup img-link preview-img shimmer"><img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1200 630'%3E%3C/svg%3E" data-src="/assets/cb0c68c33994/1*BMCG3cu21W5MbODBbhI-sA.jpeg" alt="Preview Image" width="1200" height="630" class="lazyload" data-proofer-ignore></a></div><div class="d-flex justify-content-between"> <span> By <em> <a href=""></a> </em> </span><div> <span class="readtime" data-bs-toggle="tooltip" data-bs-placement="bottom" title="2539 words" > <em>14 min</em> read</span></div></div></div><div class="post-content"> <widgetic id="64ce7263ecb2a197598b4567" resize="fill" width="560" height="60" autoscale="on" adaptive="414"></widgetic><script async src="https://widgetic.com/sdk/sdk.js"></script><h3 id="appstore-apps-reviews-slack-bot-insights"><span class="me-2">AppStore APP’s Reviews Slack Bot Insights</span><a href="#appstore-apps-reviews-slack-bot-insights" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Using Ruby+Fastlane-SpaceShip to build an APP review tracking notification Slack bot</p><p><a href="/assets/cb0c68c33994/1*BMCG3cu21W5MbODBbhI-sA.jpeg" class="popup img-link "><img data-src="/assets/cb0c68c33994/1*BMCG3cu21W5MbODBbhI-sA.jpeg" alt="Photo by [Austin Distel](https://unsplash.com/@austindistel?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText){:target=&quot;_blank&quot;}" class="lazyload" data-proofer-ignore></a></p><p>Photo by <a href="https://unsplash.com/@austindistel?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" target="_blank">Austin Distel</a></p><h4 id="ignorance-is-bliss"><span class="me-2">Ignorance is bliss</span><a href="#ignorance-is-bliss" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><a href="/assets/cb0c68c33994/1*Iv6qvrBfyv3bU1NK1hPVHg.png" class="popup img-link "><img data-src="/assets/cb0c68c33994/1*Iv6qvrBfyv3bU1NK1hPVHg.png" alt="[AppReviewBot as an example](https://appreviewbot.com){:target=&quot;_blank&quot;}" class="lazyload" data-proofer-ignore></a></p><p><a href="https://appreviewbot.com" target="_blank">AppReviewBot as an example</a></p><p>I recently discovered that the bot in Slack that forwards the latest APP reviews is a paid service. I always thought this feature was free. The cost ranges from $5 to $200 USD/month because each platform offers more than just the “App Review Bot” feature. They also provide data statistics, records, unified backend, competitor comparisons, etc. The cost is based on the services each platform can provide. The Review Bot is just one part of their offerings, but I only need this feature and nothing else. Paying for it seems wasteful.</p><h3 id="problem"><span class="me-2">Problem</span><a href="#problem" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>I originally used the free open-source tool <a href="https://github.com/TradeMe/ReviewMe" target="_blank">TradeMe/ReviewMe</a> for Slack notifications, but this tool has been outdated for a long time. Occasionally, Slack would suddenly send out some old reviews, which was quite alarming (many bugs had already been fixed, making us think there were new issues!). The reason was unclear.</p><p>So, I considered finding other tools or methods to replace it.</p><h3 id="tldr-20220810-update"><span class="me-2">TL;DR [2022/08/10] Update:</span><a href="#tldr-20220810-update" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>We have now redesigned the App Reviews Bot using the new <a href="../f1365e51902c/">App Store Connect API</a> and relaunched it as “ <a href="../e36e48bb9265/">ZReviewTender — a free open-source App Reviews monitoring bot</a> “.</p><p>====</p><h3 id="20220720-update"><span class="me-2">2022/07/20 Update</span><a href="#20220720-update" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><a href="../f1365e51902c/">App Store Connect API now supports reading and managing Customer Reviews</a>. The App Store Connect API natively supports accessing App reviews, <strong>no longer requiring</strong> Fastlane — Spaceship to fetch reviews from the backend.</p><h3 id="principle-exploration"><span class="me-2">Principle Exploration</span><a href="#principle-exploration" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>With the motivation in place, let’s explore the principles to achieve the goal.</p><h4 id="official-api-"><span class="me-2">Official API ❌</span><a href="#official-api-" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Apple provides the <a href="https://developer.apple.com/app-store-connect/api/" target="_blank">App Store Connect API</a>, but it does not offer a feature to fetch reviews.</p><p>[2022/07/20 Update]: <a href="../f1365e51902c/">App Store Connect API now supports reading and managing Customer Reviews</a></p><h4 id="public-url-api-rss-️"><span class="me-2">Public URL API (RSS) ⚠️</span><a href="#public-url-api-rss-️" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Apple provides a public APP review <a href="https://rss.itunes.apple.com/zh-tw" target="_blank">RSS subscription URL</a>, and it offers both rss xml and json formats.</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>https://itunes.apple.com/country_code/rss/customerreviews/id=APP_ID/page=1/sortBy=mostRecent/json
</pre></table></code></div></div><ul><li>Country code: Refer to <a href="https://help.apple.com/app-store-connect/#/dev997f9cf7c" target="_blank">this document</a>.<li>APP_ID: Go to the App web version, and you will get the URL: https://apps.apple.com/tw/app/APP_NAME/id <strong>12345678</strong>, the number after id is the App ID (pure numbers).<li>Page: You can request pages 1~10, beyond that you cannot retrieve.<li>SortBy: <code class="language-plaintext highlighter-rouge">mostRecent/json</code> requests the latest &amp; json format, you can also change it to <code class="language-plaintext highlighter-rouge">mostRecent/xml</code> for xml format.</ul><p><strong>The returned review data is as follows:</strong></p><p>rss.json:</p><div class="language-json highlighter-rouge"><div class="code-header"> <span data-label-text="JSON"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
</pre><td class="rouge-code"><pre><span class="p">{</span><span class="w">
  </span><span class="nl">"author"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"uri"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://itunes.apple.com/tw/reviews/id123456789"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"im:version"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4.27.1"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"im:rating"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123456789"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Great presence!"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"content"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Life is worth it~"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"text"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"link"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"rel"</span><span class="p">:</span><span class="w"> </span><span class="s2">"related"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://itunes.apple.com/tw/review?id=123456789&amp;type=Purple%20Software"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"im:voteSum"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"im:contentType"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"term"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Application"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Application"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"im:voteCount"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre></table></code></div></div><p><strong>Advantages:</strong></p><ol><li>Public, accessible without authentication steps<li>Simple and easy to use</ol><p><strong>Disadvantages:</strong></p><ol><li>This RSS API is very outdated and hasn’t been updated<li>The returned review information is too little (no comment time, edited review?, replied?)<li>Encounter data disorder issues (the last few pages occasionally suddenly spit out old data)<li>Can access up to 10 pages</ol><blockquote><p><em>The biggest problem we encountered is 3; but it is uncertain whether this is an issue with the <a href="https://github.com/TradeMe/ReviewMe" target="_blank">Bot tool</a> we are using or with the RSS URL data.</em></p></blockquote><h4 id="private-url-api-"><span class="me-2">Private URL API ✅</span><a href="#private-url-api-" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>This method is somewhat unconventional and was discovered by a sudden inspiration; but after referring to other Review Bot practices, I found that many websites also use it this way, so it should be fine, and I saw tools doing this 4-5 years ago, just didn’t delve into it at the time.</p><p><strong>Advantages:</strong></p><ol><li>Same data as Apple’s backend<li>Complete and up-to-date data<li>Can do more detailed filtering<li>Deeply integrated APP tools also use this method (AppRadar/AppReviewBot…)</ol><p><strong>Disadvantages:</strong></p><ol><li>Unofficial method (unconventional)<li>Due to Apple’s implementation of comprehensive two-step login, the login session needs to be updated regularly.</ol><p><strong>Step 1 — Sniff the API that loads the review section of App Store Connect backend:</strong></p><p><a href="/assets/cb0c68c33994/1*74lbicQ_vPzrLfm1imk7Pg.png" class="popup img-link "><img data-src="/assets/cb0c68c33994/1*74lbicQ_vPzrLfm1imk7Pg.png" alt="" class="lazyload" data-proofer-ignore></a></p><p>Get the Apple backend by hitting:</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>https://appstoreconnect.apple.com/WebObjects/iTunesConnect.woa/ra/apps/APP_ID/platforms/ios/reviews?index=0&amp;sort=REVIEW_SORT_ORDER_MOST_RECENT
</pre></table></code></div></div><p>This endpoint retrieves the review list:</p><p><a href="/assets/cb0c68c33994/1*I00Znmzaivm_-7ous0-4Pw.png" class="popup img-link "><img data-src="/assets/cb0c68c33994/1*I00Znmzaivm_-7ous0-4Pw.png" alt="" class="lazyload" data-proofer-ignore></a></p><p>index = page offset, up to 100 entries per page.</p><p><strong>The returned review data is as follows:</strong></p><p>private.json:</p><div class="language-json highlighter-rouge"><div class="code-header"> <span data-label-text="JSON"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
</pre><td class="rouge-code"><pre><span class="p">{</span><span class="w">
  </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">123456789</span><span class="p">,</span><span class="w">
    </span><span class="nl">"rating"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
    </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Great presence!"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"review"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Life is worth it~"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"nickname"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"storeFront"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TW"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"appVersionString"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4.27.1"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"lastModified"</span><span class="p">:</span><span class="w"> </span><span class="mi">1618836654000</span><span class="p">,</span><span class="w">
    </span><span class="nl">"helpfulViews"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"totalViews"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"edited"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"developerResponse"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"isEditable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"isRequired"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nl">"errorKeys"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre></table></code></div></div><p>After testing, it was found that you only need to include <code class="language-plaintext highlighter-rouge">cookie: myacinfo=&lt;Token&gt;</code> to forge a request and obtain data:</p><p><a href="/assets/cb0c68c33994/1*b_vINNRMrAIQrkuouN7X1Q.png" class="popup img-link "><img data-src="/assets/cb0c68c33994/1*b_vINNRMrAIQrkuouN7X1Q.png" alt="" class="lazyload" data-proofer-ignore></a></p><p>We have the API and the required headers, now we need to automate the retrieval of this cookie information from the backend.</p><p><strong>Step Two — The Versatile Fastlane</strong></p><p>Since Apple now enforces full Two-Step Verification, automating login verification has become more cumbersome. Fortunately, the clever <a href="https://docs.fastlane.tools/best-practices/continuous-integration/" target="_blank">Fastlane</a> has implemented everything from the official App Store Connect API, iTMSTransporter, to web authentication (including two-step verification). We can directly use Fastlane’s command:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>fastlane spaceauth <span class="nt">-u</span> &lt;App Store Connect Account <span class="o">(</span>Email<span class="o">)&gt;</span>
</pre></table></code></div></div><p>This command will complete the web login verification (including two-step verification) and then store the cookie in the FASTLANE_SESSION file.</p><p>You will get a string similar to the following:</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre><td class="rouge-code"><pre>!ruby/object:HTTP::Cookie
name: myacinfo  value: &lt;token&gt;  
domain: apple.com for_domain: true  path: "/"  
secure: true  httponly: true  expires: max_age: 
created_at: 2021-04-21 20:42:36.818821000 +08:00  
accessed_at: 2021-04-21 22:02:45.923016000 +08:00
!ruby/object:HTTP::Cookie
name: &lt;hash&gt;  value: &lt;token&gt;
domain: idmsa.apple.com for_domain: true  path: "/"
secure: true  httponly: true  expires: max_age: 2592000
created_at: 2021-04-19 23:21:05.851853000 +08:00
accessed_at: 2021-04-21 20:42:35.735921000 +08:00
</pre></table></code></div></div><p>By including <code class="language-plaintext highlighter-rouge">myacinfo = value</code>, you can obtain the review list.</p><p><strong>Step Three — SpaceShip</strong></p><p>Initially, I thought Fastlane could only help us up to this point, and we would have to manually integrate the flow of obtaining the cookie from Fastlane and then calling the API. However, after some exploration, I discovered that Fastlane’s authentication module <code class="language-plaintext highlighter-rouge">SpaceShip</code> has even more powerful features!</p><p><a href="/assets/cb0c68c33994/1*OlYQLNXAOk1oNqDP7LSlrA.png" class="popup img-link "><img data-src="/assets/cb0c68c33994/1*OlYQLNXAOk1oNqDP7LSlrA.png" alt="`SpaceShip`" class="lazyload" data-proofer-ignore></a></p><p><code class="language-plaintext highlighter-rouge">SpaceShip</code></p><p>SpaceShip already has a method for fetching the review list <a href="https://www.rubydoc.info/gems/spaceship/0.39.0/Spaceship/TunesClient#get_reviews-instance_method" target="_blank"><strong>Class: Spaceship::TunesClient::get_reviews</strong></a>!</p><div class="language-ruby highlighter-rouge"><div class="code-header"> <span data-label-text="Ruby"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="n">app</span> <span class="o">=</span> <span class="no">Spaceship</span><span class="o">::</span><span class="no">Tunes</span><span class="o">::</span><span class="n">login</span><span class="p">(</span><span class="n">appstore_account</span><span class="p">,</span> <span class="n">appstore_password</span><span class="p">)</span>
<span class="n">reviews</span> <span class="o">=</span> <span class="n">app</span><span class="p">.</span><span class="nf">get_reviews</span><span class="p">(</span><span class="n">app_id</span><span class="p">,</span> <span class="n">platform</span><span class="p">,</span> <span class="n">storefront</span><span class="p">,</span> <span class="n">versionId</span> <span class="o">=</span> <span class="s1">''</span><span class="p">)</span>
</pre></table></code></div></div><p>*storefront = region</p><p><strong>Step Four — Assembly</strong></p><p>Fastlane and Spaceship are both written in Ruby, so we also need to use Ruby to create this Bot tool.</p><p>We can create a <code class="language-plaintext highlighter-rouge">reviewBot.rb</code> file, and to compile and execute it, simply enter in the Terminal:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>ruby reviewBot.rb
</pre></table></code></div></div><p>That’s it. <em>( *For more Ruby environment issues, refer to the tips at the end)</em></p><p><strong>First</strong>, since the original get_reviews method’s parameters do not meet our needs; I want review data for all regions and all versions, without filtering, and with pagination support:</p><p>extension.rb:</p><div class="language-ruby highlighter-rouge"><div class="code-header"> <span data-label-text="Ruby"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="c1"># Extension Spaceship-&gt;TunesClient</span>
<span class="k">module</span> <span class="nn">Spaceship</span>
  <span class="k">class</span> <span class="nc">TunesClient</span> <span class="o">&lt;</span> <span class="no">Spaceship</span><span class="o">::</span><span class="no">Client</span>
    <span class="k">def</span> <span class="nf">get_recent_reviews</span><span class="p">(</span><span class="n">app_id</span><span class="p">,</span> <span class="n">platform</span><span class="p">,</span> <span class="n">index</span><span class="p">)</span>
      <span class="n">r</span> <span class="o">=</span> <span class="n">request</span><span class="p">(</span><span class="ss">:get</span><span class="p">,</span> <span class="s2">"ra/apps/</span><span class="si">#{</span><span class="n">app_id</span><span class="si">}</span><span class="s2">/platforms/</span><span class="si">#{</span><span class="n">platform</span><span class="si">}</span><span class="s2">/reviews?index=</span><span class="si">#{</span><span class="n">index</span><span class="si">}</span><span class="s2">&amp;sort=REVIEW_SORT_ORDER_MOST_RECENT"</span><span class="p">)</span>
      <span class="n">parse_response</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="s1">'data'</span><span class="p">)[</span><span class="s1">'reviews'</span><span class="p">]</span>
     <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></table></code></div></div><p>So we extend a method in TunesClient, with parameters only including app_id, platform = <code class="language-plaintext highlighter-rouge">ios</code> ( <strong>all lowercase</strong> ), index = pagination offset.</p><p><strong>Next, assemble login authentication and fetch the review list:</strong></p><p>get_recent_reviews.rb:</p><div class="language-ruby highlighter-rouge"><div class="code-header"> <span data-label-text="Ruby"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre><td class="rouge-code"><pre><span class="n">index</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">breakWhile</span> <span class="o">=</span> <span class="kp">true</span>
<span class="k">while</span> <span class="n">breakWhile</span>
  <span class="n">app</span> <span class="o">=</span> <span class="no">Spaceship</span><span class="o">::</span><span class="no">Tunes</span><span class="o">::</span><span class="n">login</span><span class="p">(</span><span class="no">APPStoreConnect</span> <span class="n">account</span> <span class="p">(</span><span class="no">Email</span><span class="p">),</span> <span class="no">APPStoreConnect</span> <span class="n">password</span><span class="p">)</span>
  <span class="n">reviews</span> <span class="o">=</span> <span class="n">app</span><span class="p">.</span><span class="nf">get_recent_reviews</span><span class="p">(</span><span class="vg">$app_id</span><span class="p">,</span> <span class="vg">$platform</span><span class="p">,</span> <span class="n">index</span><span class="p">)</span>
  <span class="k">if</span> <span class="n">reviews</span><span class="p">.</span><span class="nf">length</span><span class="p">()</span> <span class="o">&lt;=</span> <span class="mi">0</span>
    <span class="n">breakWhile</span> <span class="o">=</span> <span class="kp">false</span>
    <span class="k">break</span>
  <span class="k">end</span>
  <span class="n">reviews</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">review</span><span class="o">|</span>
    <span class="n">index</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="nb">puts</span> <span class="n">review</span><span class="p">[</span><span class="s2">"value"</span><span class="p">]</span>
  <span class="p">}</span>
<span class="k">end</span>
</pre></table></code></div></div><p>Use while to traverse all pages, and terminate when there is no content.</p><p><strong>Next, add a record of the last latest time, and only notify the latest messages that have not been notified:</strong></p><p>lastModified.rb:</p><div class="language-ruby highlighter-rouge"><div class="code-header"> <span data-label-text="Ruby"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
</pre><td class="rouge-code"><pre><span class="n">lastModified</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">if</span> <span class="no">File</span><span class="p">.</span><span class="nf">exists?</span><span class="p">(</span><span class="s2">".lastModified"</span><span class="p">)</span>
  <span class="n">lastModifiedFile</span> <span class="o">=</span> <span class="no">File</span><span class="p">.</span><span class="nf">open</span><span class="p">(</span><span class="s2">".lastModified"</span><span class="p">)</span>
  <span class="n">lastModified</span> <span class="o">=</span> <span class="n">lastModifiedFile</span><span class="p">.</span><span class="nf">read</span><span class="p">.</span><span class="nf">to_i</span>
<span class="k">end</span>
<span class="n">newLastModified</span> <span class="o">=</span> <span class="n">lastModified</span>
<span class="n">isFirst</span> <span class="o">=</span> <span class="kp">true</span>
<span class="n">messages</span> <span class="o">=</span> <span class="p">[]</span>

<span class="n">index</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">breakWhile</span> <span class="o">=</span> <span class="kp">true</span>
<span class="k">while</span> <span class="n">breakWhile</span>
  <span class="n">app</span> <span class="o">=</span> <span class="no">Spaceship</span><span class="o">::</span><span class="no">Tunes</span><span class="o">::</span><span class="n">login</span><span class="p">(</span><span class="no">APPStoreConnect</span> <span class="n">account</span> <span class="p">(</span><span class="no">Email</span><span class="p">),</span> <span class="no">APPStoreConnect</span> <span class="n">password</span><span class="p">)</span>
  <span class="n">reviews</span> <span class="o">=</span> <span class="n">app</span><span class="p">.</span><span class="nf">get_recent_reviews</span><span class="p">(</span><span class="vg">$app_id</span><span class="p">,</span> <span class="vg">$platform</span><span class="p">,</span> <span class="n">index</span><span class="p">)</span>
  <span class="k">if</span> <span class="n">reviews</span><span class="p">.</span><span class="nf">length</span><span class="p">()</span> <span class="o">&lt;=</span> <span class="mi">0</span>
    <span class="n">breakWhile</span> <span class="o">=</span> <span class="kp">false</span>
    <span class="k">break</span>
  <span class="k">end</span>
  <span class="n">reviews</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">review</span><span class="o">|</span>
    <span class="n">index</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">if</span> <span class="n">isFirst</span>
      <span class="n">isFirst</span> <span class="o">=</span> <span class="kp">false</span>
      <span class="n">newLastModified</span> <span class="o">=</span> <span class="n">review</span><span class="p">[</span><span class="s2">"value"</span><span class="p">][</span><span class="s2">"lastModified"</span><span class="p">]</span>
    <span class="k">end</span>

    <span class="k">if</span> <span class="n">review</span><span class="p">[</span><span class="s2">"value"</span><span class="p">][</span><span class="s2">"lastModified"</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">lastModified</span> <span class="o">&amp;&amp;</span> <span class="n">lastModified</span> <span class="o">!=</span> <span class="mi">0</span>  
      <span class="c1"># Do not send notifications the first time</span>
      <span class="n">messages</span><span class="p">.</span><span class="nf">append</span><span class="p">(</span><span class="n">review</span><span class="p">[</span><span class="s2">"value"</span><span class="p">])</span>
    <span class="k">else</span>
      <span class="n">breakWhile</span> <span class="o">=</span> <span class="kp">false</span>
      <span class="k">break</span>
    <span class="k">end</span>
  <span class="p">}</span>
<span class="k">end</span>

<span class="n">messages</span><span class="p">.</span><span class="nf">sort!</span> <span class="p">{</span> <span class="o">|</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="o">|</span>  <span class="n">a</span><span class="p">[</span><span class="s2">"lastModified"</span><span class="p">]</span> <span class="o">&lt;=&gt;</span> <span class="n">b</span><span class="p">[</span><span class="s2">"lastModified"</span><span class="p">]</span> <span class="p">}</span>
<span class="n">messages</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">message</span><span class="o">|</span>
    <span class="n">notify_slack</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
<span class="p">}</span>

<span class="no">File</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="s2">".lastModified"</span><span class="p">,</span> <span class="n">newLastModified</span><span class="p">,</span> <span class="ss">mode: </span><span class="s2">"w+"</span><span class="p">)</span>
</pre></table></code></div></div><p>Simply use a <code class="language-plaintext highlighter-rouge">.lastModified</code> to record the time obtained during the last execution.</p><p><em>*Do not send notifications the first time, otherwise, it will spam</em></p><p><strong>The final step, assemble the push message &amp; send it to Slack:</strong></p><p>slack.rb:</p><div class="language-ruby highlighter-rouge"><div class="code-header"> <span data-label-text="Ruby"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
</pre><td class="rouge-code"><pre><span class="c1"># Slack Bot</span>
<span class="k">def</span> <span class="nf">notify_slack</span><span class="p">(</span><span class="n">review</span><span class="p">)</span>
  <span class="n">rating</span> <span class="o">=</span> <span class="n">review</span><span class="p">[</span><span class="s2">"rating"</span><span class="p">].</span><span class="nf">to_i</span>
  <span class="n">color</span> <span class="o">=</span> <span class="n">rating</span> <span class="o">&gt;=</span> <span class="mi">4</span> <span class="p">?</span> <span class="s2">"good"</span> <span class="p">:</span> <span class="p">(</span><span class="n">rating</span> <span class="o">&gt;=</span> <span class="mi">2</span> <span class="p">?</span> <span class="s2">"warning"</span> <span class="p">:</span> <span class="s2">"danger"</span><span class="p">)</span>
  <span class="n">like</span> <span class="o">=</span> <span class="n">review</span><span class="p">[</span><span class="s2">"helpfulViews"</span><span class="p">].</span><span class="nf">to_i</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">?</span> <span class="s2">" - </span><span class="si">#{</span><span class="n">review</span><span class="p">[</span><span class="s2">"helpfulViews"</span><span class="p">]</span><span class="si">}</span><span class="s2"> :thumbsup:"</span> <span class="p">:</span> <span class="s2">""</span>
  <span class="n">date</span> <span class="o">=</span> <span class="n">review</span><span class="p">[</span><span class="s2">"edited"</span><span class="p">]</span> <span class="o">==</span> <span class="kp">false</span> <span class="p">?</span> <span class="s2">"Created at: </span><span class="si">#{</span><span class="no">Time</span><span class="p">.</span><span class="nf">at</span><span class="p">(</span><span class="n">review</span><span class="p">[</span><span class="s2">"lastModified"</span><span class="p">].</span><span class="nf">to_i</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">).</span><span class="nf">to_datetime</span><span class="si">}</span><span class="s2">"</span> <span class="p">:</span> <span class="s2">"Updated at: </span><span class="si">#{</span><span class="no">Time</span><span class="p">.</span><span class="nf">at</span><span class="p">(</span><span class="n">review</span><span class="p">[</span><span class="s2">"lastModified"</span><span class="p">].</span><span class="nf">to_i</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">).</span><span class="nf">to_datetime</span><span class="si">}</span><span class="s2">"</span>
  
    
  <span class="n">isResponse</span> <span class="o">=</span> <span class="s2">""</span>
  <span class="k">if</span> <span class="n">review</span><span class="p">[</span><span class="s2">"developerResponse"</span><span class="p">]</span> <span class="o">!=</span> <span class="kp">nil</span> <span class="o">&amp;&amp;</span> <span class="n">review</span><span class="p">[</span><span class="s2">"developerResponse"</span><span class="p">][</span><span class="s1">'lastModified'</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">review</span><span class="p">[</span><span class="s2">"lastModified"</span><span class="p">]</span>
    <span class="n">isResponse</span> <span class="o">=</span> <span class="s2">" (Response outdated)"</span>
  <span class="k">end</span>
  
  <span class="n">edited</span> <span class="o">=</span> <span class="n">review</span><span class="p">[</span><span class="s2">"edited"</span><span class="p">]</span> <span class="o">==</span> <span class="kp">false</span> <span class="p">?</span> <span class="s2">""</span> <span class="p">:</span> <span class="s2">":memo: User updated review</span><span class="si">#{</span><span class="n">isResponse</span><span class="si">}</span><span class="s2">:"</span>

  <span class="n">stars</span> <span class="o">=</span> <span class="s2">"★"</span> <span class="o">*</span> <span class="n">rating</span> <span class="o">+</span> <span class="s2">"☆"</span> <span class="o">*</span> <span class="p">(</span><span class="mi">5</span> <span class="o">-</span> <span class="n">rating</span><span class="p">)</span>
  <span class="n">attachments</span> <span class="o">=</span> <span class="p">{</span>
    <span class="ss">:pretext</span> <span class="o">=&gt;</span> <span class="n">edited</span><span class="p">,</span>
    <span class="ss">:color</span> <span class="o">=&gt;</span> <span class="n">color</span><span class="p">,</span>
    <span class="ss">:fallback</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="si">#{</span><span class="n">review</span><span class="p">[</span><span class="s2">"title"</span><span class="p">]</span><span class="si">}</span><span class="s2"> - </span><span class="si">#{</span><span class="n">stars</span><span class="si">}#{</span><span class="n">like</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span>
    <span class="ss">:title</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="si">#{</span><span class="n">review</span><span class="p">[</span><span class="s2">"title"</span><span class="p">]</span><span class="si">}</span><span class="s2"> - </span><span class="si">#{</span><span class="n">stars</span><span class="si">}#{</span><span class="n">like</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span>
    <span class="ss">:text</span> <span class="o">=&gt;</span> <span class="n">review</span><span class="p">[</span><span class="s2">"review"</span><span class="p">],</span>
    <span class="ss">:author_name</span> <span class="o">=&gt;</span> <span class="n">review</span><span class="p">[</span><span class="s2">"nickname"</span><span class="p">],</span>
    <span class="ss">:footer</span> <span class="o">=&gt;</span> <span class="s2">"iOS - v</span><span class="si">#{</span><span class="n">review</span><span class="p">[</span><span class="s2">"appVersionString"</span><span class="p">]</span><span class="si">}</span><span class="s2"> - </span><span class="si">#{</span><span class="n">review</span><span class="p">[</span><span class="s2">"storeFront"</span><span class="p">]</span><span class="si">}</span><span class="s2"> - </span><span class="si">#{</span><span class="n">date</span><span class="si">}</span><span class="s2"> - &lt;https://appstoreconnect.apple.com/apps/APP_ID/appstore/activity/ios/ratingsResponses|Go To App Store&gt;"</span>
  <span class="p">}</span>
  <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span>
   <span class="ss">:attachments</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="n">attachments</span><span class="p">],</span>
   <span class="ss">:icon_emoji</span> <span class="o">=&gt;</span> <span class="s2">":storm_trooper:"</span><span class="p">,</span>
   <span class="ss">:username</span> <span class="o">=&gt;</span> <span class="s2">"ZhgChgLi iOS Review Bot"</span>
  <span class="p">}.</span><span class="nf">to_json</span>
  <span class="n">cmd</span> <span class="o">=</span> <span class="s2">"curl -X POST --data-urlencode 'payload=</span><span class="si">#{</span><span class="n">payload</span><span class="si">}</span><span class="s2">' SLACK_WEB_HOOK_URL"</span>
  <span class="nb">system</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span> <span class="ss">:err</span> <span class="o">=&gt;</span> <span class="no">File</span><span class="o">::</span><span class="no">NULL</span><span class="p">)</span>
  <span class="nb">puts</span> <span class="s2">"</span><span class="si">#{</span><span class="n">review</span><span class="p">[</span><span class="s2">"id"</span><span class="p">]</span><span class="si">}</span><span class="s2"> send Notify Success!"</span>
 <span class="k">end</span>
</pre></table></code></div></div><p><code class="language-plaintext highlighter-rouge">SLACK_WEB_HOOK_URL</code> = <a href="https://slack.com/apps/A0F7XDUAZ-incoming-webhooks" target="_blank"><strong>Incoming WebHook URL</strong></a></p><h3 id="final-result"><span class="me-2"><strong>Final Result</strong></span><a href="#final-result" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>appreviewbot.rb:</p><div class="language-ruby highlighter-rouge"><div class="code-header"> <span data-label-text="Ruby"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
</pre><td class="rouge-code"><pre><span class="nb">require</span> <span class="s2">"Spaceship"</span>
<span class="nb">require</span> <span class="s1">'json'</span>
<span class="nb">require</span> <span class="s1">'date'</span>

<span class="c1"># Config</span>
<span class="vg">$slack_web_hook</span> <span class="o">=</span> <span class="s2">"Target notification web hook url"</span>
<span class="vg">$slack_debug_web_hook</span> <span class="o">=</span> <span class="s2">"Notification web hook url when the bot has an error"</span>
<span class="vg">$appstore_account</span> <span class="o">=</span> <span class="s2">"APPStoreConnect account (Email)"</span>
<span class="vg">$appstore_password</span> <span class="o">=</span> <span class="s2">"APPStoreConnect password"</span>
<span class="vg">$app_id</span> <span class="o">=</span> <span class="s2">"APP_ID"</span>
<span class="vg">$platform</span> <span class="o">=</span> <span class="s2">"ios"</span>

<span class="c1"># Extension Spaceship-&gt;TunesClient</span>
<span class="k">module</span> <span class="nn">Spaceship</span>
  <span class="k">class</span> <span class="nc">TunesClient</span> <span class="o">&lt;</span> <span class="no">Spaceship</span><span class="o">::</span><span class="no">Client</span>
    <span class="k">def</span> <span class="nf">get_recent_reviews</span><span class="p">(</span><span class="n">app_id</span><span class="p">,</span> <span class="n">platform</span><span class="p">,</span> <span class="n">index</span><span class="p">)</span>
      <span class="n">r</span> <span class="o">=</span> <span class="n">request</span><span class="p">(</span><span class="ss">:get</span><span class="p">,</span> <span class="s2">"ra/apps/</span><span class="si">#{</span><span class="n">app_id</span><span class="si">}</span><span class="s2">/platforms/</span><span class="si">#{</span><span class="n">platform</span><span class="si">}</span><span class="s2">/reviews?index=</span><span class="si">#{</span><span class="n">index</span><span class="si">}</span><span class="s2">&amp;sort=REVIEW_SORT_ORDER_MOST_RECENT"</span><span class="p">)</span>
      <span class="n">parse_response</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="s1">'data'</span><span class="p">)[</span><span class="s1">'reviews'</span><span class="p">]</span>
     <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="c1"># Slack Bot</span>
<span class="k">def</span> <span class="nf">notify_slack</span><span class="p">(</span><span class="n">review</span><span class="p">)</span>
  <span class="n">rating</span> <span class="o">=</span> <span class="n">review</span><span class="p">[</span><span class="s2">"rating"</span><span class="p">].</span><span class="nf">to_i</span>
  <span class="n">color</span> <span class="o">=</span> <span class="n">rating</span> <span class="o">&gt;=</span> <span class="mi">4</span> <span class="p">?</span> <span class="s2">"good"</span> <span class="p">:</span> <span class="p">(</span><span class="n">rating</span> <span class="o">&gt;=</span> <span class="mi">2</span> <span class="p">?</span> <span class="s2">"warning"</span> <span class="p">:</span> <span class="s2">"danger"</span><span class="p">)</span>
  <span class="n">like</span> <span class="o">=</span> <span class="n">review</span><span class="p">[</span><span class="s2">"helpfulViews"</span><span class="p">].</span><span class="nf">to_i</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">?</span> <span class="s2">" - </span><span class="si">#{</span><span class="n">review</span><span class="p">[</span><span class="s2">"helpfulViews"</span><span class="p">]</span><span class="si">}</span><span class="s2"> :thumbsup:"</span> <span class="p">:</span> <span class="s2">""</span>
  <span class="n">date</span> <span class="o">=</span> <span class="n">review</span><span class="p">[</span><span class="s2">"edited"</span><span class="p">]</span> <span class="o">==</span> <span class="kp">false</span> <span class="p">?</span> <span class="s2">"Created at: </span><span class="si">#{</span><span class="no">Time</span><span class="p">.</span><span class="nf">at</span><span class="p">(</span><span class="n">review</span><span class="p">[</span><span class="s2">"lastModified"</span><span class="p">].</span><span class="nf">to_i</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">).</span><span class="nf">to_datetime</span><span class="si">}</span><span class="s2">"</span> <span class="p">:</span> <span class="s2">"Updated at: </span><span class="si">#{</span><span class="no">Time</span><span class="p">.</span><span class="nf">at</span><span class="p">(</span><span class="n">review</span><span class="p">[</span><span class="s2">"lastModified"</span><span class="p">].</span><span class="nf">to_i</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">).</span><span class="nf">to_datetime</span><span class="si">}</span><span class="s2">"</span>
  
    
  <span class="n">isResponse</span> <span class="o">=</span> <span class="s2">""</span>
  <span class="k">if</span> <span class="n">review</span><span class="p">[</span><span class="s2">"developerResponse"</span><span class="p">]</span> <span class="o">!=</span> <span class="kp">nil</span> <span class="o">&amp;&amp;</span> <span class="n">review</span><span class="p">[</span><span class="s2">"developerResponse"</span><span class="p">][</span><span class="s1">'lastModified'</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">review</span><span class="p">[</span><span class="s2">"lastModified"</span><span class="p">]</span>
    <span class="n">isResponse</span> <span class="o">=</span> <span class="s2">" (Customer service response is outdated)"</span>
  <span class="k">end</span>
  
  <span class="n">edited</span> <span class="o">=</span> <span class="n">review</span><span class="p">[</span><span class="s2">"edited"</span><span class="p">]</span> <span class="o">==</span> <span class="kp">false</span> <span class="p">?</span> <span class="s2">""</span> <span class="p">:</span> <span class="s2">":memo: User updated review</span><span class="si">#{</span><span class="n">isResponse</span><span class="si">}</span><span class="s2">:"</span>

  <span class="n">stars</span> <span class="o">=</span> <span class="s2">"★"</span> <span class="o">*</span> <span class="n">rating</span> <span class="o">+</span> <span class="s2">"☆"</span> <span class="o">*</span> <span class="p">(</span><span class="mi">5</span> <span class="o">-</span> <span class="n">rating</span><span class="p">)</span>
  <span class="n">attachments</span> <span class="o">=</span> <span class="p">{</span>
    <span class="ss">:pretext</span> <span class="o">=&gt;</span> <span class="n">edited</span><span class="p">,</span>
    <span class="ss">:color</span> <span class="o">=&gt;</span> <span class="n">color</span><span class="p">,</span>
    <span class="ss">:fallback</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="si">#{</span><span class="n">review</span><span class="p">[</span><span class="s2">"title"</span><span class="p">]</span><span class="si">}</span><span class="s2"> - </span><span class="si">#{</span><span class="n">stars</span><span class="si">}#{</span><span class="n">like</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span>
    <span class="ss">:title</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="si">#{</span><span class="n">review</span><span class="p">[</span><span class="s2">"title"</span><span class="p">]</span><span class="si">}</span><span class="s2"> - </span><span class="si">#{</span><span class="n">stars</span><span class="si">}#{</span><span class="n">like</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span>
    <span class="ss">:text</span> <span class="o">=&gt;</span> <span class="n">review</span><span class="p">[</span><span class="s2">"review"</span><span class="p">],</span>
    <span class="ss">:author_name</span> <span class="o">=&gt;</span> <span class="n">review</span><span class="p">[</span><span class="s2">"nickname"</span><span class="p">],</span>
    <span class="ss">:footer</span> <span class="o">=&gt;</span> <span class="s2">"iOS - v</span><span class="si">#{</span><span class="n">review</span><span class="p">[</span><span class="s2">"appVersionString"</span><span class="p">]</span><span class="si">}</span><span class="s2"> - </span><span class="si">#{</span><span class="n">review</span><span class="p">[</span><span class="s2">"storeFront"</span><span class="p">]</span><span class="si">}</span><span class="s2"> - </span><span class="si">#{</span><span class="n">date</span><span class="si">}</span><span class="s2"> - &lt;https://appstoreconnect.apple.com/apps/APP_ID/appstore/activity/ios/ratingsResponses|Go To App Store&gt;"</span>
  <span class="p">}</span>
  <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span>
   <span class="ss">:attachments</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="n">attachments</span><span class="p">],</span>
   <span class="ss">:icon_emoji</span> <span class="o">=&gt;</span> <span class="s2">":storm_trooper:"</span><span class="p">,</span>
   <span class="ss">:username</span> <span class="o">=&gt;</span> <span class="s2">"ZhgChgLi iOS Review Bot"</span>
  <span class="p">}.</span><span class="nf">to_json</span>
  <span class="n">cmd</span> <span class="o">=</span> <span class="s2">"curl -X POST --data-urlencode 'payload=</span><span class="si">#{</span><span class="n">payload</span><span class="si">}</span><span class="s2">' </span><span class="si">#{</span><span class="vg">$slack_web_hook</span><span class="si">}</span><span class="s2">"</span>
  <span class="nb">system</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span> <span class="ss">:err</span> <span class="o">=&gt;</span> <span class="no">File</span><span class="o">::</span><span class="no">NULL</span><span class="p">)</span>
  <span class="nb">puts</span> <span class="s2">"</span><span class="si">#{</span><span class="n">review</span><span class="p">[</span><span class="s2">"id"</span><span class="p">]</span><span class="si">}</span><span class="s2"> send Notify Success!"</span>
 <span class="k">end</span>

<span class="k">begin</span>
    <span class="n">lastModified</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">if</span> <span class="no">File</span><span class="p">.</span><span class="nf">exists?</span><span class="p">(</span><span class="s2">".lastModified"</span><span class="p">)</span>
      <span class="n">lastModifiedFile</span> <span class="o">=</span> <span class="no">File</span><span class="p">.</span><span class="nf">open</span><span class="p">(</span><span class="s2">".lastModified"</span><span class="p">)</span>
      <span class="n">lastModified</span> <span class="o">=</span> <span class="n">lastModifiedFile</span><span class="p">.</span><span class="nf">read</span><span class="p">.</span><span class="nf">to_i</span>
    <span class="k">end</span>
    <span class="n">newLastModified</span> <span class="o">=</span> <span class="n">lastModified</span>
    <span class="n">isFirst</span> <span class="o">=</span> <span class="kp">true</span>
    <span class="n">messages</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="n">index</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">breakWhile</span> <span class="o">=</span> <span class="kp">true</span>
    <span class="k">while</span> <span class="n">breakWhile</span>
      <span class="n">app</span> <span class="o">=</span> <span class="no">Spaceship</span><span class="o">::</span><span class="no">Tunes</span><span class="o">::</span><span class="n">login</span><span class="p">(</span><span class="vg">$appstore_account</span><span class="p">,</span> <span class="vg">$appstore_password</span><span class="p">)</span>
      <span class="n">reviews</span> <span class="o">=</span> <span class="n">app</span><span class="p">.</span><span class="nf">get_recent_reviews</span><span class="p">(</span><span class="vg">$app_id</span><span class="p">,</span> <span class="vg">$platform</span><span class="p">,</span> <span class="n">index</span><span class="p">)</span>
      <span class="k">if</span> <span class="n">reviews</span><span class="p">.</span><span class="nf">length</span><span class="p">()</span> <span class="o">&lt;=</span> <span class="mi">0</span>
        <span class="n">breakWhile</span> <span class="o">=</span> <span class="kp">false</span>
        <span class="k">break</span>
      <span class="k">end</span>
      <span class="n">reviews</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">review</span><span class="o">|</span>
        <span class="n">index</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="n">isFirst</span>
          <span class="n">isFirst</span> <span class="o">=</span> <span class="kp">false</span>
          <span class="n">newLastModified</span> <span class="o">=</span> <span class="n">review</span><span class="p">[</span><span class="s2">"value"</span><span class="p">][</span><span class="s2">"lastModified"</span><span class="p">]</span>
        <span class="k">end</span>

        <span class="k">if</span> <span class="n">review</span><span class="p">[</span><span class="s2">"value"</span><span class="p">][</span><span class="s2">"lastModified"</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">lastModified</span> <span class="o">&amp;&amp;</span> <span class="n">lastModified</span> <span class="o">!=</span> <span class="mi">0</span>  
          <span class="c1"># Do not send notification on first use</span>
          <span class="n">messages</span><span class="p">.</span><span class="nf">append</span><span class="p">(</span><span class="n">review</span><span class="p">[</span><span class="s2">"value"</span><span class="p">])</span>
        <span class="k">else</span>
          <span class="n">breakWhile</span> <span class="o">=</span> <span class="kp">false</span>
          <span class="k">break</span>
        <span class="k">end</span>
      <span class="p">}</span>
    <span class="k">end</span>
    
    <span class="n">messages</span><span class="p">.</span><span class="nf">sort!</span> <span class="p">{</span> <span class="o">|</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="o">|</span>  <span class="n">a</span><span class="p">[</span><span class="s2">"lastModified"</span><span class="p">]</span> <span class="o">&lt;=&gt;</span> <span class="n">b</span><span class="p">[</span><span class="s2">"lastModified"</span><span class="p">]</span> <span class="p">}</span>
    <span class="n">messages</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">message</span><span class="o">|</span>
        <span class="n">notify_slack</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
    <span class="p">}</span>
    
    <span class="no">File</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="s2">".lastModified"</span><span class="p">,</span> <span class="n">newLastModified</span><span class="p">,</span> <span class="ss">mode: </span><span class="s2">"w+"</span><span class="p">)</span>
<span class="k">rescue</span> <span class="o">=&gt;</span> <span class="n">error</span>
    <span class="n">attachments</span> <span class="o">=</span> <span class="p">{</span>
        <span class="ss">:color</span> <span class="o">=&gt;</span> <span class="s2">"danger"</span><span class="p">,</span>
        <span class="ss">:title</span> <span class="o">=&gt;</span> <span class="s2">"AppStoreReviewBot Error occurs!"</span><span class="p">,</span>
        <span class="ss">:text</span> <span class="o">=&gt;</span> <span class="n">error</span><span class="p">,</span>
        <span class="ss">:footer</span> <span class="o">=&gt;</span> <span class="s2">"*Due to Apple's technical limitations, the precise rating crawling function needs to be re-logged in and set approximately every month. We apologize for the inconvenience."</span>
    <span class="p">}</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span>
        <span class="ss">:attachments</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="n">attachments</span><span class="p">],</span>
        <span class="ss">:icon_emoji</span> <span class="o">=&gt;</span> <span class="s2">":storm_trooper:"</span><span class="p">,</span>
        <span class="ss">:username</span> <span class="o">=&gt;</span> <span class="s2">"ZhgChgLi iOS Review Bot"</span>
    <span class="p">}.</span><span class="nf">to_json</span>
    <span class="n">cmd</span> <span class="o">=</span> <span class="s2">"curl -X POST --data-urlencode 'payload=</span><span class="si">#{</span><span class="n">payload</span><span class="si">}</span><span class="s2">' </span><span class="si">#{</span><span class="vg">$slack_debug_web_hook</span><span class="si">}</span><span class="s2">"</span>
    <span class="nb">system</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span> <span class="ss">:err</span> <span class="o">=&gt;</span> <span class="no">File</span><span class="o">::</span><span class="no">NULL</span><span class="p">)</span>
    <span class="nb">puts</span> <span class="n">error</span>
<span class="k">end</span>
</pre></table></code></div></div><p>Additionally, a begin…rescue (try…catch) protection is added. If an error occurs, a Slack notification will be sent for us to check (mostly due to session expiration).</p><blockquote><p><strong><em>Finally, just add this script to crontab / schedule and other scheduling tools to execute it regularly!</em></strong></p></blockquote><p><strong>Effect picture:</strong></p><p><a href="/assets/cb0c68c33994/1*B0xW1CXU-avz2j8_ny3Ang.jpeg" class="popup img-link "><img data-src="/assets/cb0c68c33994/1*B0xW1CXU-avz2j8_ny3Ang.jpeg" alt="" class="lazyload" data-proofer-ignore></a></p><h3 id="free-alternatives"><span class="me-2">Free Alternatives</span><a href="#free-alternatives" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ol><li><a href="https://appfollow.io/" target="_blank">AppFollow</a>: Uses Public URL API (RSS), it’s usable at best.<li><a href="https://feedis.io/product/proxime/features" target="_blank">feedis.io</a>: Uses Private URL API, requires giving them your account and password.<li><a href="https://github.com/TradeMe/ReviewMe" target="_blank">TradeMe/ReviewMe</a>: Self-hosted service (node.js), we originally used this but encountered the aforementioned issues.<li><a href="https://github.com/saiday/JonSnow" target="_blank">JonSnow</a>: Self-hosted service (GO), supports one-click deployment to heroku, author: <a href="https://twitter.com/saiday" target="_blank">@saiday</a></ol><h3 id="warm-tips"><span class="me-2">Warm Tips</span><a href="#warm-tips" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ol><li>⚠️Private URL API method, if using an account with two-factor authentication, it needs to be re-verified every 30 days at most and currently has no solution; if you can create an account without two-factor authentication, you can use it smoothly.</ol><p><a href="/assets/cb0c68c33994/1*EE2J5HmdiIogMwC3Iiy0KA.png" class="popup img-link "><img data-src="/assets/cb0c68c33994/1*EE2J5HmdiIogMwC3Iiy0KA.png" alt="[#important-note-about-session-duration](https://docs.fastlane.tools/best-practices/continuous-integration/#important-note-about-session-duration){:target=&quot;_blank&quot;}" class="lazyload" data-proofer-ignore></a></p><p><a href="https://docs.fastlane.tools/best-practices/continuous-integration/#important-note-about-session-duration" target="_blank">#important-note-about-session-duration</a></p><ol><li><p>⚠️Whether free, paid, or self-hosted as mentioned in this article; do not use a developer account, be sure to create a separate App Store Connect account with only “Customer Support” permissions to prevent security issues.</p><li><p>It is recommended to use <a href="https://gist.github.com/sandyxu/8aceec7e436a6ab9621f" target="_blank">rbenv</a> to manage Ruby, as the system’s built-in version 2.6 can easily cause conflicts.</p><li><p>If you encounter GEM or Ruby environment errors on macOS Catalina, you can refer to <a href="https://github.com/orta/cocoapods-keys/issues/198#issuecomment-510909030" target="_blank">this reply</a> to solve them.</p></ol><h3 id="problem-solved"><span class="me-2">Problem Solved!</span><a href="#problem-solved" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>After the above journey, I have a better understanding of how the Slack Bot works and how the iOS App Store crawls review content. I also got to play around with ruby! It feels great to write!</p><p>If you have any questions or feedback, feel free to <a href="https://www.zhgchg.li/contact" target="_blank">contact me</a>.</p><p>===</p><p><a href="https://zhgchg.li/posts/cb0c68c33994/" target="_blank">本文中文版本</a></p><p>===</p><p>This article was first published in Traditional Chinese on Medium ➡️ <a href="https://medium.com/p/cb0c68c33994" target="_blank"><strong>View Here</strong></a></p><widgetic id="64ce71d5ecb2a165598b4567" resize="fill" width="560" height="60" autoscale="on" adaptive="414"></widgetic><script async src="https://widgetic.com/sdk/sdk.js"></script></div><hr/> <a href="https://www.buymeacoffee.com/zhgchgli" target="_blank" class="img-link shimmer" ><img data-src="https://img.buymeacoffee.com/button-api/?text=Buy me a beer!&emoji=🍺&slug=zhgchgli&button_colour=FFDD00&font_colour=000000&font_family=Bree&outline_colour=000000&coffee_colour=ffffff" class="lazyload" data-proofer-ignore></a> <br/> <a href="https://medium.com/@zhgchgli" target="_blank" class="img-link shimmer" ><img data-src="/assets/images/followmymedium.png" class="lazyload" data-proofer-ignore></a> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3184248473087645" crossorigin="anonymous"></script> <ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-3184248473087645" data-ad-slot="7555148040"></ins> <script> (adsbygoogle = window.adsbygoogle || []).push({}); </script><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw me-1"></i> <a href='/categories/zrealm/'>ZRealm</a>, <a href='/categories/dev/'>Dev.</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw me-1"></i> <a href="/tags/slackbot/" class="post-tag no-text-decoration" >slackbot</a> <a href="/tags/ios-app-development/" class="post-tag no-text-decoration" >ios-app-development</a> <a href="/tags/ruby/" class="post-tag no-text-decoration" >ruby</a> <a href="/tags/fastlane/" class="post-tag no-text-decoration" >fastlane</a> <a href="/tags/automator/" class="post-tag no-text-decoration" >automator</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted me-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=AppStore%20APP%E2%80%99s%20Reviews%20Bot%20Insights%20-%20ZhgChgLi&url=https%3A%2F%2Fen.zhgchg.li%2Fposts%2Fcb0c68c33994%2F" data-bs-toggle="tooltip" data-bs-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter" > <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=AppStore%20APP%E2%80%99s%20Reviews%20Bot%20Insights%20-%20ZhgChgLi&u=https%3A%2F%2Fen.zhgchg.li%2Fposts%2Fcb0c68c33994%2F" data-bs-toggle="tooltip" data-bs-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook" > <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fen.zhgchg.li%2Fposts%2Fcb0c68c33994%2F" data-bs-toggle="tooltip" data-bs-placement="top" title="Linkedin" target="_blank" rel="noopener" aria-label="Linkedin" > <i class="fa-fw fab fa-linkedin"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-bs-toggle="tooltip" data-bs-placement="top" title="Copy link" data-title-succeed="Link copied successfully!" > </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 ps-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content list-unstyled ps-0 pb-1 ms-1 mt-2"><li class="text-truncate lh-lg"> <a href="/posts/d9a95d4224ea/">Medium Custom Domain Feature Returns</a><li class="text-truncate lh-lg"> <a href="/posts/483af5d93297/">Custom Domain Tutorial for Github Pages</a><li class="text-truncate lh-lg"> <a href="/posts/9e43897d99fc/">Behavior Change in Merging NSAttributedString Attributes Range in iOS ≥ 18</a><li class="text-truncate lh-lg"> <a href="/posts/b08ef940c196/">iOS Deferred Deep Link Implementation (Swift)</a><li class="text-truncate lh-lg"> <a href="/posts/12c5026da33d/">What's New with Universal Links</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/ios-app-development/">ios-app-development</a> <a class="post-tag btn btn-outline-primary" href="/tags/ios/">ios</a> <a class="post-tag btn btn-outline-primary" href="/tags/swift/">swift</a> <a class="post-tag btn btn-outline-primary" href="/tags/life/">life</a> <a class="post-tag btn btn-outline-primary" href="/tags/medium/">medium</a> <a class="post-tag btn btn-outline-primary" href="/tags/unboxing/">unboxing</a> <a class="post-tag btn btn-outline-primary" href="/tags/life/">Life</a> <a class="post-tag btn btn-outline-primary" href="/tags/japan/">japan</a> <a class="post-tag btn btn-outline-primary" href="/tags/automation/">automation</a> <a class="post-tag btn btn-outline-primary" href="/tags/nsattributedstring/">nsattributedstring</a></div></div></div><div id="toc-wrapper" class="ps-0 pe-4 mb-5"><div class="panel-heading ps-3 pt-2 mb-2">Contents</div><nav id="toc"></nav></div></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 px-3 pe-xl-4 mt-5"><div id="related-posts" class="mb-2 mb-sm-4"><h3 class="pt-2 mb-4 ms-1" data-toc-skip> Further Reading</h3><div class="row row-cols-1 row-cols-md-2 row-cols-xl-3 g-4 mb-4"><div class="col"> <a href="/posts/33f6aabb744f/" class="card post-preview h-100"><div class="card-body"> <em class="small" data-ts="1620222679" data-df="ll" > May 5, 2021 </em><h4 class="pt-0 my-2" data-toc-skip>ZReviewsBot — Slack App Review Notification Bot</h4><div class="text-muted small"><p> ZReviewsBot — Slack App Review Notification Bot Free and open-source iOS &amp;amp; Android APP latest review tracking Slack Bot TL;DR [2022/08/10] Update: Now redesigned using the new App Store Conn...</p></div></div></a></div><div class="col"> <a href="/posts/e37d66ea1146/" class="card post-preview h-100"><div class="card-body"> <em class="small" data-ts="1539454069" data-df="ll" > Oct 14, 2018 </em><h4 class="pt-0 my-2" data-toc-skip>iOS UITextView Text Wrapping Editor (Swift)</h4><div class="text-muted small"><p> iOS UITextView Text Wrapping Editor (Swift) Practical Route Target Functionality: The app has a discussion area where users can post articles. The interface for posting articles needs to support...</p></div></div></a></div><div class="col"> <a href="/posts/cb6eba52a342/" class="card post-preview h-100"><div class="card-body"> <em class="small" data-ts="1539618241" data-df="ll" > Oct 15, 2018 </em><h4 class="pt-0 my-2" data-toc-skip>iOS ≥ 10 Notification Service Extension Application (Swift)</h4><div class="text-muted small"><p> iOS ≥ 10 Notification Service Extension Application (Swift) Image push notifications, push notification display statistics, pre-processing before push notification display Regarding the basics of...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/9659db1357e4/" class="btn btn-outline-primary" prompt="Older" ><p>Quickly Build a Testable API Service Using Firebase Firestore + Functions</p></a> <a href="/posts/33f6aabb744f/" class="btn btn-outline-primary" prompt="Newer" ><p>ZReviewsBot — Slack App Review Notification Bot</p></a></div><script type="text/javascript"> (function () { const origin = 'https://giscus.app'; const iframe = 'iframe.giscus-frame'; const lightTheme = 'light'; const darkTheme = 'dark_dimmed'; let initTheme = lightTheme; const html = document.documentElement; if ( (html.hasAttribute('data-mode') && html.getAttribute('data-mode') === 'dark') || (!html.hasAttribute('data-mode') && window.matchMedia('(prefers-color-scheme: dark)').matches) ) { initTheme = darkTheme; } let giscusAttributes = { src: 'https://giscus.app/client.js', 'data-repo': 'ZhgChgLi/zhgchgli.github.io', 'data-repo-id': 'R_kgDOHdowLw', 'data-category': 'Q&A', 'data-category-id': 'DIC_kwDOHdowL84CU-q6', 'data-mapping': 'url', 'data-reactions-enabled': '1', 'data-emit-metadata': '0', 'data-theme': initTheme, 'data-input-position': 'bottom', 'data-lang': 'en', crossorigin: 'anonymous', async: '' }; let giscusScript = document.createElement('script'); Object.entries(giscusAttributes).forEach(([key, value]) => giscusScript.setAttribute(key, value) ); document.getElementById('tail-wrapper').appendChild(giscusScript); addEventListener('message', (event) => { if ( event.source === window && event.data && event.data.direction === ModeToggle.ID ) { /* global theme mode changed */ const mode = event.data.message; const theme = mode === ModeToggle.DARK_MODE ? darkTheme : lightTheme; const message = { setConfig: { theme: theme } }; const giscus = document.querySelector(iframe).contentWindow; giscus.postMessage({ giscus: message }, origin); } }); })(); </script></div></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/ios-app-development/">ios-app-development</a> <a class="post-tag btn btn-outline-primary" href="/tags/ios/">ios</a> <a class="post-tag btn btn-outline-primary" href="/tags/swift/">swift</a> <a class="post-tag btn btn-outline-primary" href="/tags/life/">life</a> <a class="post-tag btn btn-outline-primary" href="/tags/medium/">medium</a> <a class="post-tag btn btn-outline-primary" href="/tags/unboxing/">unboxing</a> <a class="post-tag btn btn-outline-primary" href="/tags/life/">Life</a> <a class="post-tag btn btn-outline-primary" href="/tags/japan/">japan</a> <a class="post-tag btn btn-outline-primary" href="/tags/automation/">automation</a> <a class="post-tag btn btn-outline-primary" href="/tags/nsattributedstring/">nsattributedstring</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div></div><footer><div class="container px-lg-4"><div class="d-flex justify-content-center align-items-center text-muted mx-md-3"><p>Using the <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> theme <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> <br/> <a href="https://zhgchg.li" target="_blank">中文版網站</a><br/> Powered by <a href="https://github.com/ZhgChgLi/ZMediumToMarkdown" target="_blank">ZMediumToMarkdown</a>.</p><p>© 2024 <a href="https://medium.com/@zhgchgli">ZhgChgLi</a>. <span data-bs-toggle="tooltip" data-bs-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author." >All rights reserved.</span></p></div></div></footer><div id="mask"></div><button id="back-to-top" aria-label="back-to-top" class="btn btn-lg btn-box-shadow"> <i class="fas fa-angle-up"></i> </button><div id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-bs-animation="true" data-bs-autohide="false" ><div class="toast-header"> <button type="button" class="btn-close ms-auto" data-bs-dismiss="toast" aria-label="Close" ></button></div><div class="toast-body text-center pt-0"><p class="px-2 mb-3">A new version of content is available.</p><button type="button" class="btn btn-primary" aria-label="Update"> Update </button></div></div><script src="https://cdn.jsdelivr.net/combine/npm/jquery@3.7.0/dist/jquery.min.js,npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js,npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js,npm/lazysizes@5.3.2/lazysizes.min.js,npm/magnific-popup@1.1.0/dist/jquery.magnific-popup.min.js,npm/clipboard@2.0.11/dist/clipboard.min.js,npm/dayjs@1.11.7/dayjs.min.js,npm/dayjs@1.11.7/locale/en.min.js,npm/dayjs@1.11.7/plugin/relativeTime.min.js,npm/dayjs@1.11.7/plugin/localizedFormat.min.js,npm/tocbot@4.21.0/dist/tocbot.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-JSGN97L56L"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-JSGN97L56L'); }); </script> <script> /* Note: dependent library will be loaded in `js-selector.html` */ SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="px-1 px-sm-2 px-lg-4 px-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5"></p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="me-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script>
