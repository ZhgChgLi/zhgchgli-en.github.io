<!doctype html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="viewport" content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover" ><meta name="generator" content="Jekyll v4.3.2" /><meta property="og:title" content="Let’s Build an Apple Watch App!" /><meta name="author" content="ZhgChgLi" /><meta property="og:locale" content="en" /><meta name="description" content="Step-by-step development of an Apple Watch App from scratch with watchOS 5" /><meta property="og:description" content="Step-by-step development of an Apple Watch App from scratch with watchOS 5" /><link rel="canonical" href="https://en.zhgchg.li/posts/e85d77b05061/" /><meta property="og:url" content="https://en.zhgchg.li/posts/e85d77b05061/" /><meta property="og:site_name" content="ZhgChgLi" /><meta property="og:image" content="https://en.zhgchg.li/assets/e85d77b05061/1*aNqsa7aR3Vi3NIIvaUFZLA.png" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2019-02-06T00:23:30+08:00" /><meta name="twitter:card" content="summary_large_image" /><meta property="twitter:image" content="https://en.zhgchg.li/assets/e85d77b05061/1*aNqsa7aR3Vi3NIIvaUFZLA.png" /><meta property="twitter:title" content="Let’s Build an Apple Watch App!" /><meta name="twitter:site" content="@zhgchgli" /><meta name="twitter:creator" content="@ZhgChgLi" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"ZhgChgLi"},"dateModified":"2024-04-13T15:37:01+08:00","datePublished":"2019-02-06T00:23:30+08:00","description":"Step-by-step development of an Apple Watch App from scratch with watchOS 5","headline":"Let’s Build an Apple Watch App!","image":"https://en.zhgchg.li/assets/e85d77b05061/1*aNqsa7aR3Vi3NIIvaUFZLA.png","mainEntityOfPage":{"@type":"WebPage","@id":"https://en.zhgchg.li/posts/e85d77b05061/"},"url":"https://en.zhgchg.li/posts/e85d77b05061/"}</script><title>Let's Build an Apple Watch App! | ZhgChgLi</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="ZhgChgLi"><meta name="application-name" content="ZhgChgLi"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.21.0/dist/tocbot.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return 'mode'; } static get MODE_ATTR() { return 'data-mode'; } static get DARK_MODE() { return 'dark'; } static get LIGHT_MODE() { return 'light'; } static get ID() { return 'mode-toggle'; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener('change', () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia('(prefers-color-scheme: dark)'); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { document.documentElement.setAttribute(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { document.documentElement.setAttribute(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { document.documentElement.removeAttribute(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage( { direction: ModeToggle.ID, message: this.modeStatus }, '*' ); } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.notify(); } /* flipMode() */ } /* ModeToggle */ const modeToggle = new ModeToggle(); </script><body><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper"> <a href="/" id="avatar" class="rounded-circle"> <img src="/assets/images/zhgchgli.jpg" width="112" height="112" alt="avatar" onerror="this.style.display='none'"> </a><div class="site-title"> <a href="/">ZhgChgLi</a></div><div class="site-subtitle fst-italic">Live a life you will remember.</div></div><ul class="nav flex-column flex-grow-1 w-100 ps-0"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle"></i> <span>ABOUT</span> </a><li class="nav-item"> <a href="/real/" class="nav-link"> <i class="fa-fw fa fa-camera-retro"></i> <span>REAL LIFE</span> </a><li class="nav-item"> <a href="/contact/" class="nav-link"> <i class="fa-fw fa fa-envelope-open"></i> <span>CONTACT</span> </a></ul><div class="sidebar-bottom d-flex flex-wrap align-items-center w-100"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://link.zhgchg.li" aria-label="link" target="_blank" rel="noopener noreferrer" > <i class="fas fa-link"></i> </a> <a href="https://www.linkedin.com/in/zhgchgli" aria-label="linkedin" target="_blank" rel="noopener noreferrer" > <i class="fab fa-linkedin"></i> </a> <a href="javascript:location.href = 'mailto:' + ['zhgchgli','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container px-xxl-5"><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100" > <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Let's Build an Apple Watch App!</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..." > </span> <span id="search-cancel">Cancel</span></div></div><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pe-xl-4"><div class="post px-1 px-md-2"><h1 data-toc-skip>Let's Build an Apple Watch App!</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1549383810" data-df="ll" data-bs-toggle="tooltip" data-bs-placement="bottom" > Feb 6, 2019 </em> </span> <span> Updated <em class="" data-ts="1712993821" data-df="ll" data-bs-toggle="tooltip" data-bs-placement="bottom" > Apr 13, 2024 </em> </span><div class="mt-3 mb-3"> <a href="/assets/e85d77b05061/1*aNqsa7aR3Vi3NIIvaUFZLA.png" class="popup img-link preview-img shimmer"><img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1200 630'%3E%3C/svg%3E" data-src="/assets/e85d77b05061/1*aNqsa7aR3Vi3NIIvaUFZLA.png" alt="Preview Image" width="1200" height="630" class="lazyload" data-proofer-ignore></a></div><div class="d-flex justify-content-between"> <span> By <em> <a href=""></a> </em> </span><div> <span class="readtime" data-bs-toggle="tooltip" data-bs-placement="bottom" title="3858 words" > <em>21 min</em> read</span></div></div></div><div class="post-content"> <widgetic id="64ce7263ecb2a197598b4567" resize="fill" width="560" height="60" autoscale="on" adaptive="414"></widgetic><script async src="https://widgetic.com/sdk/sdk.js"></script><h3 id="lets-build-an-apple-watch-app-swift"><span class="me-2">Let’s Build an Apple Watch App! (Swift)</span><a href="#lets-build-an-apple-watch-app-swift" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Step-by-step development of an Apple Watch App from scratch with watchOS 5</p><h4 id="latest-apple-watch-series-6-unboxing--two-year-experience-click-here"><span class="me-2"><a href="../eab0e984043/">[Latest] Apple Watch Series 6 Unboxing &amp; Two-Year Experience &gt;&gt;&gt;Click Here</a></span><a href="#latest-apple-watch-series-6-unboxing--two-year-experience-click-here" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><h3 id="introduction"><span class="me-2">Introduction:</span><a href="#introduction" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>It’s been almost three months since my last <a href="../a2920e33e73e/">Apple Watch Unboxing</a>, and I finally found the opportunity to explore developing an Apple Watch App.</p><p><a href="/assets/e85d77b05061/1*aNqsa7aR3Vi3NIIvaUFZLA.png" class="popup img-link "><img data-src="/assets/e85d77b05061/1*aNqsa7aR3Vi3NIIvaUFZLA.png" alt="[Wedding App — The Largest Wedding Planning App](https://itunes.apple.com/tw/app/%E7%B5%90%E5%A9%9A%E5%90%A7-%E4%B8%8D%E6%89%BE%E6%9C%80%E8%B2%B4-%E5%8F%AA%E6%89%BE%E6%9C%80%E5%B0%8D/id1356057329#?platform=appleWatch){:target=&quot;_blank&quot;}" class="lazyload" data-proofer-ignore></a></p><p><a href="https://itunes.apple.com/tw/app/%E7%B5%90%E5%A9%9A%E5%90%A7-%E4%B8%8D%E6%89%BE%E6%9C%80%E8%B2%B4-%E5%8F%AA%E6%89%BE%E6%9C%80%E5%B0%8D/id1356057329#?platform=appleWatch" target="_blank">Wedding App — The Largest Wedding Planning App</a></p><p>Here are my thoughts after using it for three months:</p><ol><li>e-sim (LTE) still hasn’t found a use case, so I haven’t applied for or used it yet.<li>Frequently used features: unlocking Mac computers, checking notifications by raising the wrist, Apple Pay.<li>Health reminders: After three months, I’ve started to slack off. I just glance at the notifications and don’t feel compelled to complete the rings.<li>Third-party app support is still very poor.<li>Watch faces can be changed according to mood, adding a sense of freshness.<li>More detailed exercise records: For example, if I walk a bit further to buy dinner, the watch will automatically detect and ask if I want to record the exercise.</ol><p>Overall, after three months of use, it still feels like a little life assistant, helping you with trivial matters, just as I wrote in the original unboxing article.</p><h3 id="third-party-app-support-is-still-very-poor"><span class="me-2">Third-party app support is still very poor</span><a href="#third-party-app-support-is-still-very-poor" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Before I actually developed an Apple Watch App, I was puzzled as to why the apps on Apple Watch were so basic, even just “usable,” including LINE (messages not synced and never updated), Messenger (just usable); until I actually developed an Apple Watch App and understood the developers’ difficulties…</p><h3 id="first-understand-the-positioning-of-apple-watch-apps-simplify-complexity"><span class="me-2">First, understand the positioning of Apple Watch Apps, simplify complexity</span><a href="#first-understand-the-positioning-of-apple-watch-apps-simplify-complexity" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>The positioning of the Apple Watch is <strong>“not to replace the iPhone, but to assist”</strong>. This is the direction of official introductions, official apps, and watchOS APIs; hence, third-party apps feel basic and have limited functionality (sorry, I was too greedy Orz).</p><p>Take <a href="https://itunes.apple.com/tw/app/%E7%B5%90%E5%A9%9A%E5%90%A7-%E6%9C%80%E5%A4%A7%E5%A9%9A%E7%A6%AE%E7%B1%8C%E5%82%99app/id1356057329?mt=8" target="_blank">our app</a> as an example, it has features like searching for vendors, viewing columns, discussion forums, online inquiries, etc.; online inquiries are valuable to bring to the Apple Watch because they require real-time and faster responses, which increases the chance of getting orders. Searching for vendors, viewing columns, and discussion forums are relatively complex features, and even if they can be done on the watch, it doesn’t make much sense (the screen can display too little information, and they don’t require real-time responses).</p><p>The core concept is still “assistive,” so not every feature needs to be brought to the Apple Watch; after all, users rarely have only the watch without the phone, and in such cases, the user’s needs are only for important features (like viewing column articles, which is not important enough to need to be viewed immediately on the watch).</p><h3 id="lets-get-started"><span class="me-2">Let’s get started!</span><a href="#lets-get-started" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><blockquote><p><strong><em>This is also my first time developing an Apple Watch App, the content of the article may not be in-depth enough, please give me your advice!!</em></strong></p></blockquote><blockquote><p><strong><em>This article is only suitable for readers who have developed iOS Apps/UIKit basics</em></strong></p></blockquote><blockquote><p><strong><em>This article uses: iOS ≥ 9, watchOS ≥ 5</em></strong></p></blockquote><h4 id="create-a-new-watchos-target-for-the-ios-project"><span class="me-2">Create a new watchOS Target for the iOS project:</span><a href="#create-a-new-watchos-target-for-the-ios-project" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><a href="/assets/e85d77b05061/1*yxwki7mCbfJbEfsTDM683A.png" class="popup img-link "><img data-src="/assets/e85d77b05061/1*yxwki7mCbfJbEfsTDM683A.png" alt="File -&gt; New -&gt; Target -&gt; watchOS -&gt; WatchKit App" class="lazyload" data-proofer-ignore></a></p><p>File -&gt; New -&gt; Target -&gt; watchOS -&gt; WatchKit App</p><p><em>*Apple Watch Apps cannot be installed independently, they must be attached to an iOS App</em></p><p>After creating it, the directory will look like this:</p><p><a href="/assets/e85d77b05061/1*WIjSrYl5Hch0mGIjlNbyFQ.png" class="popup img-link "><img data-src="/assets/e85d77b05061/1*WIjSrYl5Hch0mGIjlNbyFQ.png" alt="" class="lazyload" data-proofer-ignore></a></p><p>You will find two Target items, both indispensable:</p><ol><li>WatchKit App: Responsible for storing resources and UI display /Interface.storyboard: Same as iOS, it contains the system default created view controller /Assets.xcassets: Same as iOS, stores the resources used /info.plist: Same as iOS, WatchKit App related settings<li>WatchKit Extension: Responsible for program calls and logic processing (*.swift) /InterfaceController.swift: Default view controller program /ExtensionDelegate.swift: Similar to Swift’s AppDelegate, the entry point for Apple Watch App startup /NotificationController.swift: Used to handle push notifications on the Apple Watch App /Assets.xcassets: Not used here, I put everything in WatchKit App’s Assets.xcassets /info.plist: Same as iOS, WatchKit Extension related settings /PushNotificationPayload.apns: Push notification data, can be used to test push notification functionality on the simulator</ol><p>Details will be introduced later, for now, just get a general understanding of the directory and file content functions.</p><h4 id="view-controller"><span class="me-2">View Controller:</span><a href="#view-controller" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><strong>In Apple Watch, the view controller is not called ViewController but InterfaceController</strong>. You can find the Interface Controller Scene in WatchKit App/Interface.storyboard, and the program that controls it is in WatchKit Extension/InterfaceController.swift (same concept as iOS)</p><p><a href="/assets/e85d77b05061/1*2ibd9b4yaRGxwSpgKMdyUw.png" class="popup img-link "><img data-src="/assets/e85d77b05061/1*2ibd9b4yaRGxwSpgKMdyUw.png" alt="The Scene is initially squeezed together with the Notification Controller Scene (I will pull it up a bit to separate them)" class="lazyload" data-proofer-ignore></a></p><p>The Scene is initially squeezed together with the Notification Controller Scene (I will pull it up a bit to separate them)</p><p>You can set the title display text of the InterfaceController on the right.</p><p>The title color part is set by Interface Builder Document/Global hint, the style color of the entire App will be unified.</p><p><a href="/assets/e85d77b05061/1*ZcS9q4gNSBo6MZLp1eITeA.jpeg" class="popup img-link "><img data-src="/assets/e85d77b05061/1*ZcS9q4gNSBo6MZLp1eITeA.jpeg" alt="" class="lazyload" data-proofer-ignore></a></p><h4 id="component-library"><span class="me-2">Component Library:</span><a href="#component-library" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><a href="/assets/e85d77b05061/1*Armv40CxLqJ1wlbMI_o1oQ.png" class="popup img-link "><img data-src="/assets/e85d77b05061/1*Armv40CxLqJ1wlbMI_o1oQ.png" alt="There are not many complex components, and the functions of the components are simple and clear" class="lazyload" data-proofer-ignore></a></p><p>There are not many complex components, and the functions of the components are simple and clear.</p><h4 id="ui-layout"><span class="me-2">UI Layout:</span><a href="#ui-layout" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>A tall building starts from the View. The layout part does not have Auto Layout, constraints, or layers like in UIKit (iOS). All layout settings are done using parameters, which is simpler and more powerful (the layout is somewhat like UIStackView in UIKit).</p><blockquote><p><strong>All layouts are composed of Groups, similar to UIStackView in UIKit but with more layout parameters</strong></p></blockquote><p><a href="/assets/e85d77b05061/1*aoHxAFjEGgH3ZLQx9GhH_Q.png" class="popup img-link "><img data-src="/assets/e85d77b05061/1*aoHxAFjEGgH3ZLQx9GhH_Q.png" alt="Group parameter settings" class="lazyload" data-proofer-ignore></a></p><p>Group parameter settings:</p><ol><li>Layout: Set the layout method of the subviews contained within (horizontal, vertical, layered stacking)<li>Insets: Set the margins of the Group (top, bottom, left, right)<li>Spacing: Set the spacing between the subviews contained within<li>Radius: Set the corner radius of the Group, that’s right! WatchKit comes with corner radius setting parameters<li>Alignment/Horizontal: Set the horizontal alignment method (left, center, right) which will interact with the neighboring and outer wrapping views<li>Alignment/Vertical: Set the vertical alignment method (top, center, bottom) which will interact with the neighboring and outer wrapping views<li>Size/Width: Set the size of the Group, with three modes to choose from “Fixed: specify width”, “Size To Fit Content: determine width based on the size of the content subviews”, “Relative to Container: refer to the size of the outer wrapping view as the width (can set %/+- correction value)”<li>Size/Height: Same as Size/Width, this item sets the height</ol><h4 id="fontfont-size-settings"><span class="me-2">Font/Font Size Settings:</span><a href="#fontfont-size-settings" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><a href="/assets/e85d77b05061/1*8NfJeD4FsUw-SpAx_VFDCQ.png" class="popup img-link "><img data-src="/assets/e85d77b05061/1*8NfJeD4FsUw-SpAx_VFDCQ.png" alt="" class="lazyload" data-proofer-ignore></a></p><p>You can directly apply the system’s Text Styles or use Custom (but I found that using Custom couldn’t set the font size); so <strong>I used System</strong> to customize the font size for each display Label.</p><h4 id="learning-by-doing-layout-example-with-line"><span class="me-2"><strong>Learning by Doing: Layout Example with Line</strong></span><a href="#learning-by-doing-layout-example-with-line" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><a href="/assets/e85d77b05061/1*oY9kLcnASy9j1WXxV4FGPA.png" class="popup img-link "><img data-src="/assets/e85d77b05061/1*oY9kLcnASy9j1WXxV4FGPA.png" alt="" class="lazyload" data-proofer-ignore></a></p><p>The layout is not as complicated as iOS, so I’ll demonstrate it directly through an example for you to get started quickly; using Line’s homepage layout as an example:</p><p><em>In WatchKit App/Interface.storyboard, find the Interface Controller Scene:</em></p><ol><li>The entire page is equivalent to UITableView used in iOS App development. In Apple Watch App, the operation is simplified, and the name is changed to “WKInterfaceTable”. First, drag a Table to the Interface Controller Scene.</ol><p><a href="/assets/e85d77b05061/1*bui2UXp9QwBYSYC-mwyK6g.png" class="popup img-link "><img data-src="/assets/e85d77b05061/1*bui2UXp9QwBYSYC-mwyK6g.png" alt="" class="lazyload" data-proofer-ignore></a></p><p>Like UIKit UITableView, there is the Table itself and the Cell (called Row in Apple Watch); it is much simpler to use, <strong>you can directly design the layout of the Cell in this interface!</strong></p><ol><li>Analyze the layout structure and design the Row display style:</ol><p><a href="/assets/e85d77b05061/1*2bsyQ9Szfptugtg_KKxcgg.png" class="popup img-link "><img data-src="/assets/e85d77b05061/1*2bsyQ9Szfptugtg_KKxcgg.png" alt="" class="lazyload" data-proofer-ignore></a></p><p>To create a layout with a rounded full-width Image on the left and a stacked Label, and two evenly divided blocks on the right, with a Label on the top and another Label on the bottom.</p><p>2-1: Create the structure of the left and right blocks</p><p><a href="/assets/e85d77b05061/1*ez1NpEq3fgAMEqNjwTvWdw.png" class="popup img-link "><img data-src="/assets/e85d77b05061/1*ez1NpEq3fgAMEqNjwTvWdw.png" alt="" class="lazyload" data-proofer-ignore></a></p><p>Drag two Groups into the Group and set the Size parameters respectively:</p><p>Left green part:</p><p><a href="/assets/e85d77b05061/1*axrBV1EHrPtOHvTnLtB79w.png" class="popup img-link "><img data-src="/assets/e85d77b05061/1*axrBV1EHrPtOHvTnLtB79w.png" alt="Layout setting Overlap, the sub-View inside needs to stack the unread message Label" class="lazyload" data-proofer-ignore></a></p><p>Layout setting Overlap, the sub-View inside needs to stack the unread message Label</p><p><a href="/assets/e85d77b05061/1*Ti346bLg8AM2FInO6PNwLw.png" class="popup img-link "><img data-src="/assets/e85d77b05061/1*Ti346bLg8AM2FInO6PNwLw.png" alt="Set a fixed square with a width and height of 40" class="lazyload" data-proofer-ignore></a></p><p>Set a fixed square with a width and height of 40</p><p>Right red part:</p><p><a href="/assets/e85d77b05061/1*5aq_TTFEp3kq6RusiTkYcw.png" class="popup img-link "><img data-src="/assets/e85d77b05061/1*5aq_TTFEp3kq6RusiTkYcw.png" alt="Layout setting Vertical, the sub-View inside needs to display two items vertically" class="lazyload" data-proofer-ignore></a></p><p>Layout setting Vertical, the sub-View inside needs to display two items vertically</p><p><a href="/assets/e85d77b05061/1*aXH2d1kDRLNl4XsizV9P_g.png" class="popup img-link "><img data-src="/assets/e85d77b05061/1*aXH2d1kDRLNl4XsizV9P_g.png" alt="Width setting refers to the outer layer, 100% ratio, minus the 40 of the left green part" class="lazyload" data-proofer-ignore></a></p><p>Width setting refers to the outer layer, 100% ratio, minus the 40 of the left green part</p><p>Layout inside the left and right containers:</p><p><a href="/assets/e85d77b05061/1*NR2vAZ3mqPMjCLqBCJ6ZxQ.png" class="popup img-link "><img data-src="/assets/e85d77b05061/1*NR2vAZ3mqPMjCLqBCJ6ZxQ.png" alt="" class="lazyload" data-proofer-ignore></a></p><p>Left part: Drag in an Image, then drag in a Group containing a Label and align it to the bottom right (set the Group background color, spacing, and rounded corners)</p><p>Right part: Drag in two Labels, one aligned to the top left and the other aligned to the bottom left.</p><h4 id="naming-the-row-same-as-setting-the-identifier-for-cell-in-uikit-uitableview"><span class="me-2">Naming the Row (same as setting the identifier for Cell in UIKit UITableView):</span><a href="#naming-the-row-same-as-setting-the-identifier-for-cell-in-uikit-uitableview" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><a href="/assets/e85d77b05061/1*VTCVIJRAG-sGdBLjC26TKg.png" class="popup img-link "><img data-src="/assets/e85d77b05061/1*VTCVIJRAG-sGdBLjC26TKg.png" alt="Select Row -&gt; Identifier -&gt; Enter custom name" class="lazyload" data-proofer-ignore></a></p><p>Select Row -&gt; Identifier -&gt; Enter custom name</p><h4 id="are-there-multiple-display-styles-for-rows"><span class="me-2">Are there multiple display styles for Rows?</span><a href="#are-there-multiple-display-styles-for-rows" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Very simple, just drag another Row into the Table (which Row style to display is controlled by the program) and enter the Identifier name.</p><p><a href="/assets/e85d77b05061/1*kQOKjxqmtI7M8BwYQ0yY0A.png" class="popup img-link "><img data-src="/assets/e85d77b05061/1*kQOKjxqmtI7M8BwYQ0yY0A.png" alt="Here I drag another Row for displaying a no data prompt" class="lazyload" data-proofer-ignore></a></p><p>Here I drag another Row for displaying a no data prompt.</p><h4 id="layout-related-information"><span class="me-2">Layout Related Information</span><a href="#layout-related-information" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>WatchKit’s hidden does not occupy space, it can be used for interactive applications (display Table when logged in; display prompt Label when not logged in).</p><p><a href="/assets/e85d77b05061/1*RiCY7mH4_MyocNPN1GDuvA.png" class="popup img-link "><img data-src="/assets/e85d77b05061/1*RiCY7mH4_MyocNPN1GDuvA.png" alt="" class="lazyload" data-proofer-ignore></a></p><p>The layout is now complete, you can modify it according to your design; it’s easy to get started, practice a few more times, and play with the alignment parameters to get familiar!</p><h4 id="program-control-section"><span class="me-2">Program Control Section:</span><a href="#program-control-section" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Continuing with Row, we need to create a Class to reference the Row:</p><div class="language-swift highlighter-rouge"><div class="code-header"> <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="kd">class</span> <span class="kt">ContactRow</span><span class="p">:</span><span class="kt">NSObject</span> <span class="p">{</span>
<span class="p">}</span>
</pre></table></code></div></div><p><a href="/assets/e85d77b05061/1*-AnyG0_PLubAX7f-579BMw.png" class="popup img-link "><img data-src="/assets/e85d77b05061/1*-AnyG0_PLubAX7f-579BMw.png" alt="" class="lazyload" data-proofer-ignore></a></p><div class="language-swift highlighter-rouge"><div class="code-header"> <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="kd">class</span> <span class="kt">ContactRow</span><span class="p">:</span><span class="kt">NSObject</span> <span class="p">{</span>
    <span class="k">var</span> <span class="nv">id</span><span class="p">:</span><span class="kt">String</span><span class="p">?</span>
    <span class="kd">@IBOutlet</span> <span class="k">var</span> <span class="nv">unReadGroup</span><span class="p">:</span> <span class="kt">WKInterfaceGroup</span><span class="o">!</span>
    <span class="kd">@IBOutlet</span> <span class="k">var</span> <span class="nv">unReadLabel</span><span class="p">:</span> <span class="kt">WKInterfaceLabel</span><span class="o">!</span>
    <span class="kd">@IBOutlet</span> <span class="k">weak</span> <span class="k">var</span> <span class="nv">imageView</span><span class="p">:</span> <span class="kt">WKInterfaceImage</span><span class="o">!</span>
    <span class="kd">@IBOutlet</span> <span class="k">weak</span> <span class="k">var</span> <span class="nv">nameLabel</span><span class="p">:</span> <span class="kt">WKInterfaceLabel</span><span class="o">!</span>
    <span class="kd">@IBOutlet</span> <span class="k">weak</span> <span class="k">var</span> <span class="nv">timeLabel</span><span class="p">:</span> <span class="kt">WKInterfaceLabel</span><span class="o">!</span>
<span class="p">}</span>
</pre></table></code></div></div><p>Pull outlets, store variables</p><p>For the Table part, also pull the Outlet to the Controller:</p><div class="language-swift highlighter-rouge"><div class="code-header"> <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
</pre><td class="rouge-code"><pre><span class="kd">class</span> <span class="kt">InterfaceController</span><span class="p">:</span> <span class="kt">WKInterfaceController</span> <span class="p">{</span>

    <span class="kd">@IBOutlet</span> <span class="k">weak</span> <span class="k">var</span> <span class="nv">Table</span><span class="p">:</span> <span class="kt">WKInterfaceTable</span><span class="o">!</span>
    <span class="k">override</span> <span class="kd">func</span> <span class="nf">awake</span><span class="p">(</span><span class="n">withContext</span> <span class="nv">context</span><span class="p">:</span> <span class="kt">Any</span><span class="p">?)</span> <span class="p">{</span>
        <span class="k">super</span><span class="o">.</span><span class="nf">awake</span><span class="p">(</span><span class="nv">withContext</span><span class="p">:</span> <span class="n">context</span><span class="p">)</span>
        
        <span class="c1">// Configure interface objects here.</span>
    <span class="p">}</span>
    
    <span class="k">override</span> <span class="kd">func</span> <span class="nf">willActivate</span><span class="p">()</span> <span class="p">{</span>
        <span class="c1">// This method is called when watch view controller is about to be visible to user</span>
        <span class="k">super</span><span class="o">.</span><span class="nf">willActivate</span><span class="p">()</span>
    <span class="p">}</span>
    
    <span class="kd">struct</span> <span class="kt">ContactStruct</span> <span class="p">{</span>
        <span class="k">var</span> <span class="nv">name</span><span class="p">:</span><span class="kt">String</span>
        <span class="k">var</span> <span class="nv">image</span><span class="p">:</span><span class="kt">String</span>
        <span class="k">var</span> <span class="nv">time</span><span class="p">:</span><span class="kt">String</span>
    <span class="p">}</span>
    
    <span class="kd">func</span> <span class="nf">loadData</span><span class="p">()</span> <span class="p">{</span>
        <span class="c1">//Get API Call Back...</span>
        <span class="c1">//postData {</span>
        <span class="k">let</span> <span class="nv">data</span><span class="p">:[</span><span class="kt">ContactStruct</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span> <span class="c1">//api returned data...</span>
        
        <span class="k">self</span><span class="o">.</span><span class="kt">Table</span><span class="o">.</span><span class="nf">setNumberOfRows</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">count</span><span class="p">,</span> <span class="nv">withRowType</span><span class="p">:</span> <span class="s">"ContactRow"</span><span class="p">)</span>
        <span class="c1">//If you have multiple ROWs to present, use:</span>
            <span class="c1">//self.Table.setRowTypes(["ContactRow","ContactRow2","ContactRow3"])</span>
        <span class="c1">//</span>
        <span class="k">for</span> <span class="n">item</span> <span class="k">in</span> <span class="n">data</span><span class="o">.</span><span class="nf">enumerated</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">if</span> <span class="k">let</span> <span class="nv">row</span> <span class="o">=</span> <span class="k">self</span><span class="o">.</span><span class="kt">Table</span><span class="o">.</span><span class="nf">rowController</span><span class="p">(</span><span class="nv">at</span><span class="p">:</span> <span class="n">item</span><span class="o">.</span><span class="n">offset</span><span class="p">)</span> <span class="k">as?</span> <span class="kt">ContactRow</span> <span class="p">{</span>
                <span class="n">row</span><span class="o">.</span><span class="n">nameLabel</span><span class="o">.</span><span class="nf">setText</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">element</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
                <span class="c1">//assign value to label/image......</span>
            <span class="p">}</span>
        <span class="p">}</span>
        
        <span class="c1">//}</span>
    <span class="p">}</span>
    
    <span class="k">override</span> <span class="kd">func</span> <span class="nf">didDeactivate</span><span class="p">()</span> <span class="p">{</span>
        <span class="c1">// This method is called when watch view controller is no longer visible</span>
        <span class="k">super</span><span class="o">.</span><span class="nf">didDeactivate</span><span class="p">()</span>
        <span class="nf">loadData</span><span class="p">()</span>
    <span class="p">}</span>
    
    <span class="c1">//Handle Row selection:</span>
    <span class="k">override</span> <span class="kd">func</span> <span class="nf">table</span><span class="p">(</span><span class="n">_</span> <span class="nv">table</span><span class="p">:</span> <span class="kt">WKInterfaceTable</span><span class="p">,</span> <span class="n">didSelectRowAt</span> <span class="nv">rowIndex</span><span class="p">:</span> <span class="kt">Int</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">guard</span> <span class="k">let</span> <span class="nv">row</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="nf">rowController</span><span class="p">(</span><span class="nv">at</span><span class="p">:</span> <span class="n">rowIndex</span><span class="p">)</span> <span class="k">as?</span> <span class="kt">ContactRow</span><span class="p">,</span><span class="k">let</span> <span class="nv">id</span> <span class="o">=</span> <span class="n">row</span><span class="o">.</span><span class="n">id</span> <span class="k">else</span> <span class="p">{</span>
            <span class="k">return</span>
        <span class="p">}</span>
        <span class="k">self</span><span class="o">.</span><span class="nf">pushController</span><span class="p">(</span><span class="nv">withName</span><span class="p">:</span> <span class="s">"showDetail"</span><span class="p">,</span> <span class="nv">context</span><span class="p">:</span> <span class="n">id</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><p>The operation of the Table is greatly simplified without delegate/datasource. To set the data, just call setNumberOfRows/setRowTypes to specify the number and type of rows, then use rowController(at:) to set the data content for each row!</p><p>The row selection event of the Table only requires overriding func table(_ table: WKInterfaceTable, didSelectRowAt rowIndex: Int) to operate! (Table only has this event)</p><h4 id="how-to-navigate-between-pages"><span class="me-2">How to navigate between pages?</span><a href="#how-to-navigate-between-pages" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><a href="/assets/e85d77b05061/1*1KovG3qshPRsCgUXkbDYFw.png" class="popup img-link "><img data-src="/assets/e85d77b05061/1*1KovG3qshPRsCgUXkbDYFw.png" alt="First, set the Identifier for the Interface Controller" class="lazyload" data-proofer-ignore></a></p><p>First, set the Identifier for the Interface Controller</p><p>watchKit has two navigation modes:</p><ol><li>Similar to iOS UIKit push self.pushController(withName: <strong>Interface Controller Identifier</strong>, context: <strong>Any?</strong>)</ol><p><a href="/assets/e85d77b05061/1*snXj8xFP0MtF3_sVWK1xUw.png" class="popup img-link "><img data-src="/assets/e85d77b05061/1*snXj8xFP0MtF3_sVWK1xUw.png" alt="Push method allows returning from the top left" class="lazyload" data-proofer-ignore></a></p><p>Push method allows returning from the top left</p><p>Return to the previous page same as iOS UIKit: self.pop()</p><p>Return to the root page: self.popToRootController()</p><p>Open a new page: self.presentController()</p><ol><li><a href="https://developer.apple.com/library/archive/documentation/General/Conceptual/WatchKitProgrammingGuide/InterfaceStyles.html" target="_blank">Tab display mode</a> WKInterfaceController.reloadRootControllers(withNames: [<strong>Interface Controller Identifier</strong>], contexts: [<strong>Any?</strong>])</ol><p>Or in the Storyboard, on the Interface Controller of the first page, Control+Click and drag to the second page and select “next page”</p><p><a href="/assets/e85d77b05061/1*teUOM4Wql2hexR51g7v1lQ.png" class="popup img-link "><img data-src="/assets/e85d77b05061/1*teUOM4Wql2hexR51g7v1lQ.png" alt="Tab display mode allows switching pages left and right" class="lazyload" data-proofer-ignore></a></p><p>Tab display mode allows switching pages left and right</p><p>The two navigation methods cannot be mixed.</p><h4 id="passing-parameters-between-pages"><span class="me-2">Passing parameters between pages?</span><a href="#passing-parameters-between-pages" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Unlike iOS where you need to use custom delegates or segues to pass parameters, in watchKit, you can pass parameters by placing them in the <strong>contexts</strong> of the above methods.</p><p>Receive parameters in the <strong>InterfaceController</strong>’s awake(withContext context: Any?)</p><p>For example, if I want to navigate from page A to page B and pass an id: Int:</p><p>Page A:</p><div class="language-swift highlighter-rouge"><div class="code-header"> <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="k">self</span><span class="o">.</span><span class="nf">pushController</span><span class="p">(</span><span class="nv">withName</span><span class="p">:</span> <span class="s">"showDetail"</span><span class="p">,</span> <span class="nv">context</span><span class="p">:</span> <span class="mi">100</span><span class="p">)</span>
</pre></table></code></div></div><p>Page B:</p><div class="language-swift highlighter-rouge"><div class="code-header"> <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="k">override</span> <span class="kd">func</span> <span class="nf">awake</span><span class="p">(</span><span class="n">withContext</span> <span class="nv">context</span><span class="p">:</span> <span class="kt">Any</span><span class="p">?)</span> <span class="p">{</span>
        <span class="k">super</span><span class="o">.</span><span class="nf">awake</span><span class="p">(</span><span class="nv">withContext</span><span class="p">:</span> <span class="n">context</span><span class="p">)</span>
        <span class="k">guard</span> <span class="k">let</span> <span class="nv">id</span> <span class="o">=</span> <span class="n">context</span> <span class="k">as?</span> <span class="kt">Int</span> <span class="k">else</span> <span class="p">{</span>
           <span class="nf">print</span><span class="p">(</span><span class="s">"Parameter error!"</span><span class="p">)</span>
           <span class="k">self</span><span class="o">.</span><span class="nf">popToRootController</span><span class="p">()</span>
           <span class="k">return</span>
        <span class="p">}</span>
        <span class="c1">// Configure interface objects here.</span>
<span class="p">}</span>
</pre></table></code></div></div><h4 id="programmatically-controlling-components"><span class="me-2">Programmatically controlling components</span><a href="#programmatically-controlling-components" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Compared to iOS UIKit, it is greatly simplified. Those who have developed for iOS should get the hang of it quickly! For example, label becomes setText() p.s. And surprisingly, there is no getText method, you can only use extension variables or store it in external variables</p><h4 id="synchronizationdata-transfer-between-iphone-and-apple-watch"><span class="me-2">Synchronization/data transfer between iPhone and Apple Watch</span><a href="#synchronizationdata-transfer-between-iphone-and-apple-watch" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>If you have developed iOS-related Extensions, you might instinctively use App Groups to share UserDefaults. I was excited to do this initially, but I got stuck for a long time and found that the data never transferred. After checking online, I found that since watchOS 2, this method is no longer supported…</p><p>You need to use the new WatchConnectivity method to communicate between the phone and the watch (similar to the socket concept). Both the iOS phone and the watchOS watch need to implement it. We write it in a singleton pattern as follows:</p><p><strong>Mobile:</strong></p><div class="language-swift highlighter-rouge"><div class="code-header"> <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
</pre><td class="rouge-code"><pre><span class="kd">import</span> <span class="kt">WatchConnectivity</span>

<span class="kd">class</span> <span class="kt">WatchSessionManager</span><span class="p">:</span> <span class="kt">NSObject</span><span class="p">,</span> <span class="kt">WCSessionDelegate</span> <span class="p">{</span>
    <span class="kd">@available</span><span class="p">(</span><span class="n">iOS</span> <span class="mf">9.3</span><span class="p">,</span> <span class="o">*</span><span class="p">)</span>
    <span class="kd">func</span> <span class="nf">session</span><span class="p">(</span><span class="n">_</span> <span class="nv">session</span><span class="p">:</span> <span class="kt">WCSession</span><span class="p">,</span> <span class="n">activationDidCompleteWith</span> <span class="nv">activationState</span><span class="p">:</span> <span class="kt">WCSessionActivationState</span><span class="p">,</span> <span class="nv">error</span><span class="p">:</span> <span class="kt">Error</span><span class="p">?)</span> <span class="p">{</span>
        <span class="c1">// Mobile session activation completed</span>
    <span class="p">}</span>
    
    <span class="kd">func</span> <span class="nf">session</span><span class="p">(</span><span class="n">_</span> <span class="nv">session</span><span class="p">:</span> <span class="kt">WCSession</span><span class="p">,</span> <span class="n">didReceiveUserInfo</span> <span class="nv">userInfo</span><span class="p">:</span> <span class="p">[</span><span class="kt">String</span> <span class="p">:</span> <span class="kt">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">[:])</span> <span class="p">{</span>
        <span class="c1">// Mobile received UserInfo from the watch</span>
    <span class="p">}</span>
    
    <span class="kd">func</span> <span class="nf">session</span><span class="p">(</span><span class="n">_</span> <span class="nv">session</span><span class="p">:</span> <span class="kt">WCSession</span><span class="p">,</span> <span class="n">didReceiveMessage</span> <span class="nv">message</span><span class="p">:</span> <span class="p">[</span><span class="kt">String</span> <span class="p">:</span> <span class="kt">Any</span><span class="p">],</span> <span class="nv">replyHandler</span><span class="p">:</span> <span class="kd">@escaping</span> <span class="p">([</span><span class="kt">String</span> <span class="p">:</span> <span class="kt">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kt">Void</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Mobile received Message from the watch</span>
    <span class="p">}</span>
    
    <span class="c1">// Additionally, didReceiveMessageData and didReceiveFile also handle data received from the watch</span>
    <span class="c1">// Decide which one to use based on your data transfer and reception needs</span>
    
    <span class="kd">func</span> <span class="nf">sendUserInfo</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">guard</span> <span class="k">let</span> <span class="nv">validSession</span> <span class="o">=</span> <span class="k">self</span><span class="o">.</span><span class="n">validSession</span><span class="p">,</span> <span class="n">validSession</span><span class="o">.</span><span class="n">isReachable</span> <span class="k">else</span> <span class="p">{</span>
            <span class="k">return</span>
        <span class="p">}</span>
        
        <span class="k">if</span> <span class="n">userDefaultsTransfer</span><span class="p">?</span><span class="o">.</span><span class="n">isTransferring</span> <span class="o">==</span> <span class="kc">true</span> <span class="p">{</span>
            <span class="n">userDefaultsTransfer</span><span class="p">?</span><span class="o">.</span><span class="nf">cancel</span><span class="p">()</span>
        <span class="p">}</span>
        
        <span class="k">var</span> <span class="nv">list</span><span class="p">:</span> <span class="p">[</span><span class="kt">String</span><span class="p">:</span> <span class="kt">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">[:]</span>
        <span class="c1">// Add UserDefaults to the list...</span>
        
        <span class="k">self</span><span class="o">.</span><span class="n">userDefaultsTransfer</span> <span class="o">=</span> <span class="n">validSession</span><span class="o">.</span><span class="nf">transferUserInfo</span><span class="p">(</span><span class="n">list</span><span class="p">)</span>
    <span class="p">}</span>
    
    <span class="kd">func</span> <span class="nf">sessionReachabilityDidChange</span><span class="p">(</span><span class="n">_</span> <span class="nv">session</span><span class="p">:</span> <span class="kt">WCSession</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Connection status with the watch app changes (when the watch app is opened/closed)</span>
        <span class="nf">sendUserInfo</span><span class="p">()</span>
        <span class="c1">// When the status changes, if the watch app is opened, sync UserDefaults once</span>
    <span class="p">}</span>
    
    <span class="kd">func</span> <span class="nf">session</span><span class="p">(</span><span class="n">_</span> <span class="nv">session</span><span class="p">:</span> <span class="kt">WCSession</span><span class="p">,</span> <span class="n">didFinish</span> <span class="nv">userInfoTransfer</span><span class="p">:</span> <span class="kt">WCSessionUserInfoTransfer</span><span class="p">,</span> <span class="nv">error</span><span class="p">:</span> <span class="kt">Error</span><span class="p">?)</span> <span class="p">{</span>
        <span class="c1">// Completed syncing UserDefaults (transferUserInfo)</span>
    <span class="p">}</span>
    
    <span class="kd">func</span> <span class="nf">sessionDidBecomeInactive</span><span class="p">(</span><span class="n">_</span> <span class="nv">session</span><span class="p">:</span> <span class="kt">WCSession</span><span class="p">)</span> <span class="p">{</span>
        
    <span class="p">}</span>
    
    <span class="kd">func</span> <span class="nf">sessionDidDeactivate</span><span class="p">(</span><span class="n">_</span> <span class="nv">session</span><span class="p">:</span> <span class="kt">WCSession</span><span class="p">)</span> <span class="p">{</span>
        
    <span class="p">}</span>
    
    <span class="kd">static</span> <span class="k">let</span> <span class="nv">sharedManager</span> <span class="o">=</span> <span class="kt">WatchSessionManager</span><span class="p">()</span>
    <span class="kd">private</span> <span class="k">override</span> <span class="nf">init</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">super</span><span class="o">.</span><span class="nf">init</span><span class="p">()</span>
    <span class="p">}</span>
    
    <span class="kd">private</span> <span class="k">let</span> <span class="nv">session</span><span class="p">:</span> <span class="kt">WCSession</span><span class="p">?</span> <span class="o">=</span> <span class="kt">WCSession</span><span class="o">.</span><span class="nf">isSupported</span><span class="p">()</span> <span class="p">?</span> <span class="kt">WCSession</span><span class="o">.</span><span class="k">default</span> <span class="p">:</span> <span class="kc">nil</span>
    <span class="kd">private</span> <span class="k">var</span> <span class="nv">validSession</span><span class="p">:</span> <span class="kt">WCSession</span><span class="p">?</span> <span class="p">{</span>
        <span class="k">if</span> <span class="k">let</span> <span class="nv">session</span> <span class="o">=</span> <span class="n">session</span><span class="p">,</span> <span class="n">session</span><span class="o">.</span><span class="n">isPaired</span> <span class="o">&amp;&amp;</span> <span class="n">session</span><span class="o">.</span><span class="n">isWatchAppInstalled</span> <span class="p">{</span>
            <span class="k">return</span> <span class="n">session</span>
        <span class="p">}</span>
        <span class="c1">// Return a valid and connected session with the watch app opened</span>
        <span class="k">return</span> <span class="kc">nil</span>
    <span class="p">}</span>
    
    <span class="kd">func</span> <span class="nf">startSession</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">session</span><span class="p">?</span><span class="o">.</span><span class="n">delegate</span> <span class="o">=</span> <span class="k">self</span>
        <span class="n">session</span><span class="p">?</span><span class="o">.</span><span class="nf">activate</span><span class="p">()</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><p>WatchConnectivity Code for iPhone</p><p>Add <code class="language-plaintext highlighter-rouge">WatchSessionManager.sharedManager.startSession()</code> in <code class="language-plaintext highlighter-rouge">application(_ application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplicationLaunchOptionsKey: Any]?)</code> of <code class="language-plaintext highlighter-rouge">iOS/AppDelegate.swift</code> to connect the session after launching the iPhone app.</p><p><strong>For Watch:</strong></p><div class="language-swift highlighter-rouge"><div class="code-header"> <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
</pre><td class="rouge-code"><pre><span class="kd">import</span> <span class="kt">WatchConnectivity</span>

<span class="kd">class</span> <span class="kt">WatchSessionManager</span><span class="p">:</span> <span class="kt">NSObject</span><span class="p">,</span> <span class="kt">WCSessionDelegate</span> <span class="p">{</span>
    <span class="kd">func</span> <span class="nf">session</span><span class="p">(</span><span class="n">_</span> <span class="nv">session</span><span class="p">:</span> <span class="kt">WCSession</span><span class="p">,</span> <span class="n">activationDidCompleteWith</span> <span class="nv">activationState</span><span class="p">:</span> <span class="kt">WCSessionActivationState</span><span class="p">,</span> <span class="nv">error</span><span class="p">:</span> <span class="kt">Error</span><span class="p">?)</span> <span class="p">{</span>
    <span class="p">}</span>
    
    <span class="kd">func</span> <span class="nf">sessionReachabilityDidChange</span><span class="p">(</span><span class="n">_</span> <span class="nv">session</span><span class="p">:</span> <span class="kt">WCSession</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">guard</span> <span class="n">session</span><span class="o">.</span><span class="n">isReachable</span> <span class="k">else</span> <span class="p">{</span>
            <span class="k">return</span>
        <span class="p">}</span>
        
    <span class="p">}</span>
    
    <span class="kd">func</span> <span class="nf">session</span><span class="p">(</span><span class="n">_</span> <span class="nv">session</span><span class="p">:</span> <span class="kt">WCSession</span><span class="p">,</span> <span class="n">didFinish</span> <span class="nv">userInfoTransfer</span><span class="p">:</span> <span class="kt">WCSessionUserInfoTransfer</span><span class="p">,</span> <span class="nv">error</span><span class="p">:</span> <span class="kt">Error</span><span class="p">?)</span> <span class="p">{</span>
        
    <span class="p">}</span>
    
    <span class="kd">func</span> <span class="nf">session</span><span class="p">(</span><span class="n">_</span> <span class="nv">session</span><span class="p">:</span> <span class="kt">WCSession</span><span class="p">,</span> <span class="n">didReceiveUserInfo</span> <span class="nv">userInfo</span><span class="p">:</span> <span class="p">[</span><span class="kt">String</span> <span class="p">:</span> <span class="kt">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">[:])</span> <span class="p">{</span>
        <span class="kt">DispatchQueue</span><span class="o">.</span><span class="n">main</span><span class="o">.</span><span class="k">async</span> <span class="p">{</span>
            <span class="c1">//UserDefaults:</span>
            <span class="c1">//print(userInfo)</span>
        <span class="p">}</span>
    <span class="p">}</span>
    
    <span class="kd">static</span> <span class="k">let</span> <span class="nv">sharedManager</span> <span class="o">=</span> <span class="kt">WatchSessionManager</span><span class="p">()</span>
    <span class="kd">private</span> <span class="k">override</span> <span class="nf">init</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">super</span><span class="o">.</span><span class="nf">init</span><span class="p">()</span>
    <span class="p">}</span>
    
    <span class="kd">private</span> <span class="k">let</span> <span class="nv">session</span><span class="p">:</span> <span class="kt">WCSession</span><span class="p">?</span> <span class="o">=</span> <span class="kt">WCSession</span><span class="o">.</span><span class="nf">isSupported</span><span class="p">()</span> <span class="p">?</span> <span class="kt">WCSession</span><span class="o">.</span><span class="k">default</span> <span class="p">:</span> <span class="kc">nil</span>
    
    <span class="kd">func</span> <span class="nf">startSession</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">session</span><span class="p">?</span><span class="o">.</span><span class="n">delegate</span> <span class="o">=</span> <span class="k">self</span>
        <span class="n">session</span><span class="p">?</span><span class="o">.</span><span class="nf">activate</span><span class="p">()</span>
    <span class="p">}</span>
<span class="p">}</span>

</pre></table></code></div></div><p>WatchConnectivity Code for Watch</p><p>Add <code class="language-plaintext highlighter-rouge">WatchSessionManager.sharedManager.startSession()</code> in <code class="language-plaintext highlighter-rouge">applicationDidFinishLaunching()</code> of <code class="language-plaintext highlighter-rouge">WatchOS Extension/ExtensionDelegate.swift</code> to connect the session after launching the Watch app.</p><h4 id="watchconnectivity-data-transfer-methods"><span class="me-2">WatchConnectivity Data Transfer Methods</span><a href="#watchconnectivity-data-transfer-methods" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>To send data: <code class="language-plaintext highlighter-rouge">sendMessage</code>, <code class="language-plaintext highlighter-rouge">sendMessageData</code>, <code class="language-plaintext highlighter-rouge">transferUserInfo</code>, <code class="language-plaintext highlighter-rouge">transferFile</code> To receive data: <code class="language-plaintext highlighter-rouge">didReceiveMessageData</code>, <code class="language-plaintext highlighter-rouge">didReceive</code>, <code class="language-plaintext highlighter-rouge">didReceiveMessage</code> The methods for sending and receiving data are the same on both ends.</p><p><a href="/assets/e85d77b05061/1*eVT-62WCBy1ZZC90abJPqA.png" class="popup img-link "><img data-src="/assets/e85d77b05061/1*eVT-62WCBy1ZZC90abJPqA.png" alt="" class="lazyload" data-proofer-ignore></a></p><p>You can see that data transfer from the watch to the phone works, but data transfer from the phone to the watch is limited to when the watch app is open.</p><h4 id="handling-push-notifications-in-watchos"><span class="me-2">Handling Push Notifications in watchOS</span><a href="#handling-push-notifications-in-watchos" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>The <code class="language-plaintext highlighter-rouge">PushNotificationPayload.apns</code> file in the project directory comes in handy for testing push notifications on the simulator. Deploy the Watch App target on the simulator, and after installation, launching the app will receive a push notification with the content of this file, making it easier for developers to test push notification functionality.</p><p><a href="/assets/e85d77b05061/1*1nlJOqwVqpMP6WtwdRcLPA.png" class="popup img-link "><img data-src="/assets/e85d77b05061/1*1nlJOqwVqpMP6WtwdRcLPA.png" alt="To modify/enable/disable PushNotificationPayload.apns, select the Target and then Edit Scheme" class="lazyload" data-proofer-ignore></a></p><p>To modify/enable/disable <code class="language-plaintext highlighter-rouge">PushNotificationPayload.apns</code>, select the Target and then Edit Scheme.</p><p><strong>watchOS Push Notification Handling:</strong></p><p>Similar to iOS where we implement UNUserNotificationCenterDelegate, in watchOS we also implement the same methods in watchOS Extension/ExtensionDelegate.swift</p><div class="language-swift highlighter-rouge"><div class="code-header"> <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
</pre><td class="rouge-code"><pre><span class="kd">import</span> <span class="kt">WatchKit</span>
<span class="kd">import</span> <span class="kt">UserNotifications</span>
<span class="kd">import</span> <span class="kt">WatchConnectivity</span>

<span class="kd">class</span> <span class="kt">ExtensionDelegate</span><span class="p">:</span> <span class="kt">NSObject</span><span class="p">,</span> <span class="kt">WKExtensionDelegate</span><span class="p">,</span> <span class="kt">UNUserNotificationCenterDelegate</span> <span class="p">{</span>

    <span class="kd">func</span> <span class="nf">applicationDidFinishLaunching</span><span class="p">()</span> <span class="p">{</span>
        
        <span class="kt">WatchSessionManager</span><span class="o">.</span><span class="n">sharedManager</span><span class="o">.</span><span class="nf">startSession</span><span class="p">()</span> <span class="c1">// WatchConnectivity connection mentioned earlier</span>
      
        <span class="kt">UNUserNotificationCenter</span><span class="o">.</span><span class="nf">current</span><span class="p">()</span><span class="o">.</span><span class="n">delegate</span> <span class="o">=</span> <span class="k">self</span> <span class="c1">// Set UNUserNotificationCenter delegate</span>
        <span class="c1">// Perform any final initialization of your application.</span>
    <span class="p">}</span>
    
    <span class="kd">func</span> <span class="nf">userNotificationCenter</span><span class="p">(</span><span class="n">_</span> <span class="nv">center</span><span class="p">:</span> <span class="kt">UNUserNotificationCenter</span><span class="p">,</span> <span class="n">willPresent</span> <span class="nv">notification</span><span class="p">:</span> <span class="kt">UNNotification</span><span class="p">,</span> <span class="n">withCompletionHandler</span> <span class="nv">completionHandler</span><span class="p">:</span> <span class="kd">@escaping</span> <span class="p">(</span><span class="kt">UNNotificationPresentationOptions</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Void</span><span class="p">)</span> <span class="p">{</span>
        <span class="nf">completionHandler</span><span class="p">([</span><span class="o">.</span><span class="n">sound</span><span class="p">,</span> <span class="o">.</span><span class="n">alert</span><span class="p">])</span>
        <span class="c1">// Similar to iOS, this approach allows push notifications to be displayed even when the app is in the foreground</span>
    <span class="p">}</span>
    
    <span class="kd">func</span> <span class="nf">userNotificationCenter</span><span class="p">(</span><span class="n">_</span> <span class="nv">center</span><span class="p">:</span> <span class="kt">UNUserNotificationCenter</span><span class="p">,</span> <span class="n">didReceive</span> <span class="nv">response</span><span class="p">:</span> <span class="kt">UNNotificationResponse</span><span class="p">,</span> <span class="n">withCompletionHandler</span> <span class="nv">completionHandler</span><span class="p">:</span> <span class="kd">@escaping</span> <span class="p">()</span> <span class="o">-&gt;</span> <span class="kt">Void</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// When the push notification is clicked</span>
        <span class="k">guard</span> <span class="k">let</span> <span class="nv">info</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">notification</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">userInfo</span><span class="p">[</span><span class="s">"aps"</span><span class="p">]</span> <span class="k">as?</span> <span class="kt">NSDictionary</span><span class="p">,</span> <span class="k">let</span> <span class="nv">alert</span> <span class="o">=</span> <span class="n">info</span><span class="p">[</span><span class="s">"alert"</span><span class="p">]</span> <span class="k">as?</span> <span class="kt">Dictionary</span><span class="o">&lt;</span><span class="kt">String</span><span class="p">,</span> <span class="kt">String</span><span class="o">&gt;</span><span class="p">,</span> <span class="k">let</span> <span class="nv">data</span> <span class="o">=</span> <span class="n">info</span><span class="p">[</span><span class="s">"data"</span><span class="p">]</span> <span class="k">as?</span> <span class="kt">Dictionary</span><span class="o">&lt;</span><span class="kt">String</span><span class="p">,</span> <span class="kt">String</span><span class="o">&gt;</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nf">completionHandler</span><span class="p">()</span>
            <span class="k">return</span>
        <span class="p">}</span>
        
        <span class="c1">// response.actionIdentifier can get the click event Identifier</span>
        <span class="c1">// Default click event: UNNotificationDefaultActionIdentifier</span>
        
        <span class="k">if</span> <span class="n">alert</span><span class="p">[</span><span class="s">"type"</span><span class="p">]</span> <span class="o">==</span> <span class="s">"new_ask"</span> <span class="p">{</span>
            <span class="kt">WKExtension</span><span class="o">.</span><span class="nf">shared</span><span class="p">()</span><span class="o">.</span><span class="n">rootInterfaceController</span><span class="p">?</span><span class="o">.</span><span class="nf">pushController</span><span class="p">(</span><span class="nv">withName</span><span class="p">:</span> <span class="s">"showDetail"</span><span class="p">,</span> <span class="nv">context</span><span class="p">:</span> <span class="mi">100</span><span class="p">)</span>
            <span class="c1">// Get the current root interface controller and push</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
           <span class="c1">// Other handling...</span>
           <span class="c1">// WKExtension.shared().rootInterfaceController?.presentController(withName: "", context: nil)</span>
            
        <span class="p">}</span>
        
        <span class="nf">completionHandler</span><span class="p">()</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><p>ExtensionDelegate.swift</p><p><strong>watchOS Push Notification Display, divided into three types:</strong></p><ol><li>static: Default push notification display method</ol><p><a href="/assets/e85d77b05061/1*uQN8Km08rio4tylAw48LyQ.jpeg" class="popup img-link "><img data-src="/assets/e85d77b05061/1*uQN8Km08rio4tylAw48LyQ.jpeg" alt="Along with the phone push notification, here the iOS side has implemented UNUserNotificationCenter.setNotificationCategories to add buttons below the notification; Apple Watch will also display them by default" class="lazyload" data-proofer-ignore></a></p><p>Works with mobile push notifications, here the iOS side has implemented <code class="language-plaintext highlighter-rouge">UNUserNotificationCenter.setNotificationCategories</code> to add buttons below the notification; Apple Watch will also display them by default.</p><ol><li>dynamic: Dynamically handle push notification display styles (reorganize content, display images)<li>interactive: Supported on watchOS ≥ 5, adds support buttons on top of dynamic</ol><p><a href="/assets/e85d77b05061/1*PlYKw5M3XBVDtjOa2tklgg.png" class="popup img-link "><img data-src="/assets/e85d77b05061/1*PlYKw5M3XBVDtjOa2tklgg.png" alt="You can set the push notification handling method in the Static Notification Interface Controller Scene in Interface.storyboard" class="lazyload" data-proofer-ignore></a></p><p>You can set the push notification handling method in the Static Notification Interface Controller Scene in Interface.storyboard</p><p>There’s not much to say about static, it just follows the default display method. Here we first introduce dynamic. After checking “Has Dynamic Interface,” a “Dynamic Interface” will appear where you can design your custom push notification presentation method (Buttons cannot be used):</p><p><a href="/assets/e85d77b05061/1*RYSdWHxgmZX6Ht6m11Qpig.png" class="popup img-link "><img data-src="/assets/e85d77b05061/1*RYSdWHxgmZX6Ht6m11Qpig.png" alt="My custom push notification presentation design" class="lazyload" data-proofer-ignore></a></p><p>My custom push notification presentation design</p><div class="language-swift highlighter-rouge"><div class="code-header"> <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
</pre><td class="rouge-code"><pre><span class="kd">import</span> <span class="kt">WatchKit</span>
<span class="kd">import</span> <span class="kt">Foundation</span>
<span class="kd">import</span> <span class="kt">UserNotifications</span>

<span class="kd">class</span> <span class="kt">NotificationController</span><span class="p">:</span> <span class="kt">WKUserNotificationInterfaceController</span> <span class="p">{</span>

    <span class="kd">@IBOutlet</span> <span class="k">var</span> <span class="nv">imageView</span><span class="p">:</span> <span class="kt">WKInterfaceImage</span><span class="o">!</span>
    <span class="kd">@IBOutlet</span> <span class="k">var</span> <span class="nv">titleLabel</span><span class="p">:</span> <span class="kt">WKInterfaceLabel</span><span class="o">!</span>
    <span class="kd">@IBOutlet</span> <span class="k">var</span> <span class="nv">contentLabel</span><span class="p">:</span> <span class="kt">WKInterfaceLabel</span><span class="o">!</span>
    
    <span class="k">override</span> <span class="nf">init</span><span class="p">()</span> <span class="p">{</span>
        <span class="c1">// Initialize variables here.</span>
        <span class="k">super</span><span class="o">.</span><span class="nf">init</span><span class="p">()</span>
        <span class="k">self</span><span class="o">.</span><span class="nf">setTitle</span><span class="p">(</span><span class="s">"結婚吧"</span><span class="p">)</span> <span class="c1">// Set the title at the top right</span>
        <span class="c1">// Configure interface objects here.</span>
    <span class="p">}</span>

    <span class="k">override</span> <span class="kd">func</span> <span class="nf">willActivate</span><span class="p">()</span> <span class="p">{</span>
        <span class="c1">// This method is called when watch view controller is about to be visible to user</span>
        <span class="k">super</span><span class="o">.</span><span class="nf">willActivate</span><span class="p">()</span>
    <span class="p">}</span>

    <span class="k">override</span> <span class="kd">func</span> <span class="nf">didDeactivate</span><span class="p">()</span> <span class="p">{</span>
        <span class="c1">// This method is called when watch view controller is no longer visible</span>
        <span class="k">super</span><span class="o">.</span><span class="nf">didDeactivate</span><span class="p">()</span>
    <span class="p">}</span>
    
    <span class="k">override</span> <span class="kd">func</span> <span class="nf">didReceive</span><span class="p">(</span><span class="n">_</span> <span class="nv">notification</span><span class="p">:</span> <span class="kt">UNNotification</span><span class="p">)</span> <span class="p">{</span>
        
        <span class="k">if</span> <span class="kd">#available(watchOSApplicationExtension 5.0, *)</span> <span class="p">{</span>
            <span class="k">self</span><span class="o">.</span><span class="n">notificationActions</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="c1">// Clear the buttons added below the notification by iOS implementation of UNUserNotificationCenter.setNotificationCategories</span>
        <span class="p">}</span>
        
        <span class="k">guard</span> <span class="k">let</span> <span class="nv">info</span> <span class="o">=</span> <span class="n">notification</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">userInfo</span><span class="p">[</span><span class="s">"aps"</span><span class="p">]</span> <span class="k">as?</span> <span class="kt">NSDictionary</span><span class="p">,</span> <span class="k">let</span> <span class="nv">alert</span> <span class="o">=</span> <span class="n">info</span><span class="p">[</span><span class="s">"alert"</span><span class="p">]</span> <span class="k">as?</span> <span class="kt">Dictionary</span><span class="o">&lt;</span><span class="kt">String</span><span class="p">,</span> <span class="kt">String</span><span class="o">&gt;</span> <span class="k">else</span> <span class="p">{</span>
            <span class="k">return</span>
        <span class="p">}</span>
        <span class="c1">// Push notification information</span>
        
        <span class="k">self</span><span class="o">.</span><span class="n">titleLabel</span><span class="o">.</span><span class="nf">setText</span><span class="p">(</span><span class="n">alert</span><span class="p">[</span><span class="s">"title"</span><span class="p">])</span>
        <span class="k">self</span><span class="o">.</span><span class="n">contentLabel</span><span class="o">.</span><span class="nf">setText</span><span class="p">(</span><span class="n">alert</span><span class="p">[</span><span class="s">"body"</span><span class="p">])</span>
        
        <span class="k">if</span> <span class="kd">#available(watchOSApplicationExtension 5.0, *)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="n">alert</span><span class="p">[</span><span class="s">"type"</span><span class="p">]</span> <span class="o">==</span> <span class="s">"new_msg"</span> <span class="p">{</span>
              <span class="c1">// If it is a new message push notification, add a reply button below the notification</span>
              <span class="k">self</span><span class="o">.</span><span class="n">notificationActions</span> <span class="o">=</span> <span class="p">[</span><span class="kt">UNNotificationAction</span><span class="p">(</span><span class="nv">identifier</span><span class="p">:</span> <span class="s">"replyAction"</span><span class="p">,</span> <span class="nv">title</span><span class="p">:</span> <span class="s">"Reply"</span><span class="p">,</span> <span class="nv">options</span><span class="p">:</span> <span class="p">[</span><span class="o">.</span><span class="n">foreground</span><span class="p">])]</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
              <span class="c1">// Otherwise, add a view button</span>
              <span class="k">self</span><span class="o">.</span><span class="n">notificationActions</span> <span class="o">=</span> <span class="p">[</span><span class="kt">UNNotificationAction</span><span class="p">(</span><span class="nv">identifier</span><span class="p">:</span> <span class="s">"openAction"</span><span class="p">,</span> <span class="nv">title</span><span class="p">:</span> <span class="s">"View"</span><span class="p">,</span> <span class="nv">options</span><span class="p">:</span> <span class="p">[</span><span class="o">.</span><span class="n">foreground</span><span class="p">])]</span>
            <span class="p">}</span>
        <span class="p">}</span>
        
        <span class="c1">// This method is called when a notification needs to be presented.</span>
        <span class="c1">// Implement it if you use a dynamic notification interface.</span>
        <span class="c1">// Populate your dynamic notification interface as quickly as possible.</span>
        
    <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><p>The program part, similarly, drag the outlet to the controller and implement the functionality.</p><p>Next, let’s talk about interactive, which is the same as dynamic, but you can add more buttons and control the program with the same class as dynamic; I didn’t use interactive because I added my buttons using self.notificationActions, the difference is as follows:</p><p><a href="/assets/e85d77b05061/1*_1Crgx61kE6F509Jd2qxPQ.jpeg" class="popup img-link "><img data-src="/assets/e85d77b05061/1*_1Crgx61kE6F509Jd2qxPQ.jpeg" alt="Left uses interactive, right uses self.notificationActions" class="lazyload" data-proofer-ignore></a></p><p>Left uses interactive, right uses self.notificationActions</p><p>Both methods require watchOS ≥ 5 support.</p><p>Using self.notificationActions to add buttons, the button events are handled by <code class="language-plaintext highlighter-rouge">userNotificationCenter(_ center: UNUserNotificationCenter, didReceive response: UNNotificationResponse, withCompletionHandler completionHandler: @escaping () -&gt; Void)</code> in ExtensionDelegate, and actions are identified by identifier.</p><h4 id="menu-functionality"><span class="me-2">Menu Functionality?</span><a href="#menu-functionality" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><a href="/assets/e85d77b05061/1*qHUly8lLEa5L7FSPJCrbcw.png" class="popup img-link "><img data-src="/assets/e85d77b05061/1*qHUly8lLEa5L7FSPJCrbcw.png" alt="Drag Menu from the component library, then drag Menu Item, and then drag IBAction to the program control" class="lazyload" data-proofer-ignore></a></p><p>Drag Menu from the component library, then drag Menu Item, and then drag IBAction to the program control</p><p>It will appear when you press hard on the page:</p><p><a href="/assets/e85d77b05061/1*9aj7kUPsv9d8XUvgCpqfOg.png" class="popup img-link "><img data-src="/assets/e85d77b05061/1*9aj7kUPsv9d8XUvgCpqfOg.png" alt="" class="lazyload" data-proofer-ignore></a></p><h4 id="content-input"><span class="me-2">Content Input?</span><a href="#content-input" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Use the built-in presentTextInputController method!</p><div class="language-swift highlighter-rouge"><div class="code-header"> <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
</pre><td class="rouge-code"><pre><span class="kd">@IBAction</span> <span class="kd">func</span> <span class="nf">replyBtnClick</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">guard</span> <span class="k">let</span> <span class="nv">target</span> <span class="o">=</span> <span class="n">target</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">return</span>
    <span class="p">}</span>
    
    <span class="k">self</span><span class="o">.</span><span class="nf">presentTextInputController</span><span class="p">(</span><span class="nv">withSuggestions</span><span class="p">:</span> <span class="p">[</span><span class="s">"I'll reply later"</span><span class="p">,</span> <span class="s">"Thank you"</span><span class="p">,</span> <span class="s">"Feel free to contact me"</span><span class="p">,</span> <span class="s">"Okay"</span><span class="p">,</span> <span class="s">"OK!"</span><span class="p">],</span> <span class="nv">allowedInputMode</span><span class="p">:</span> <span class="kt">WKTextInputMode</span><span class="o">.</span><span class="n">plain</span><span class="p">)</span> <span class="p">{</span> <span class="p">(</span><span class="n">results</span><span class="p">)</span> <span class="k">in</span>
        
        <span class="k">guard</span> <span class="k">let</span> <span class="nv">results</span> <span class="o">=</span> <span class="n">results</span> <span class="k">else</span> <span class="p">{</span>
            <span class="k">return</span>
        <span class="p">}</span>
        <span class="c1">// When there is input</span>
        
        <span class="k">let</span> <span class="nv">txts</span> <span class="o">=</span> <span class="n">results</span><span class="o">.</span><span class="nf">filter</span><span class="p">({</span> <span class="p">(</span><span class="n">txt</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Bool</span> <span class="k">in</span>
            <span class="k">if</span> <span class="k">let</span> <span class="nv">txt</span> <span class="o">=</span> <span class="n">txt</span> <span class="k">as?</span> <span class="kt">String</span><span class="p">,</span> <span class="n">txt</span> <span class="o">!=</span> <span class="s">""</span> <span class="p">{</span>
                <span class="k">return</span> <span class="kc">true</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="k">return</span> <span class="kc">false</span>
            <span class="p">}</span>
        <span class="p">})</span><span class="o">.</span><span class="nf">map</span><span class="p">({</span> <span class="p">(</span><span class="n">txt</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">String</span> <span class="k">in</span>
            <span class="k">return</span> <span class="n">txt</span> <span class="k">as?</span> <span class="kt">String</span> <span class="p">??</span> <span class="s">""</span>
        <span class="p">})</span>
        <span class="c1">// Preprocess input</span>
        
        <span class="n">txts</span><span class="o">.</span><span class="nf">forEach</span><span class="p">({</span> <span class="p">(</span><span class="n">txt</span><span class="p">)</span> <span class="k">in</span>
            <span class="nf">print</span><span class="p">(</span><span class="n">txt</span><span class="p">)</span>
        <span class="p">})</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><p><a href="/assets/e85d77b05061/1*CWr9RIb55Sn-FoMrTmc7sQ.png" class="popup img-link "><img data-src="/assets/e85d77b05061/1*CWr9RIb55Sn-FoMrTmc7sQ.png" alt="" class="lazyload" data-proofer-ignore></a></p><h3 id="summary"><span class="me-2">Summary</span><a href="#summary" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><blockquote><p><strong><em>Thank you for reading this! You’ve worked hard!</em></strong></p></blockquote><p>This concludes the article. It briefly mentioned UI layout, programming, push notifications, and interface applications. For those who have developed iOS, getting started is really quick, almost the same, and many methods have been simplified to make it more concise, but the things you can do have indeed decreased (like currently not knowing how to load more for Table); currently, there are very few things you can do, and I hope the official will open more APIs for developers to use in the future ❤️❤️❤️</p><h4 id="murmur"><span class="me-2">MurMur:</span><a href="#murmur" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><a href="/assets/e85d77b05061/1*-J9qZ846ZysJEhMTSZeE3w.jpeg" class="popup img-link "><img data-src="/assets/e85d77b05061/1*-J9qZ846ZysJEhMTSZeE3w.jpeg" alt="Deploying Apple Watch App Target to the watch is really slow — [Narcos](https://www.netflix.com/tw/title/80025172){:target=&quot;_blank&quot;}" class="lazyload" data-proofer-ignore></a></p><p>Deploying Apple Watch App Target to the watch is really slow — <a href="https://www.netflix.com/tw/title/80025172" target="_blank">Narcos</a></p><p>If you have any questions or feedback, feel free to <a href="https://www.zhgchg.li/contact" target="_blank">contact me</a>.</p><p>===</p><p><a href="https://zhgchg.li/posts/e85d77b05061/" target="_blank">本文中文版本</a></p><p>===</p><p>This article was first published in Traditional Chinese on Medium ➡️ <a href="https://medium.com/p/e85d77b05061" target="_blank"><strong>View Here</strong></a></p><widgetic id="64ce71d5ecb2a165598b4567" resize="fill" width="560" height="60" autoscale="on" adaptive="414"></widgetic><script async src="https://widgetic.com/sdk/sdk.js"></script></div><hr/> <a href="https://www.buymeacoffee.com/zhgchgli" target="_blank" class="img-link shimmer" ><img data-src="https://img.buymeacoffee.com/button-api/?text=Buy me a beer!&emoji=🍺&slug=zhgchgli&button_colour=FFDD00&font_colour=000000&font_family=Bree&outline_colour=000000&coffee_colour=ffffff" class="lazyload" data-proofer-ignore></a> <br/> <a href="https://medium.com/@zhgchgli" target="_blank" class="img-link shimmer" ><img data-src="/assets/images/followmymedium.png" class="lazyload" data-proofer-ignore></a> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3184248473087645" crossorigin="anonymous"></script> <ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-3184248473087645" data-ad-slot="7555148040"></ins> <script> (adsbygoogle = window.adsbygoogle || []).push({}); </script><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw me-1"></i> <a href='/categories/zrealm/'>ZRealm</a>, <a href='/categories/dev/'>Dev.</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw me-1"></i> <a href="/tags/ios/" class="post-tag no-text-decoration" >ios</a> <a href="/tags/watchos/" class="post-tag no-text-decoration" >watchos</a> <a href="/tags/apple-watch-apps/" class="post-tag no-text-decoration" >apple-watch-apps</a> <a href="/tags/watchkit/" class="post-tag no-text-decoration" >watchkit</a> <a href="/tags/ios-app-development/" class="post-tag no-text-decoration" >ios-app-development</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted me-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Let's%20Build%20an%20Apple%20Watch%20App!%20-%20ZhgChgLi&url=https%3A%2F%2Fen.zhgchg.li%2Fposts%2Fe85d77b05061%2F" data-bs-toggle="tooltip" data-bs-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter" > <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Let's%20Build%20an%20Apple%20Watch%20App!%20-%20ZhgChgLi&u=https%3A%2F%2Fen.zhgchg.li%2Fposts%2Fe85d77b05061%2F" data-bs-toggle="tooltip" data-bs-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook" > <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fen.zhgchg.li%2Fposts%2Fe85d77b05061%2F" data-bs-toggle="tooltip" data-bs-placement="top" title="Linkedin" target="_blank" rel="noopener" aria-label="Linkedin" > <i class="fa-fw fab fa-linkedin"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-bs-toggle="tooltip" data-bs-placement="top" title="Copy link" data-title-succeed="Link copied successfully!" > </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 ps-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content list-unstyled ps-0 pb-1 ms-1 mt-2"><li class="text-truncate lh-lg"> <a href="/posts/d9a95d4224ea/">Medium Custom Domain Feature Returns</a><li class="text-truncate lh-lg"> <a href="/posts/483af5d93297/">Custom Domain Tutorial for Github Pages</a><li class="text-truncate lh-lg"> <a href="/posts/9e43897d99fc/">Behavior Change in Merging NSAttributedString Attributes Range in iOS ≥ 18</a><li class="text-truncate lh-lg"> <a href="/posts/b08ef940c196/">iOS Deferred Deep Link Implementation (Swift)</a><li class="text-truncate lh-lg"> <a href="/posts/12c5026da33d/">What's New with Universal Links</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/ios-app-development/">ios-app-development</a> <a class="post-tag btn btn-outline-primary" href="/tags/ios/">ios</a> <a class="post-tag btn btn-outline-primary" href="/tags/swift/">swift</a> <a class="post-tag btn btn-outline-primary" href="/tags/life/">life</a> <a class="post-tag btn btn-outline-primary" href="/tags/medium/">medium</a> <a class="post-tag btn btn-outline-primary" href="/tags/unboxing/">unboxing</a> <a class="post-tag btn btn-outline-primary" href="/tags/life/">Life</a> <a class="post-tag btn btn-outline-primary" href="/tags/japan/">japan</a> <a class="post-tag btn btn-outline-primary" href="/tags/automation/">automation</a> <a class="post-tag btn btn-outline-primary" href="/tags/nsattributedstring/">nsattributedstring</a></div></div></div><div id="toc-wrapper" class="ps-0 pe-4 mb-5"><div class="panel-heading ps-3 pt-2 mb-2">Contents</div><nav id="toc"></nav></div></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 px-3 pe-xl-4 mt-5"><div id="related-posts" class="mb-2 mb-sm-4"><h3 class="pt-2 mb-4 ms-1" data-toc-skip> Further Reading</h3><div class="row row-cols-1 row-cols-md-2 row-cols-xl-3 g-4 mb-4"><div class="col"> <a href="/posts/e37d66ea1146/" class="card post-preview h-100"><div class="card-body"> <em class="small" data-ts="1539454069" data-df="ll" > Oct 14, 2018 </em><h4 class="pt-0 my-2" data-toc-skip>iOS UITextView Text Wrapping Editor (Swift)</h4><div class="text-muted small"><p> iOS UITextView Text Wrapping Editor (Swift) Practical Route Target Functionality: The app has a discussion area where users can post articles. The interface for posting articles needs to support...</p></div></div></a></div><div class="col"> <a href="/posts/cb6eba52a342/" class="card post-preview h-100"><div class="card-body"> <em class="small" data-ts="1539618241" data-df="ll" > Oct 15, 2018 </em><h4 class="pt-0 my-2" data-toc-skip>iOS ≥ 10 Notification Service Extension Application (Swift)</h4><div class="text-muted small"><p> iOS ≥ 10 Notification Service Extension Application (Swift) Image push notifications, push notification display statistics, pre-processing before push notification display Regarding the basics of...</p></div></div></a></div><div class="col"> <a href="/posts/9a9aa892f9a9/" class="card post-preview h-100"><div class="card-body"> <em class="small" data-ts="1539705684" data-df="ll" > Oct 17, 2018 </em><h4 class="pt-0 my-2" data-toc-skip>Exploring Vision — Automatic Face Detection and Cropping for Profile Pictures (Swift)</h4><div class="text-muted small"><p> Exploring Vision — Automatic Face Detection and Cropping for Profile Pictures (Swift) Practical Application of Vision [2024/08/13 Update] Refer to the new article and API: “iOS Vision framewor...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/a2920e33e73e/" class="btn btn-outline-primary" prompt="Older" ><p>Apple Watch Series 4: Comprehensive Review from Unboxing to Mastery</p></a> <a href="/posts/6012b7b4f612/" class="btn btn-outline-primary" prompt="Newer" ><p>iOS tintAdjustmentMode Property</p></a></div><script type="text/javascript"> (function () { const origin = 'https://giscus.app'; const iframe = 'iframe.giscus-frame'; const lightTheme = 'light'; const darkTheme = 'dark_dimmed'; let initTheme = lightTheme; const html = document.documentElement; if ( (html.hasAttribute('data-mode') && html.getAttribute('data-mode') === 'dark') || (!html.hasAttribute('data-mode') && window.matchMedia('(prefers-color-scheme: dark)').matches) ) { initTheme = darkTheme; } let giscusAttributes = { src: 'https://giscus.app/client.js', 'data-repo': 'ZhgChgLi/zhgchgli.github.io', 'data-repo-id': 'R_kgDOHdowLw', 'data-category': 'Q&A', 'data-category-id': 'DIC_kwDOHdowL84CU-q6', 'data-mapping': 'url', 'data-reactions-enabled': '1', 'data-emit-metadata': '0', 'data-theme': initTheme, 'data-input-position': 'bottom', 'data-lang': 'en', crossorigin: 'anonymous', async: '' }; let giscusScript = document.createElement('script'); Object.entries(giscusAttributes).forEach(([key, value]) => giscusScript.setAttribute(key, value) ); document.getElementById('tail-wrapper').appendChild(giscusScript); addEventListener('message', (event) => { if ( event.source === window && event.data && event.data.direction === ModeToggle.ID ) { /* global theme mode changed */ const mode = event.data.message; const theme = mode === ModeToggle.DARK_MODE ? darkTheme : lightTheme; const message = { setConfig: { theme: theme } }; const giscus = document.querySelector(iframe).contentWindow; giscus.postMessage({ giscus: message }, origin); } }); })(); </script></div></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/ios-app-development/">ios-app-development</a> <a class="post-tag btn btn-outline-primary" href="/tags/ios/">ios</a> <a class="post-tag btn btn-outline-primary" href="/tags/swift/">swift</a> <a class="post-tag btn btn-outline-primary" href="/tags/life/">life</a> <a class="post-tag btn btn-outline-primary" href="/tags/medium/">medium</a> <a class="post-tag btn btn-outline-primary" href="/tags/unboxing/">unboxing</a> <a class="post-tag btn btn-outline-primary" href="/tags/life/">Life</a> <a class="post-tag btn btn-outline-primary" href="/tags/japan/">japan</a> <a class="post-tag btn btn-outline-primary" href="/tags/automation/">automation</a> <a class="post-tag btn btn-outline-primary" href="/tags/nsattributedstring/">nsattributedstring</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div></div><footer><div class="container px-lg-4"><div class="d-flex justify-content-center align-items-center text-muted mx-md-3"><p>Using the <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> theme <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> <br/> <a href="https://zhgchg.li" target="_blank">中文版網站</a><br/> Powered by <a href="https://github.com/ZhgChgLi/ZMediumToMarkdown" target="_blank">ZMediumToMarkdown</a>.</p><p>© 2024 <a href="https://medium.com/@zhgchgli">ZhgChgLi</a>. <span data-bs-toggle="tooltip" data-bs-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author." >All rights reserved.</span></p></div></div></footer><div id="mask"></div><button id="back-to-top" aria-label="back-to-top" class="btn btn-lg btn-box-shadow"> <i class="fas fa-angle-up"></i> </button><div id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-bs-animation="true" data-bs-autohide="false" ><div class="toast-header"> <button type="button" class="btn-close ms-auto" data-bs-dismiss="toast" aria-label="Close" ></button></div><div class="toast-body text-center pt-0"><p class="px-2 mb-3">A new version of content is available.</p><button type="button" class="btn btn-primary" aria-label="Update"> Update </button></div></div><script src="https://cdn.jsdelivr.net/combine/npm/jquery@3.7.0/dist/jquery.min.js,npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js,npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js,npm/lazysizes@5.3.2/lazysizes.min.js,npm/magnific-popup@1.1.0/dist/jquery.magnific-popup.min.js,npm/clipboard@2.0.11/dist/clipboard.min.js,npm/dayjs@1.11.7/dayjs.min.js,npm/dayjs@1.11.7/locale/en.min.js,npm/dayjs@1.11.7/plugin/relativeTime.min.js,npm/dayjs@1.11.7/plugin/localizedFormat.min.js,npm/tocbot@4.21.0/dist/tocbot.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-JSGN97L56L"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-JSGN97L56L'); }); </script> <script> /* Note: dependent library will be loaded in `js-selector.html` */ SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="px-1 px-sm-2 px-lg-4 px-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5"></p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="me-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script>
