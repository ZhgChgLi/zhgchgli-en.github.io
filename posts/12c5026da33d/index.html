<!doctype html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="viewport" content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover" ><meta name="generator" content="Jekyll v4.3.2" /><meta property="og:title" content="What’s New with Universal Links" /><meta name="author" content="ZhgChgLi" /><meta property="og:locale" content="en" /><meta name="description" content="iOS 13, iOS 14 What’s New with Universal Links &amp; Setting Up a Local Testing Environment" /><meta property="og:description" content="iOS 13, iOS 14 What’s New with Universal Links &amp; Setting Up a Local Testing Environment" /><link rel="canonical" href="https://en.zhgchg.li/posts/12c5026da33d/" /><meta property="og:url" content="https://en.zhgchg.li/posts/12c5026da33d/" /><meta property="og:site_name" content="ZhgChgLi" /><meta property="og:image" content="https://en.zhgchg.li/assets/12c5026da33d/1*HYAd1aal5Et1A-Qzs6VAtQ.jpeg" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-02-04T11:57:25+08:00" /><meta name="twitter:card" content="summary_large_image" /><meta property="twitter:image" content="https://en.zhgchg.li/assets/12c5026da33d/1*HYAd1aal5Et1A-Qzs6VAtQ.jpeg" /><meta property="twitter:title" content="What’s New with Universal Links" /><meta name="twitter:site" content="@zhgchgli" /><meta name="twitter:creator" content="@ZhgChgLi" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"ZhgChgLi"},"dateModified":"2024-09-13T17:31:54+08:00","datePublished":"2021-02-04T11:57:25+08:00","description":"iOS 13, iOS 14 What’s New with Universal Links &amp; Setting Up a Local Testing Environment","headline":"What’s New with Universal Links","image":"https://en.zhgchg.li/assets/12c5026da33d/1*HYAd1aal5Et1A-Qzs6VAtQ.jpeg","mainEntityOfPage":{"@type":"WebPage","@id":"https://en.zhgchg.li/posts/12c5026da33d/"},"url":"https://en.zhgchg.li/posts/12c5026da33d/"}</script><title>What's New with Universal Links | ZhgChgLi</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="ZhgChgLi"><meta name="application-name" content="ZhgChgLi"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.21.0/dist/tocbot.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return 'mode'; } static get MODE_ATTR() { return 'data-mode'; } static get DARK_MODE() { return 'dark'; } static get LIGHT_MODE() { return 'light'; } static get ID() { return 'mode-toggle'; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener('change', () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia('(prefers-color-scheme: dark)'); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { document.documentElement.setAttribute(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { document.documentElement.setAttribute(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { document.documentElement.removeAttribute(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage( { direction: ModeToggle.ID, message: this.modeStatus }, '*' ); } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.notify(); } /* flipMode() */ } /* ModeToggle */ const modeToggle = new ModeToggle(); </script><body><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper"> <a href="/" id="avatar" class="rounded-circle"> <img src="/assets/images/zhgchgli.jpg" width="112" height="112" alt="avatar" onerror="this.style.display='none'"> </a><div class="site-title"> <a href="/">ZhgChgLi</a></div><div class="site-subtitle fst-italic">Live a life you will remember.</div></div><ul class="nav flex-column flex-grow-1 w-100 ps-0"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle"></i> <span>ABOUT</span> </a><li class="nav-item"> <a href="/real/" class="nav-link"> <i class="fa-fw fa fa-camera-retro"></i> <span>REAL LIFE</span> </a><li class="nav-item"> <a href="/contact/" class="nav-link"> <i class="fa-fw fa fa-envelope-open"></i> <span>CONTACT</span> </a></ul><div class="sidebar-bottom d-flex flex-wrap align-items-center w-100"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://link.zhgchg.li" aria-label="link" target="_blank" rel="noopener noreferrer" > <i class="fas fa-link"></i> </a> <a href="https://www.linkedin.com/in/zhgchgli" aria-label="linkedin" target="_blank" rel="noopener noreferrer" > <i class="fab fa-linkedin"></i> </a> <a href="javascript:location.href = 'mailto:' + ['zhgchgli','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container px-xxl-5"><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100" > <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>What's New with Universal Links</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..." > </span> <span id="search-cancel">Cancel</span></div></div><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pe-xl-4"><div class="post px-1 px-md-2"><h1 data-toc-skip>What's New with Universal Links</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1612411045" data-df="ll" data-bs-toggle="tooltip" data-bs-placement="bottom" > Feb 4, 2021 </em> </span> <span> Updated <em class="" data-ts="1726219914" data-df="ll" data-bs-toggle="tooltip" data-bs-placement="bottom" > Sep 13, 2024 </em> </span><div class="mt-3 mb-3"> <a href="/assets/12c5026da33d/1*HYAd1aal5Et1A-Qzs6VAtQ.jpeg" class="popup img-link preview-img shimmer"><img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1200 630'%3E%3C/svg%3E" data-src="/assets/12c5026da33d/1*HYAd1aal5Et1A-Qzs6VAtQ.jpeg" alt="Preview Image" width="1200" height="630" class="lazyload" data-proofer-ignore></a></div><div class="d-flex justify-content-between"> <span> By <em> <a href=""></a> </em> </span><div> <span class="readtime" data-bs-toggle="tooltip" data-bs-placement="bottom" title="2157 words" > <em>11 min</em> read</span></div></div></div><div class="post-content"> <widgetic id="64ce7263ecb2a197598b4567" resize="fill" width="560" height="60" autoscale="on" adaptive="414"></widgetic><script async src="https://widgetic.com/sdk/sdk.js"></script><h3 id="whats-new-with-universal-links"><span class="me-2">What’s New with Universal Links</span><a href="#whats-new-with-universal-links" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>iOS 13, iOS 14 What’s New with Universal Links &amp; Setting Up a Local Testing Environment</p><p><a href="/assets/12c5026da33d/1*HYAd1aal5Et1A-Qzs6VAtQ.jpeg" class="popup img-link "><img data-src="/assets/12c5026da33d/1*HYAd1aal5Et1A-Qzs6VAtQ.jpeg" alt="Photo by [NASA](https://unsplash.com/@nasa?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText){:target=&quot;_blank&quot;}" class="lazyload" data-proofer-ignore></a></p><p>Photo by <a href="https://unsplash.com/@nasa?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" target="_blank">NASA</a></p><h3 id="preface"><span class="me-2">Preface</span><a href="#preface" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>For a service that has both a website and an app, the functionality of Universal Links is crucial for user experience, achieving seamless integration between the web and the app. However, it has always been set up simply without much emphasis. Recently, I spent some time researching and documenting some interesting things.</p><h3 id="common-considerations"><span class="me-2">Common Considerations</span><a href="#common-considerations" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>In services I have worked on, the consideration for implementing Universal Links is that the app does not have complete website functionality. Universal Links recognize the domain name, and as long as the domain name matches, the app will open. To address this issue, you can exclude URLs on the app that do not have corresponding functionality on the website. If the website service URLs are very specific, it may be better to create a new subdomain for Universal Links.</p><h3 id="when-does-apple-app-site-association-update"><span class="me-2">When does apple-app-site-association update?</span><a href="#when-does-apple-app-site-association-update" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li>For iOS &lt; 14, the app will query the apple-app-site-association of the Universal Links website during the first installation or update.<li>For iOS ≥ 14, Apple CDN caches and periodically updates the apple-app-site-association of the Universal Links website. The app will fetch it from Apple CDN during the first installation or update. However, there may be a problem here as the apple-app-site-association on Apple CDN may still be outdated.</ul><p>Regarding the update mechanism of Apple CDN, after checking the documentation, there is no mention of it. In a <a href="https://developer.apple.com/forums/thread/651737" target="_blank">discussion</a>, the official response was only “regular updates” with details to be released in the documentation… but I have not seen it yet.</p><blockquote><p><em>I personally think it should be updated at least every 48 hours… so if you make changes to apple-app-site-association, it is recommended to update it online a few days before the app update is released.</em></p></blockquote><h4 id="apple-app-site-association-apple-cdn-confirmation"><span class="me-2">apple-app-site-association Apple CDN Confirmation:</span><a href="#apple-app-site-association-apple-cdn-confirmation" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>Headers: HOST=app-site-association.cdn-apple.com
GET https://app-site-association.cdn-apple.com/a/v1/your-domain
</pre></table></code></div></div><p><a href="/assets/12c5026da33d/1*dgDfMgkFPUfeuAuEhl7RFQ.png" class="popup img-link "><img data-src="/assets/12c5026da33d/1*dgDfMgkFPUfeuAuEhl7RFQ.png" alt="" class="lazyload" data-proofer-ignore></a></p><p>You can see the current version on Apple CDN. (Remember to add Request Header <code class="language-plaintext highlighter-rouge">Host=https://app-site-association.cdn-apple.com/</code>)</p><h4 id="ios--14-debug"><span class="me-2">iOS ≥ 14 Debug</span><a href="#ios--14-debug" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Due to the aforementioned CDN issue, how can we debug during the development phase?</p><p>Fortunately, Apple provides a solution for this part, otherwise it would be really frustrating not being able to update in real-time; we just need to add <code class="language-plaintext highlighter-rouge">?mode=developer</code> after <code class="language-plaintext highlighter-rouge">applinks:domain.com</code>, and there are also <code class="language-plaintext highlighter-rouge">managed (for enterprise internal APP)</code> or <code class="language-plaintext highlighter-rouge">developer+managed</code> modes that can be set.</p><p><a href="/assets/12c5026da33d/1*z4R7wEHHAlLyF1rdAEAmew.png" class="popup img-link "><img data-src="/assets/12c5026da33d/1*z4R7wEHHAlLyF1rdAEAmew.png" alt="" class="lazyload" data-proofer-ignore></a></p><p>After adding <code class="language-plaintext highlighter-rouge">mode=developer</code>, the app will fetch the latest app-site-association directly from the website every time you Build &amp; Run on the simulator.</p><p>If you want to Build &amp; Run on a real device, you need to go to “Settings” -&gt; “Developer” -&gt; enable the “Associated Domains Development” option.</p><p><a href="/assets/12c5026da33d/1*gj4Qm445mFERa25t6PZV1Q.jpeg" class="popup img-link "><img data-src="/assets/12c5026da33d/1*gj4Qm445mFERa25t6PZV1Q.jpeg" alt="" class="lazyload" data-proofer-ignore></a></p><blockquote><p>⚠️ <strong>There is a pitfall here</strong>, app-site-association can be placed in the root directory of the website or in the <code class="language-plaintext highlighter-rouge">./.well-known</code> directory; but in <code class="language-plaintext highlighter-rouge">mode=developer</code>, it will only look for <code class="language-plaintext highlighter-rouge">./.well-known/app-site-association</code>, which made me think it wasn’t working.</p></blockquote><h3 id="development-testing"><span class="me-2">Development Testing</span><a href="#development-testing" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>If you are using iOS &lt;14, remember that if you have made changes to app-site-association, you need to delete it and then Build &amp; Run the app again to fetch the latest one. For iOS ≥ 14, please refer to the aforementioned method and add <code class="language-plaintext highlighter-rouge">mode=developer</code>.</p><p>For better modification of the app-site-association content, you can modify the file on the server yourself. However, for those of us who sometimes cannot access the server side, testing universal links can be very troublesome. You have to constantly bother backend colleagues for help, and it becomes necessary to be very certain about the app-site-association content before going live, as constantly changing it can drive your colleagues crazy.</p><h4 id="setting-up-a-local-simulation-environment"><span class="me-2">Setting up a Local Simulation Environment</span><a href="#setting-up-a-local-simulation-environment" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>To solve the above problem, we can set up a small service locally.</p><p>First, install nginx on your Mac:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>brew <span class="nb">install </span>nginx
</pre></table></code></div></div><p>If you haven’t installed <a href="https://brew.sh/index_zh-tw" target="_blank">brew</a> yet, you can do so by running:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>/bin/bash <span class="nt">-c</span> <span class="s2">"</span><span class="si">$(</span>curl <span class="nt">-fsSL</span> https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh<span class="si">)</span><span class="s2">"</span>
</pre></table></code></div></div><p>After installing nginx, go to <code class="language-plaintext highlighter-rouge">/usr/local/etc/nginx/</code> and open the <code class="language-plaintext highlighter-rouge">nginx.conf</code> file for editing:</p><div class="language-perl highlighter-rouge"><div class="code-header"> <span data-label-text="Perl"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre><span class="o">...</span><span class="nv">omitted</span>
<span class="nv">server</span> <span class="p">{</span>
        <span class="nb">listen</span>       <span class="mi">8080</span><span class="p">;</span>
        <span class="nv">server_name</span>  <span class="nv">localhost</span><span class="p">;</span>
<span class="c1">#charset koi8-r;</span>
<span class="c1">#access_log  logs/host.access.log  main;</span>
<span class="nv">location</span> <span class="o">/</span> <span class="p">{</span>
            <span class="nv">root</span>   <span class="sr">/Users/</span><span class="nv">yourusername</span><span class="o">/</span><span class="nv">Documents</span><span class="p">;</span>
            <span class="nb">index</span>  <span class="nb">index</span><span class="o">.</span><span class="nv">html</span> <span class="nb">index</span><span class="o">.</span><span class="nv">htm</span><span class="p">;</span>
        <span class="p">}</span>
<span class="o">...</span><span class="nv">omitted</span>
</pre></table></code></div></div><p>Around line 44, change the <code class="language-plaintext highlighter-rouge">root</code> in the <code class="language-plaintext highlighter-rouge">location /</code> to the directory you want (using Documents as an example here).</p><blockquote><p><em>Listening on port <strong>8080</strong>, no need to change if there are no conflicts.</em></p></blockquote><p>Save the changes, then start nginx by running:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>nginx
</pre></table></code></div></div><p>To stop it, run:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>nginx <span class="nt">-s</span> stop
</pre></table></code></div></div><p>If you make changes to <code class="language-plaintext highlighter-rouge">nginx.conf</code>, remember to run:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>nginx <span class="nt">-s</span> reload
</pre></table></code></div></div><p>to restart the service.</p><p>Create a <code class="language-plaintext highlighter-rouge">./.well-known</code> directory inside the <code class="language-plaintext highlighter-rouge">root</code> directory you just configured, and place the <code class="language-plaintext highlighter-rouge">apple-app-site-association</code> file inside <code class="language-plaintext highlighter-rouge">./.well-known</code>.</p><blockquote><p>⚠️ If <code class="language-plaintext highlighter-rouge">.well-known</code> disappears after creation, please note that on Mac, you need to enable “Show hidden files” feature:</p></blockquote><p>In the terminal, run:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>defaults write com.apple.finder AppleShowAllFiles TRUE
</pre></table></code></div></div><p>Then run <code class="language-plaintext highlighter-rouge">killall finder</code> to restart all finders.</p><p><a href="/assets/12c5026da33d/1*AzM6lK0kzT-M-2OdXoyIXA.png" class="popup img-link "><img data-src="/assets/12c5026da33d/1*AzM6lK0kzT-M-2OdXoyIXA.png" alt="" class="lazyload" data-proofer-ignore></a></p><blockquote><p><em>⚠️</em> The <code class="language-plaintext highlighter-rouge">apple-app-site-association</code> file may not have an extension, but it actually has the <code class="language-plaintext highlighter-rouge">.json</code> extension:</p></blockquote><p>Right-click on the file -&gt; “Get Info” -&gt; “Name &amp; Extension” -&gt; Check for the extension and uncheck “Hide extension” if necessary.</p><p><a href="/assets/12c5026da33d/1*UFwnnjCot8xRqslhdQktKg.png" class="popup img-link "><img data-src="/assets/12c5026da33d/1*UFwnnjCot8xRqslhdQktKg.png" alt="" class="lazyload" data-proofer-ignore></a></p><p>Once confirmed, open the browser to test if the following link can be downloaded successfully: apple-app-site-association at:</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>http://localhost:8080/.well-known/apple-app-site-association
</pre></table></code></div></div><p>If the download is successful, it means the local environment simulation is successful!</p><blockquote><p><em>If you encounter a 404/403 error, please check if the root directory is correct, if the directory/file is placed correctly, and if the apple-app-site-association file accidentally includes the extension (<code class="language-plaintext highlighter-rouge">.json</code>).</em></p></blockquote><p><strong>Register &amp; Download <a href="http://ngrok.com" target="_blank">Ngrok</a></strong></p><p><a href="/assets/12c5026da33d/1*Shk9u59HgRRSiMw0wt899Q.png" class="popup img-link "><img data-src="/assets/12c5026da33d/1*Shk9u59HgRRSiMw0wt899Q.png" alt="[ngrok.com](https://dashboard.ngrok.com/get-started/setup){:target=&quot;_blank&quot;}" class="lazyload" data-proofer-ignore></a></p><p><a href="https://dashboard.ngrok.com/get-started/setup" target="_blank">ngrok.com</a></p><p><a href="/assets/12c5026da33d/1*ljBqKrOFb9Gq48dO0GeIeA.png" class="popup img-link "><img data-src="/assets/12c5026da33d/1*ljBqKrOFb9Gq48dO0GeIeA.png" alt="Extract the ngrok executable" class="lazyload" data-proofer-ignore></a></p><p>Extract the ngrok executable</p><p><a href="/assets/12c5026da33d/1*fnEUyJMtVhUGurU5vX5K6A.png" class="popup img-link "><img data-src="/assets/12c5026da33d/1*fnEUyJMtVhUGurU5vX5K6A.png" alt="Access the [Dashboard page](https://dashboard.ngrok.com/get-started/setup){:target=&quot;_blank&quot;} to execute Config settings" class="lazyload" data-proofer-ignore></a></p><p>Access the <a href="https://dashboard.ngrok.com/get-started/setup" target="_blank">Dashboard page</a> to execute Config settings</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>./ngrok authtoken YOUR_TOKEN
</pre></table></code></div></div><p>After setting up, run:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>./ngrok http 8080
</pre></table></code></div></div><blockquote><p><em>Because our nginx is on port 8080.</em></p></blockquote><p>Start the service.</p><p><a href="/assets/12c5026da33d/1*8i6EP7KKwxihLZ1PG1RUGw.png" class="popup img-link "><img data-src="/assets/12c5026da33d/1*8i6EP7KKwxihLZ1PG1RUGw.png" alt="" class="lazyload" data-proofer-ignore></a></p><p>At this point, you will see a window showing the status of the service startup, and you can obtain the public URL assigned for this session from the Forwarding section.</p><blockquote><p><em>⚠️ <strong>The assigned URL changes every time you start, so it can only be used for development testing purposes.</strong></em></p></blockquote><blockquote><p><em><strong>Here, we will use the assigned URL for this session</strong> <code class="language-plaintext highlighter-rouge">https://ec87f78bec0f.ngrok.io/</code> _as an example.</em></p></blockquote><p>Return to the browser and enter <code class="language-plaintext highlighter-rouge">https://ec87f78bec0f.ngrok.io/.well-known/apple-app-site-association</code> to see if you can successfully download and view the apple-app-site-association file. If everything is fine, you can proceed to the next step.</p><p>Enter the ngrok-assigned URL into the Associated Domains applinks: settings.</p><p><a href="/assets/12c5026da33d/1*K5Eio0Yi7nNHQuLSuIsYeA.png" class="popup img-link "><img data-src="/assets/12c5026da33d/1*K5Eio0Yi7nNHQuLSuIsYeA.png" alt="" class="lazyload" data-proofer-ignore></a></p><p>Remember to add <code class="language-plaintext highlighter-rouge">?mode=developer</code> for testing purposes.</p><p><strong>Rebuild &amp; Run the APP:</strong></p><p><a href="/assets/12c5026da33d/1*VFIKU-UxCHNQVnf8DOV8Qw.png" class="popup img-link "><img data-src="/assets/12c5026da33d/1*VFIKU-UxCHNQVnf8DOV8Qw.png" alt="" class="lazyload" data-proofer-ignore></a></p><p>Open the browser and enter the corresponding Universal Links test URL (e.g., <code class="language-plaintext highlighter-rouge">https://ec87f78bec0f.ngrok.io/buy/123</code>) to see the results.</p><blockquote><p><em>If a 404 page appears, ignore it as we don’t actually have that page. We are testing if iOS matches the URL functionality as expected. If you see “Open” above, it means the match is successful. You can also test the reverse scenario.</em></p></blockquote><p>Click “Open” to open the APP -&gt; Test successful!</p><blockquote><p><em>After testing OK in the development phase, confirming the modified apple-app-site-association file and handing it over to the backend for uploading to the server can ensure everything goes smoothly~</em></p></blockquote><blockquote><p><em>Finally, remember to change the Associated Domains applinks to the correct trial site URL.</em></p></blockquote><p>Additionally, we can also check whether the apple-app-site-association file is requested each time the APP Build &amp; Run is executed from the ngrok status window:</p><p><a href="/assets/12c5026da33d/1*d6yvnEaiOPbqy57PDMe2Mw.png" class="popup img-link "><img data-src="/assets/12c5026da33d/1*d6yvnEaiOPbqy57PDMe2Mw.png" alt="" class="lazyload" data-proofer-ignore></a></p><h3 id="applinks-configuration"><span class="me-2">Applinks Configuration</span><a href="#applinks-configuration" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><h4 id="before-ios--13"><span class="me-2">Before iOS &lt; 13:</span><a href="#before-ios--13" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>The configuration file is relatively simple, and only the following content can be set:</p><div class="language-json highlighter-rouge"><div class="code-header"> <span data-label-text="JSON"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre><td class="rouge-code"><pre><span class="p">{</span><span class="w">
  </span><span class="nl">"applinks"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"apps"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
      </span><span class="nl">"details"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
           </span><span class="p">{</span><span class="w">
             </span><span class="nl">"appID"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"TeamID.BundleID"</span><span class="p">,</span><span class="w">
             </span><span class="nl">"paths"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
               </span><span class="s2">"NOT /help/"</span><span class="p">,</span><span class="w">
               </span><span class="s2">"*"</span><span class="w">
             </span><span class="p">]</span><span class="w">
           </span><span class="p">}</span><span class="w">
       </span><span class="p">]</span><span class="w">
   </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre></table></code></div></div><p>Replace <code class="language-plaintext highlighter-rouge">TeamID.BundleId</code> with your project settings (ex: TeamID = <code class="language-plaintext highlighter-rouge">ABCD</code>, BundleID = <code class="language-plaintext highlighter-rouge">li.zhgchg.demoapp</code> =&gt; <code class="language-plaintext highlighter-rouge">ABCD.li.zhgchg.demoapp</code>).</p><blockquote><p><em>If there are multiple appIDs, you need to add multiple sets.</em></p></blockquote><p><strong>The <code class="language-plaintext highlighter-rouge">paths</code> section represents the matching rules, supporting the following syntax:</strong></p><ul><li><code class="language-plaintext highlighter-rouge">*</code>: Matches 0 to multiple characters, ex: <code class="language-plaintext highlighter-rouge">/home/*</code> (home/alan…)<li><code class="language-plaintext highlighter-rouge">?</code>: Matches 1 character, ex: <code class="language-plaintext highlighter-rouge">201?</code> (2010~2019)<li><code class="language-plaintext highlighter-rouge">?*</code>: Matches 1 to multiple characters, ex: <code class="language-plaintext highlighter-rouge">/?*</code> (/test, /home…)<li><code class="language-plaintext highlighter-rouge">NOT</code>: Excludes in reverse, ex: <code class="language-plaintext highlighter-rouge">NOT /help</code> (any URL but /help)</ul><p>You can decide on more combinations based on the actual situation, for more information, refer to the <a href="https://developer.apple.com/library/archive/documentation/General/Conceptual/AppSearch/UniversalLinks.html#//apple_ref/doc/uid/TP40016308-CH12-SW1" target="_blank">official documentation</a>.</p><blockquote><p><em>- Please note, it is not Regex and does not support any Regex syntax.</em> <em>- The old version does not support Query (?name=123) and Anchor (#title).</em> <em>- Chinese URLs must be converted to ASCII before being placed in paths (all URL characters must be ASCII).</em></p></blockquote><h4 id="after-ios--13"><span class="me-2">After iOS ≥ 13:</span><a href="#after-ios--13" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>The functionality of the configuration file has been enhanced, with added support for Query/Anchor, character sets, and encoding handling.</p><div class="language-json highlighter-rouge"><div class="code-header"> <span data-label-text="JSON"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
</pre><td class="rouge-code"><pre><span class="nl">"applinks"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="nl">"details"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"appIDs"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">"TeamID.BundleID"</span><span class="w"> </span><span class="p">],</span><span class="w">
      </span><span class="nl">"components"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"#"</span><span class="p">:</span><span class="w"> </span><span class="s2">"no_universal_links"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"exclude"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
          </span><span class="nl">"comment"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Matches any URL whose fragment equals no_universal_links and instructs the system not to open it as a universal link"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"/"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/buy/*"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"comment"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Matches any URL whose path starts with /buy/"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"/"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/help/website/*"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"exclude"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
          </span><span class="nl">"comment"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Matches any URL whose path starts with /help/website/ and instructs the system not to open it as a universal link"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"/"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/help/*"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"?"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"articleNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"????"</span><span class="w"> </span><span class="p">},</span><span class="w">
          </span><span class="nl">"comment"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Matches any URL whose path starts with /help/ and that has a query item with name 'articleNumber' and a value of exactly 4 characters"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre></table></code></div></div><p>Copied content:</p><p><code class="language-plaintext highlighter-rouge">appIDs</code> is an array that can contain multiple appIDs, so you don’t have to repeat the entire block as before.</p><blockquote><p><em>WWDC mentioned compatibility with the old version, <strong>when iOS ≥ 13 reads the new format, it will ignore the old paths</strong>.</em></p></blockquote><p>The matching rules are now placed in <code class="language-plaintext highlighter-rouge">components</code>; supporting 3 types:</p><ul><li><code class="language-plaintext highlighter-rouge">/</code>: URL<li><code class="language-plaintext highlighter-rouge">?</code>: Query, ex: ?name=123&amp;place=tw<li><code class="language-plaintext highlighter-rouge">#</code>: Anchor, ex: #title</ul><p>They can be used together. For example, if only <code class="language-plaintext highlighter-rouge">/user/?id=100#detail</code> needs to jump to the app, it can be written as:</p><div class="language-json highlighter-rouge"><div class="code-header"> <span data-label-text="JSON"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="p">{</span><span class="w">
  </span><span class="nl">"/"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/user/*"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"?"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"*"</span><span class="w"> </span><span class="p">},</span><span class="w">
  </span><span class="nl">"#"</span><span class="p">:</span><span class="w"> </span><span class="s2">"detail"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre></table></code></div></div><p>The matching syntax remains the same as the original syntax, also supporting <code class="language-plaintext highlighter-rouge">*</code>, <code class="language-plaintext highlighter-rouge">?</code>, <code class="language-plaintext highlighter-rouge">?*</code>.</p><p>Added <code class="language-plaintext highlighter-rouge">comment</code> field for comments to help identification. (But please note that this is public and visible to others)</p><p>Reverse exclusion is now specified with <code class="language-plaintext highlighter-rouge">exclude: true</code>.</p><p>Added <code class="language-plaintext highlighter-rouge">caseSensitive</code> feature to specify whether the matching rules are case-sensitive, <code class="language-plaintext highlighter-rouge">default: true</code>. This can reduce the number of rules needed if required.</p><p>Added <code class="language-plaintext highlighter-rouge">percentEncoded</code> as mentioned earlier, in the old version, URLs needed to be converted to ASCII and placed in paths first (if it’s Chinese characters, it will look ugly and unrecognizable); this parameter specifies whether to automatically encode for us, <code class="language-plaintext highlighter-rouge">default is true</code>. If it’s a Chinese URL, it can be directly included (ex: <code class="language-plaintext highlighter-rouge">/customer service</code> ).</p><p>For detailed official documentation, refer to <a href="https://developer.apple.com/documentation/bundleresources/applinks/details/components" target="_blank">this</a>.</p><p><strong>Default character sets:</strong></p><p>This is one of the important features of this update, adding support for character sets.</p><p>System-defined character sets:</p><ul><li><code class="language-plaintext highlighter-rouge">$(alpha)</code>: A-Z and a-z<li><code class="language-plaintext highlighter-rouge">$(upper)</code>: A-Z<li><code class="language-plaintext highlighter-rouge">$(lower)</code>: a-z<li><code class="language-plaintext highlighter-rouge">$(alnum)</code>: A-Z, a-z, and 0–9<li><code class="language-plaintext highlighter-rouge">$(digit)</code>: 0–9<li><code class="language-plaintext highlighter-rouge">$(xdigit)</code>: Hexadecimal characters, 0–9 and a,b,c,d,e,f,A,B,C,D,E,F<li><code class="language-plaintext highlighter-rouge">$(region)</code>: ISO region codes <a href="https://developer.apple.com/documentation/foundation/locale/2293271-isoregioncodes" target="_blank">isoRegionCodes</a>, Ex: TW<li><code class="language-plaintext highlighter-rouge">$(lang)</code>: ISO language codes <a href="https://developer.apple.com/documentation/foundation/locale/2293744-isolanguagecodes" target="_blank">isoLanguageCodes</a>, Ex: zh</ul><p>If our URL has multiple languages and we want to support Universal links, we can set it up like this:</p><div class="language-json highlighter-rouge"><div class="code-header"> <span data-label-text="JSON"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="nl">"components"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">        
     </span><span class="p">{</span><span class="w"> </span><span class="nl">"/"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"/$(lang)-$(region)/$(food)/home"</span><span class="w"> </span><span class="p">}</span><span class="w">      
</span><span class="p">]</span><span class="w">
</span></pre></table></code></div></div><p>This way, both <code class="language-plaintext highlighter-rouge">/zh-TW/home</code> and <code class="language-plaintext highlighter-rouge">/en-US/home</code> will be supported, making it very convenient without having to write a long list of rules!</p><p><strong>Custom character sets:</strong></p><p>In addition to the default character sets, we can also define custom character sets for increased configurability and readability.</p><p>Simply add <code class="language-plaintext highlighter-rouge">substitutionVariables</code> in <code class="language-plaintext highlighter-rouge">applinks</code>:</p><div class="language-json highlighter-rouge"><div class="code-header"> <span data-label-text="JSON"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre><td class="rouge-code"><pre><span class="p">{</span><span class="w">
  </span><span class="nl">"applinks"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"substitutionVariables"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"food"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">"burrito"</span><span class="p">,</span><span class="w"> </span><span class="s2">"pizza"</span><span class="p">,</span><span class="w"> </span><span class="s2">"sushi"</span><span class="p">,</span><span class="w"> </span><span class="s2">"samosa"</span><span class="w"> </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"details"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
      </span><span class="nl">"appIDs"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">],</span><span class="w">
      </span><span class="nl">"components"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w"> </span><span class="nl">"/"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"/$(food)/"</span><span class="w"> </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">}]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre></table></code></div></div><p>In this example, a custom <code class="language-plaintext highlighter-rouge">food</code> character set is defined and used in subsequent <code class="language-plaintext highlighter-rouge">components</code>.</p><p>The example can match <code class="language-plaintext highlighter-rouge">/burrito</code>, <code class="language-plaintext highlighter-rouge">/pizza</code>, <code class="language-plaintext highlighter-rouge">/sushi</code>, <code class="language-plaintext highlighter-rouge">/samosa</code>.</p><p>For more details, refer to <a href="https://developer.apple.com/documentation/bundleresources/applinks/substitutionvariables" target="_blank">this article</a> in the official documentation.</p><h4 id="no-inspiration"><span class="me-2">No inspiration?</span><a href="#no-inspiration" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>If you don’t have any inspiration for the content of the configuration file, you can secretly refer to the content of other websites. Just add <code class="language-plaintext highlighter-rouge">/app-site-association</code> or <code class="language-plaintext highlighter-rouge">/.well-known/app-site-association</code> to the homepage URL of the service website to read their configuration.</p><p>For example: <a href="https://www.netflix.com/apple-app-site-association" target="_blank">https://www.netflix.com/apple-app-site-association</a></p><h3 id="supplement"><span class="me-2">Supplement</span><a href="#supplement" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>In the case of using <code class="language-plaintext highlighter-rouge">SceneDelegate</code>, the entry point for opening universal links is in the SceneDelegate:</p><div class="language-swift highlighter-rouge"><div class="code-header"> <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="kd">func</span> <span class="nf">scene</span><span class="p">(</span><span class="n">_</span> <span class="nv">scene</span><span class="p">:</span> <span class="kt">UIScene</span><span class="p">,</span> <span class="k">continue</span> <span class="nv">userActivity</span><span class="p">:</span> <span class="kt">NSUserActivity</span><span class="p">)</span>
</pre></table></code></div></div><p><strong>Instead of in AppDelegate:</strong></p><div class="language-swift highlighter-rouge"><div class="code-header"> <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="kd">func</span> <span class="nf">application</span><span class="p">(</span><span class="n">_</span> <span class="nv">application</span><span class="p">:</span> <span class="kt">UIApplication</span><span class="p">,</span> <span class="k">continue</span> <span class="nv">userActivity</span><span class="p">:</span> <span class="kt">NSUserActivity</span><span class="p">,</span> <span class="nv">restorationHandler</span><span class="p">:</span> <span class="kd">@escaping</span> <span class="p">([</span><span class="kt">UIUserActivityRestoring</span><span class="p">]?)</span> <span class="o">-&gt;</span> <span class="kt">Void</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Bool</span>
</pre></table></code></div></div><h3 id="further-reading"><span class="me-2">Further Reading</span><a href="#further-reading" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li><a href="../948ed34efa09/">iOS Cross-Platform Account Password Integration, Enhancing Login Experience</a><li><a href="../b08ef940c196/">iOS Deferred Deep Link Implementation (Swift)</a></ul><h4 id="references"><span class="me-2">References</span><a href="#references" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><ul><li><a href="https://www.wwdcnotes.com/notes/wwdc20/10098/" target="_blank">What’s new in Universal Links</a><li><a href="https://developer.apple.com/documentation/bundleresources/applinks" target="_blank">Apple Documentation</a></ul><p>If you have any questions or suggestions, feel free to <a href="https://www.zhgchg.li/contact" target="_blank">contact me</a>.</p><p>===</p><p><a href="https://zhgchg.li/posts/12c5026da33d/" target="_blank">本文中文版本</a></p><p>===</p><p>This article was first published in Traditional Chinese on Medium ➡️ <a href="https://medium.com/p/12c5026da33d" target="_blank"><strong>View Here</strong></a></p><widgetic id="64ce71d5ecb2a165598b4567" resize="fill" width="560" height="60" autoscale="on" adaptive="414"></widgetic><script async src="https://widgetic.com/sdk/sdk.js"></script></div><hr/> <a href="https://www.buymeacoffee.com/zhgchgli" target="_blank" class="img-link shimmer" ><img data-src="https://img.buymeacoffee.com/button-api/?text=Buy me a beer!&emoji=🍺&slug=zhgchgli&button_colour=FFDD00&font_colour=000000&font_family=Bree&outline_colour=000000&coffee_colour=ffffff" class="lazyload" data-proofer-ignore></a> <br/> <a href="https://medium.com/@zhgchgli" target="_blank" class="img-link shimmer" ><img data-src="/assets/images/followmymedium.png" class="lazyload" data-proofer-ignore></a> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3184248473087645" crossorigin="anonymous"></script> <ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-3184248473087645" data-ad-slot="7555148040"></ins> <script> (adsbygoogle = window.adsbygoogle || []).push({}); </script><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw me-1"></i> <a href='/categories/zrealm/'>ZRealm</a>, <a href='/categories/dev/'>Dev.</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw me-1"></i> <a href="/tags/ios/" class="post-tag no-text-decoration" >ios</a> <a href="/tags/ios-app-development/" class="post-tag no-text-decoration" >ios-app-development</a> <a href="/tags/universal-links/" class="post-tag no-text-decoration" >universal-links</a> <a href="/tags/app-store/" class="post-tag no-text-decoration" >app-store</a> <a href="/tags/deeplink/" class="post-tag no-text-decoration" >deeplink</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted me-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=What's%20New%20with%20Universal%20Links%20-%20ZhgChgLi&url=https%3A%2F%2Fen.zhgchg.li%2Fposts%2F12c5026da33d%2F" data-bs-toggle="tooltip" data-bs-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter" > <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=What's%20New%20with%20Universal%20Links%20-%20ZhgChgLi&u=https%3A%2F%2Fen.zhgchg.li%2Fposts%2F12c5026da33d%2F" data-bs-toggle="tooltip" data-bs-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook" > <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fen.zhgchg.li%2Fposts%2F12c5026da33d%2F" data-bs-toggle="tooltip" data-bs-placement="top" title="Linkedin" target="_blank" rel="noopener" aria-label="Linkedin" > <i class="fa-fw fab fa-linkedin"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-bs-toggle="tooltip" data-bs-placement="top" title="Copy link" data-title-succeed="Link copied successfully!" > </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 ps-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content list-unstyled ps-0 pb-1 ms-1 mt-2"><li class="text-truncate lh-lg"> <a href="/posts/d9a95d4224ea/">Medium Custom Domain Feature Returns</a><li class="text-truncate lh-lg"> <a href="/posts/483af5d93297/">Custom Domain Tutorial for Github Pages</a><li class="text-truncate lh-lg"> <a href="/posts/9e43897d99fc/">Behavior Change in Merging NSAttributedString Attributes Range in iOS ≥ 18</a><li class="text-truncate lh-lg"> <a href="/posts/b08ef940c196/">iOS Deferred Deep Link Implementation (Swift)</a><li class="text-truncate lh-lg"> <a href="/posts/12c5026da33d/">What's New with Universal Links</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/ios-app-development/">ios-app-development</a> <a class="post-tag btn btn-outline-primary" href="/tags/ios/">ios</a> <a class="post-tag btn btn-outline-primary" href="/tags/swift/">swift</a> <a class="post-tag btn btn-outline-primary" href="/tags/life/">life</a> <a class="post-tag btn btn-outline-primary" href="/tags/medium/">medium</a> <a class="post-tag btn btn-outline-primary" href="/tags/unboxing/">unboxing</a> <a class="post-tag btn btn-outline-primary" href="/tags/life/">Life</a> <a class="post-tag btn btn-outline-primary" href="/tags/japan/">japan</a> <a class="post-tag btn btn-outline-primary" href="/tags/automation/">automation</a> <a class="post-tag btn btn-outline-primary" href="/tags/nsattributedstring/">nsattributedstring</a></div></div></div><div id="toc-wrapper" class="ps-0 pe-4 mb-5"><div class="panel-heading ps-3 pt-2 mb-2">Contents</div><nav id="toc"></nav></div></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 px-3 pe-xl-4 mt-5"><div id="related-posts" class="mb-2 mb-sm-4"><h3 class="pt-2 mb-4 ms-1" data-toc-skip> Further Reading</h3><div class="row row-cols-1 row-cols-md-2 row-cols-xl-3 g-4 mb-4"><div class="col"> <a href="/posts/b08ef940c196/" class="card post-preview h-100"><div class="card-body"> <em class="small" data-ts="1573482897" data-df="ll" > Nov 11, 2019 </em><h4 class="pt-0 my-2" data-toc-skip>iOS Deferred Deep Link Implementation (Swift)</h4><div class="text-muted small"><p> iOS Deferred Deep Link Implementation (Swift) Build an app transition flow that adapts to all scenarios without interruption [2022/07/22] Update on iOS 16 Upcoming Changes Starting from iOS ≥ 16...</p></div></div></a></div><div class="col"> <a href="/posts/e37d66ea1146/" class="card post-preview h-100"><div class="card-body"> <em class="small" data-ts="1539454069" data-df="ll" > Oct 14, 2018 </em><h4 class="pt-0 my-2" data-toc-skip>iOS UITextView Text Wrapping Editor (Swift)</h4><div class="text-muted small"><p> iOS UITextView Text Wrapping Editor (Swift) Practical Route Target Functionality: The app has a discussion area where users can post articles. The interface for posting articles needs to support...</p></div></div></a></div><div class="col"> <a href="/posts/cb6eba52a342/" class="card post-preview h-100"><div class="card-body"> <em class="small" data-ts="1539618241" data-df="ll" > Oct 15, 2018 </em><h4 class="pt-0 my-2" data-toc-skip>iOS ≥ 10 Notification Service Extension Application (Swift)</h4><div class="text-muted small"><p> iOS ≥ 10 Notification Service Extension Application (Swift) Image push notifications, push notification display statistics, pre-processing before push notification display Regarding the basics of...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/948ed34efa09/" class="btn btn-outline-primary" prompt="Older" ><p>iOS Cross-Platform Account and Password Integration to Enhance Login Experience</p></a> <a href="/posts/87090f101b9a/" class="btn btn-outline-primary" prompt="Newer" ><p>Reinstallation Note 1 - Laravel Homestead + phpMyAdmin Environment Setup</p></a></div><script type="text/javascript"> (function () { const origin = 'https://giscus.app'; const iframe = 'iframe.giscus-frame'; const lightTheme = 'light'; const darkTheme = 'dark_dimmed'; let initTheme = lightTheme; const html = document.documentElement; if ( (html.hasAttribute('data-mode') && html.getAttribute('data-mode') === 'dark') || (!html.hasAttribute('data-mode') && window.matchMedia('(prefers-color-scheme: dark)').matches) ) { initTheme = darkTheme; } let giscusAttributes = { src: 'https://giscus.app/client.js', 'data-repo': 'ZhgChgLi/zhgchgli.github.io', 'data-repo-id': 'R_kgDOHdowLw', 'data-category': 'Q&A', 'data-category-id': 'DIC_kwDOHdowL84CU-q6', 'data-mapping': 'url', 'data-reactions-enabled': '1', 'data-emit-metadata': '0', 'data-theme': initTheme, 'data-input-position': 'bottom', 'data-lang': 'en', crossorigin: 'anonymous', async: '' }; let giscusScript = document.createElement('script'); Object.entries(giscusAttributes).forEach(([key, value]) => giscusScript.setAttribute(key, value) ); document.getElementById('tail-wrapper').appendChild(giscusScript); addEventListener('message', (event) => { if ( event.source === window && event.data && event.data.direction === ModeToggle.ID ) { /* global theme mode changed */ const mode = event.data.message; const theme = mode === ModeToggle.DARK_MODE ? darkTheme : lightTheme; const message = { setConfig: { theme: theme } }; const giscus = document.querySelector(iframe).contentWindow; giscus.postMessage({ giscus: message }, origin); } }); })(); </script></div></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/ios-app-development/">ios-app-development</a> <a class="post-tag btn btn-outline-primary" href="/tags/ios/">ios</a> <a class="post-tag btn btn-outline-primary" href="/tags/swift/">swift</a> <a class="post-tag btn btn-outline-primary" href="/tags/life/">life</a> <a class="post-tag btn btn-outline-primary" href="/tags/medium/">medium</a> <a class="post-tag btn btn-outline-primary" href="/tags/unboxing/">unboxing</a> <a class="post-tag btn btn-outline-primary" href="/tags/life/">Life</a> <a class="post-tag btn btn-outline-primary" href="/tags/japan/">japan</a> <a class="post-tag btn btn-outline-primary" href="/tags/automation/">automation</a> <a class="post-tag btn btn-outline-primary" href="/tags/nsattributedstring/">nsattributedstring</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div></div><footer><div class="container px-lg-4"><div class="d-flex justify-content-center align-items-center text-muted mx-md-3"><p>Using the <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> theme <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> <br/> <a href="https://zhgchg.li" target="_blank">中文版網站</a><br/> Powered by <a href="https://github.com/ZhgChgLi/ZMediumToMarkdown" target="_blank">ZMediumToMarkdown</a>.</p><p>© 2024 <a href="https://medium.com/@zhgchgli">ZhgChgLi</a>. <span data-bs-toggle="tooltip" data-bs-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author." >All rights reserved.</span></p></div></div></footer><div id="mask"></div><button id="back-to-top" aria-label="back-to-top" class="btn btn-lg btn-box-shadow"> <i class="fas fa-angle-up"></i> </button><div id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-bs-animation="true" data-bs-autohide="false" ><div class="toast-header"> <button type="button" class="btn-close ms-auto" data-bs-dismiss="toast" aria-label="Close" ></button></div><div class="toast-body text-center pt-0"><p class="px-2 mb-3">A new version of content is available.</p><button type="button" class="btn btn-primary" aria-label="Update"> Update </button></div></div><script src="https://cdn.jsdelivr.net/combine/npm/jquery@3.7.0/dist/jquery.min.js,npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js,npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js,npm/lazysizes@5.3.2/lazysizes.min.js,npm/magnific-popup@1.1.0/dist/jquery.magnific-popup.min.js,npm/clipboard@2.0.11/dist/clipboard.min.js,npm/dayjs@1.11.7/dayjs.min.js,npm/dayjs@1.11.7/locale/en.min.js,npm/dayjs@1.11.7/plugin/relativeTime.min.js,npm/dayjs@1.11.7/plugin/localizedFormat.min.js,npm/tocbot@4.21.0/dist/tocbot.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-JSGN97L56L"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-JSGN97L56L'); }); </script> <script> /* Note: dependent library will be loaded in `js-selector.html` */ SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="px-1 px-sm-2 px-lg-4 px-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5"></p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="me-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script>
