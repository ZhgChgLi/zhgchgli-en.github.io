<!doctype html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="viewport" content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover" ><meta name="generator" content="Jekyll v4.3.2" /><meta property="og:title" content="First Experience with Smart Home - Apple HomeKit &amp; Xiaomi Mijia" /><meta name="author" content="ZhgChgLi" /><meta property="og:locale" content="en" /><meta name="description" content="Mijia Smart Camera and Mijia Smart Desk Lamp, Mijia, Homekit Setup Tutorial" /><meta property="og:description" content="Mijia Smart Camera and Mijia Smart Desk Lamp, Mijia, Homekit Setup Tutorial" /><link rel="canonical" href="https://en.zhgchg.li/posts/c3150cdc85dd/" /><meta property="og:url" content="https://en.zhgchg.li/posts/c3150cdc85dd/" /><meta property="og:site_name" content="ZhgChgLi" /><meta property="og:image" content="https://en.zhgchg.li/assets/c3150cdc85dd/1*Aa9zfAh7xclVOZS0IkcaMQ.jpeg" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2019-07-06T01:13:47+08:00" /><meta name="twitter:card" content="summary_large_image" /><meta property="twitter:image" content="https://en.zhgchg.li/assets/c3150cdc85dd/1*Aa9zfAh7xclVOZS0IkcaMQ.jpeg" /><meta property="twitter:title" content="First Experience with Smart Home - Apple HomeKit &amp; Xiaomi Mijia" /><meta name="twitter:site" content="@zhgchgli" /><meta name="twitter:creator" content="@ZhgChgLi" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"ZhgChgLi"},"dateModified":"2024-04-13T15:49:52+08:00","datePublished":"2019-07-06T01:13:47+08:00","description":"Mijia Smart Camera and Mijia Smart Desk Lamp, Mijia, Homekit Setup Tutorial","headline":"First Experience with Smart Home - Apple HomeKit &amp; Xiaomi Mijia","image":"https://en.zhgchg.li/assets/c3150cdc85dd/1*Aa9zfAh7xclVOZS0IkcaMQ.jpeg","mainEntityOfPage":{"@type":"WebPage","@id":"https://en.zhgchg.li/posts/c3150cdc85dd/"},"url":"https://en.zhgchg.li/posts/c3150cdc85dd/"}</script><title>First Experience with Smart Home - Apple HomeKit & Xiaomi Mijia | ZhgChgLi</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="ZhgChgLi"><meta name="application-name" content="ZhgChgLi"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.21.0/dist/tocbot.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return 'mode'; } static get MODE_ATTR() { return 'data-mode'; } static get DARK_MODE() { return 'dark'; } static get LIGHT_MODE() { return 'light'; } static get ID() { return 'mode-toggle'; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener('change', () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia('(prefers-color-scheme: dark)'); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { document.documentElement.setAttribute(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { document.documentElement.setAttribute(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { document.documentElement.removeAttribute(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage( { direction: ModeToggle.ID, message: this.modeStatus }, '*' ); } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.notify(); } /* flipMode() */ } /* ModeToggle */ const modeToggle = new ModeToggle(); </script><body><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper"> <a href="/" id="avatar" class="rounded-circle"> <img src="/assets/images/zhgchgli.jpg" width="112" height="112" alt="avatar" onerror="this.style.display='none'"> </a><div class="site-title"> <a href="/">ZhgChgLi</a></div><div class="site-subtitle fst-italic">Live a life you will remember.</div></div><ul class="nav flex-column flex-grow-1 w-100 ps-0"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle"></i> <span>ABOUT</span> </a><li class="nav-item"> <a href="/real/" class="nav-link"> <i class="fa-fw fa fa-camera-retro"></i> <span>REAL LIFE</span> </a><li class="nav-item"> <a href="/contact/" class="nav-link"> <i class="fa-fw fa fa-envelope-open"></i> <span>CONTACT</span> </a></ul><div class="sidebar-bottom d-flex flex-wrap align-items-center w-100"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://link.zhgchg.li" aria-label="link" target="_blank" rel="noopener noreferrer" > <i class="fas fa-link"></i> </a> <a href="https://www.linkedin.com/in/zhgchgli" aria-label="linkedin" target="_blank" rel="noopener noreferrer" > <i class="fab fa-linkedin"></i> </a> <a href="javascript:location.href = 'mailto:' + ['zhgchgli','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container px-xxl-5"><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100" > <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>First Experience with Smart Home - Apple HomeKit & Xiaomi Mijia</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..." > </span> <span id="search-cancel">Cancel</span></div></div><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pe-xl-4"><div class="post px-1 px-md-2"><h1 data-toc-skip>First Experience with Smart Home - Apple HomeKit & Xiaomi Mijia</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1562346827" data-df="ll" data-bs-toggle="tooltip" data-bs-placement="bottom" > Jul 6, 2019 </em> </span> <span> Updated <em class="" data-ts="1712994592" data-df="ll" data-bs-toggle="tooltip" data-bs-placement="bottom" > Apr 13, 2024 </em> </span><div class="mt-3 mb-3"> <a href="/assets/c3150cdc85dd/1*Aa9zfAh7xclVOZS0IkcaMQ.jpeg" class="popup img-link preview-img shimmer"><img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1200 630'%3E%3C/svg%3E" data-src="/assets/c3150cdc85dd/1*Aa9zfAh7xclVOZS0IkcaMQ.jpeg" alt="Preview Image" width="1200" height="630" class="lazyload" data-proofer-ignore></a></div><div class="d-flex justify-content-between"> <span> By <em> <a href=""></a> </em> </span><div> <span class="readtime" data-bs-toggle="tooltip" data-bs-placement="bottom" title="3517 words" > <em>19 min</em> read</span></div></div></div><div class="post-content"> <widgetic id="64ce7263ecb2a197598b4567" resize="fill" width="560" height="60" autoscale="on" adaptive="414"></widgetic><script async src="https://widgetic.com/sdk/sdk.js"></script><h3 id="first-experience-with-smart-home---apple-homekit--xiaomi-mijia"><span class="me-2">First Experience with Smart Home - Apple HomeKit &amp; Xiaomi Mijia</span><a href="#first-experience-with-smart-home---apple-homekit--xiaomi-mijia" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Mijia Smart Camera and Mijia Smart Desk Lamp, Homekit Setup Tutorial</p><p><strong>[2020/04/20]</strong> <a href="../99db2a1fbfe5/"><strong>Advanced Tutorial Released</strong></a> <strong>：</strong> <strong><a href="../99db2a1fbfe5/">Experienced users please proceed directly to the advanced tutorial&gt;&gt;</a></strong> <a href="../99db2a1fbfe5/"><strong>Demonstration of using Raspberry Pi as HomeBridge host to connect all Mijia appliances to HomeKit</strong></a></p><h3 id="miscellaneous"><span class="me-2">Miscellaneous:</span><a href="#miscellaneous" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>I recently moved; unlike my previous place where the ceiling had office-style light fixtures that were too bright, the new place has decorative reflective lights that are a bit dim for using the computer or reading. After two weeks, my eyes felt more dry and uncomfortable. Initially, I planned to shop at IKEA, but considering the light color and eye protection, I ultimately chose Xiaomi desk lamps (since I already had a Xiaomi smart camera, all part of the Mijia series).</p><h3 id="this-article"><span class="me-2">This Article:</span><a href="#this-article" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>I didn’t particularly check if the products supported Apple HomeKit when purchasing, which is quite a failure as an iOS developer because I didn’t expect Xiaomi to support it.</p><p>So, this article will separately introduce <strong>Apple HomeKit usage</strong>, <strong>how to use third-party connections for smart home devices that do not support Apple HomeKit</strong>, and <strong>how to set up a smart home using Mijia itself (with IFTTT)</strong>.</p><p>You can skip to the sections that suit your device needs.</p><h3 id="purchase"><span class="me-2">Purchase:</span><a href="#purchase" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>I bought two desk lamps, one (Pro) for the computer desk and the other for the bedside as a reading lamp.</p><h4 id="mijia-desk-lamp-pro-"><span class="me-2"><a href="https://www.mi.com/tw/mi-adjustable-smart-desk-lamp/" target="_blank">Mijia Desk Lamp Pro</a> :</span><a href="#mijia-desk-lamp-pro-" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><a href="/assets/c3150cdc85dd/1*Aa9zfAh7xclVOZS0IkcaMQ.jpeg" class="popup img-link "><img data-src="/assets/c3150cdc85dd/1*Aa9zfAh7xclVOZS0IkcaMQ.jpeg" alt="NT$ 1,795 supports Mijia, Apple HomeKit" class="lazyload" data-proofer-ignore></a></p><p>NT$ 1,795 supports Mijia, Apple HomeKit</p><h4 id="mijia-led-smart-desk-lamp-"><span class="me-2"><a href="https://www.mi.com/tw/smartlamp/" target="_blank">Mijia LED Smart Desk Lamp</a> :</span><a href="#mijia-led-smart-desk-lamp-" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><a href="/assets/c3150cdc85dd/1*PCaRI8AroRgFELEA1elaiA.jpeg" class="popup img-link "><img data-src="/assets/c3150cdc85dd/1*PCaRI8AroRgFELEA1elaiA.jpeg" alt="NT$ 995 only supports Mijia" class="lazyload" data-proofer-ignore></a></p><p>NT$ 995 only supports Mijia</p><p>For detailed introductions, refer to the official website. Both lamps support smart control, color change, brightness adjustment, and eye protection. The Pro version supports Apple HomeKit and three-angle adjustments. So far, I am quite satisfied with the functionality of one lamp. If I had to pick a flaw, it would be that the Pro version’s angle adjustment only allows the base to rotate horizontally, not the lamp itself, which means you can’t adjust the light angle!</p><h3 id="ideal-smart-home-goals"><span class="me-2">Ideal Smart Home Goals:</span><a href="#ideal-smart-home-goals" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><h4 id="current-devices"><span class="me-2">Current Devices:</span><a href="#current-devices" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><ol><li>Mijia Smart Camera Pan-Tilt Version 1080P (supports: Mijia)<li>Mijia Desk Lamp Pro (supports: Apple HomeKit, Mijia)<li>Mijia LED Smart Desk Lamp (supports: Mijia)</ol><h4 id="ideal-goals"><span class="me-2">Ideal Goals:</span><a href="#ideal-goals" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><strong>When returning home:</strong> Automatically turn off the camera (for privacy and to prevent false alarms, as the Mijia app has a bug where the home security alarm cannot be turned on/off according to the set time), and turn on the Pro lamp on the computer desk (to avoid fumbling in the dark). <strong>When leaving home:</strong> Automatically turn on the camera (default to home security mode) and turn off all lights.</p><h4 id="final-achievement-in-this-article"><span class="me-2"><strong>Final Achievement in This Article:</strong></span><a href="#final-achievement-in-this-article" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Receive push notifications when leaving or returning home, and trigger operations with a single tap on the phone (with the current devices, it’s not possible to achieve the ideal automation goal).</p><h3 id="smart-home-setup-journey"><span class="me-2">Smart Home Setup Journey:</span><a href="#smart-home-setup-journey" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><h4 id="apple-homekit-usage"><span class="me-2"><strong>Apple HomeKit Usage</strong></span><a href="#apple-homekit-usage" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><strong>*Only for Mijia Desk Lamp Pro! Mijia Desk Lamp Pro! Mijia Desk Lamp Pro!</strong></p><p>This is the simplest part because it’s all native functionality.</p><p><a href="/assets/c3150cdc85dd/1*pv62RZ_TjL8X6t-gXnwWtQ.jpeg" class="popup img-link "><img data-src="/assets/c3150cdc85dd/1*pv62RZ_TjL8X6t-gXnwWtQ.jpeg" alt="Only four steps" class="lazyload" data-proofer-ignore></a></p><p>Only four steps</p><ol><li>Find the Home app (if not available, search for “Home” in the App Store and install it)<li>Open the Home app<li>Click the “+” in the upper right corner to add an accessory<li>Scan the HomeKit QR code at the bottom of the Pro lamp to add the accessory!</ol><p><a href="/assets/c3150cdc85dd/1*0Rm1Ij86bD-fld-N-N1qJw.jpeg" class="popup img-link "><img data-src="/assets/c3150cdc85dd/1*0Rm1Ij86bD-fld-N-N1qJw.jpeg" alt="" class="lazyload" data-proofer-ignore></a></p><p>After successfully adding the accessory, press hard (3D TOUCH) / long press on the accessory to adjust the brightness and color.</p><h4 id="what-about-smart-home-devices-that-do-not-support-apple-homekit-how-to-use-third-party-integration-with-homekit"><span class="me-2">What about smart home devices that do not support Apple HomeKit? How to use third-party integration with HomeKit?</span><a href="#what-about-smart-home-devices-that-do-not-support-apple-homekit-how-to-use-third-party-integration-with-homekit" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Apart from the smart devices that support Apple HomeKit, does it mean that devices that do not support Apple HomeKit cannot be controlled through the Home app at all? This section will guide you step-by-step on how to add unsupported devices (cameras, regular desk lamps) to the “Home” app!</p><blockquote><p><strong>Mac ONLY, Windows users please skip to the section on using Mi Home</strong></p></blockquote><blockquote><p><strong>My device is MacOS 10.14/iOS 12</strong></p></blockquote><p><strong>Using <a href="https://github.com/nfarina/homebridge" target="_blank">HomeBridge</a>:</strong></p><p>HomeBridge uses a Mac computer as a bridge to simulate unsupported devices as HomeKit devices, allowing them to be added to the “Home” accessories.</p><p><a href="/assets/c3150cdc85dd/1*q2ctcxaaxLFExKXd-9NjPg.png" class="popup img-link "><img data-src="/assets/c3150cdc85dd/1*q2ctcxaaxLFExKXd-9NjPg.png" alt="Operation Comparison" class="lazyload" data-proofer-ignore></a></p><p>Operation Comparison</p><p>One key point is that <strong>you need to keep a Mac computer on to maintain the bridge channel smoothly</strong>; once the computer is turned off or goes to sleep, you will not be able to control those HomeKit devices.</p><p>Of course, there are also advanced methods online where people buy a Raspberry Pi to use as a bridge; however, this involves too much technical detail and will not be covered in this article.</p><p>If you are aware of the drawbacks and still want to try, you can continue reading or skip to the next section on using Mi Home directly.</p><p><strong>Step 1:</strong></p><p>Install <a href="https://nodejs.org/en/" target="_blank">node.js</a>: <a href="https://nodejs.org/dist/v12.6.0/node-v12.6.0.pkg" target="_blank">Click here</a> <a href="https://nodejs.org/dist/v12.6.0/node-v12.6.0.pkg" target="_blank">to download</a> and install it.</p><p><strong>Step 2:</strong></p><p>Open “Terminal” and enter</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">sudo </span>npm <span class="nt">-v</span>
</pre></table></code></div></div><p><a href="/assets/c3150cdc85dd/1*RBRWT93L_abbhzTItL9Mhg.png" class="popup img-link "><img data-src="/assets/c3150cdc85dd/1*RBRWT93L_abbhzTItL9Mhg.png" alt="" class="lazyload" data-proofer-ignore></a></p><p>Check if the node.js npm package manager is installed successfully: if the version number is displayed, it means success!</p><p><strong>Step 3:</strong></p><p>Install the HomeBridge package via npm:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">sudo </span>npm <span class="nt">-g</span> <span class="nb">install </span>homebridge <span class="nt">--unsafe-perm</span>
</pre></table></code></div></div><p>After the installation is complete… the HomeBridge tool is installed!</p><p>As mentioned earlier, “HomeBridge uses a Mac computer as a bridge to simulate unsupported devices as HomeKit devices,” <strong>HomeBridge is just a platform, and each device needs to find additional HomeBridge plugin resources to be added</strong>.</p><p>It’s easy to find, just google or search on GitHub for “Mi Home product English name homebridge” and you will find many resources; here are two resources for devices I use:</p><p><strong>1. Mi Home Camera Pan-Tilt Version Resource: <a href="https://github.com/josepramon/homebridge-mijia-camera" target="_blank">MijiaCamera</a></strong></p><p>Cameras are relatively tricky devices, and I spent some time researching and organizing this; I hope it helps those in need!</p><p>First, use “Terminal” to install the MijiaCamera npm package with the command</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">sudo </span>npm <span class="nb">install</span> <span class="nt">-g</span> homebridge-mijia-camera
</pre></table></code></div></div><p>After installation, we need to obtain the camera’s network <strong>IP address</strong> and <strong>Token</strong> information.</p><p><a href="/assets/c3150cdc85dd/1*n0TIhqyCoKZo7--ePZwuLA.jpeg" class="popup img-link "><img data-src="/assets/c3150cdc85dd/1*n0TIhqyCoKZo7--ePZwuLA.jpeg" alt="" class="lazyload" data-proofer-ignore></a></p><p>Open the Mi Home APP → Camera → Top right corner “…” → Settings → Network Information to get the <strong>IP address</strong>!</p><p><strong>Token</strong> information is more troublesome and requires you to connect your phone to the Mac:</p><p><a href="/assets/c3150cdc85dd/1*0ewSMEH7K2rzUlUtSB61vw.png" class="popup img-link "><img data-src="/assets/c3150cdc85dd/1*0ewSMEH7K2rzUlUtSB61vw.png" alt="Open iTunes Interface" class="lazyload" data-proofer-ignore></a></p><p>Open iTunes Interface</p><p>Select backup <strong>Do not check Encrypt local backup</strong>, and click “Back Up Now.”</p><p>After the backup is complete, <a href="http://www.imactools.com/iphonebackupviewer/download/mac" target="_blank">download</a> and install the backup viewing software: <a href="http://www.imactools.com/iphonebackupviewer/download/mac" target="_blank">iBackupViewer</a></p><p>Open “iBackupViewer”. The first time you launch it, you will need to go to Mac “System Preferences” -&gt; “Security &amp; Privacy” -&gt; “Privacy” -&gt; “+” -&gt; Add “iBackupViewer”. <strong><em>*If you have privacy concerns, you can disable the network while using this software and remove it after use.</em></strong></p><p><a href="/assets/c3150cdc85dd/1*kEOxJCkOxDRuFfoxumssgA.png" class="popup img-link "><img data-src="/assets/c3150cdc85dd/1*kEOxJCkOxDRuFfoxumssgA.png" alt="" class="lazyload" data-proofer-ignore></a></p><p>Open “iBackupViewer” again. After successfully reading the backup file, click the top right corner to switch to “Tree View” mode.</p><p><a href="/assets/c3150cdc85dd/1*R4l6tRzDaqtiN7xutPKtQg.png" class="popup img-link "><img data-src="/assets/c3150cdc85dd/1*R4l6tRzDaqtiN7xutPKtQg.png" alt="" class="lazyload" data-proofer-ignore></a></p><p>On the left side, you will see all the installed apps. Find the Mi Home app “AppDomain-com.xiaomi.mihome” -&gt; “Documents”.</p><p>In the document list on the right, find and select the file “<strong>number_mihome.sqlite</strong>”.</p><p>Click the top right corner “Export” -&gt; “Selected”.</p><p>Drop the exported sqlite file into <a href="https://inloop.github.io/sqlite-viewer/" target="_blank">https://inloop.github.io/sqlite-viewer/</a> to view the content.</p><p><a href="/assets/c3150cdc85dd/1*oRK8tHqom2tnR3CE5xz_-w.png" class="popup img-link "><img data-src="/assets/c3150cdc85dd/1*oRK8tHqom2tnR3CE5xz_-w.png" alt="" class="lazyload" data-proofer-ignore></a></p><p>You can see all the device information fields on the Mi Home app. Scroll to the far right end to find the <strong>ZTOKEN</strong> field. Double-click to edit, select all, and copy.</p><p>Finally, open <a href="http://aes.online-domain-tools.com/" target="_blank">http://aes.online-domain-tools.com/</a> to convert <strong>ZTOKEN</strong> into the final <strong>Token</strong>.</p><p><a href="/assets/c3150cdc85dd/1*ZXTe6MEFXjYhqtf9uAJWwQ.png" class="popup img-link "><img data-src="/assets/c3150cdc85dd/1*ZXTe6MEFXjYhqtf9uAJWwQ.png" alt="" class="lazyload" data-proofer-ignore></a></p><ol><li>Paste the copied ZTOKEN into “Input Text” and select “Hex”.<li>Enter “00000000000000000000000000000000” (32 zeros) in the Key field and select “Hex”.<li>Click “Decrypt!” to convert.<li>Select all, copy the blue box in the bottom right corner, and remove spaces to get the final <strong>Token</strong>.</ol><blockquote><p>Token: I tried using “miio” to sniff directly, but it seems that the Mi Home camera firmware has been updated, and this method no longer works to quickly and conveniently obtain the Token!</p></blockquote><p><strong>Back to HomeBridge! Edit the config file config.json</strong></p><p><a href="/assets/c3150cdc85dd/1*Zh_BWLwMUg5pOxFEVipgiQ.png" class="popup img-link "><img data-src="/assets/c3150cdc85dd/1*Zh_BWLwMUg5pOxFEVipgiQ.png" alt="" class="lazyload" data-proofer-ignore></a></p><p>Use “Finder” -&gt; “Go” -&gt; “Go to Folder” -&gt; Enter “~/ .homebridge” to go.</p><p>Open “config.json” with a text editor. If this file does not exist, create one yourself or <a href="https://drive.google.com/file/d/1S67NZwXrVqOpps_Cl9l0494foDaHxuWF/view?usp=sharing" target="_blank">click here to download</a> and place it directly.</p><div class="language-json highlighter-rouge"><div class="code-header"> <span data-label-text="JSON"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre><td class="rouge-code"><pre><span class="p">{</span><span class="w">
   </span><span class="nl">"bridge"</span><span class="p">:{</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="s2">"Homebridge"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"username"</span><span class="p">:</span><span class="s2">"CC:22:3D:E3:CE:30"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"port"</span><span class="p">:</span><span class="mi">51826</span><span class="p">,</span><span class="w">
      </span><span class="nl">"pin"</span><span class="p">:</span><span class="s2">"123-45-568"</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="nl">"accessories"</span><span class="p">:[</span><span class="w">
      </span><span class="p">{</span><span class="w">
         </span><span class="nl">"accessory"</span><span class="p">:</span><span class="s2">"MijiaCamera"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"name"</span><span class="p">:</span><span class="s2">"Mi Camera"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"ip"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
         </span><span class="nl">"token"</span><span class="p">:</span><span class="s2">""</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre></table></code></div></div><p>Add the above content to config.json, and input the IP and Token obtained earlier.</p><p>Then, go back to the “Terminal” and enter the following command to start HomeBridge:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">sudo </span>homebridge start
</pre></table></code></div></div><p>If you have already started it and then changed the config.json content, you can use:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">sudo </span>homebridge restart
</pre></table></code></div></div><p>Restart</p><p><a href="/assets/c3150cdc85dd/1*vwCS3QHu285oCrChau9mpw.png" class="popup img-link "><img data-src="/assets/c3150cdc85dd/1*vwCS3QHu285oCrChau9mpw.png" alt="" class="lazyload" data-proofer-ignore></a></p><p>At this point, a HomeKit QRCode will appear for you to scan and add accessories (steps as mentioned above, the way to add Apple HomeKit devices).</p><p><a href="/assets/c3150cdc85dd/1*CB76x9ryWBve2bssFd0nzA.jpeg" class="popup img-link "><img data-src="/assets/c3150cdc85dd/1*CB76x9ryWBve2bssFd0nzA.jpeg" alt="" class="lazyload" data-proofer-ignore></a></p><p>Below will also have status messages: [2019–7–4 23:45:03] [Mi Camera] connecting to camera at 192.168.0.100… [2019–7–4 23:45:03] [Mi Camera] current power state: off</p><p>If you see these and no error messages appear, it means the setup is successful!</p><p>The most common error is usually an incorrect Token. Just check if there are any omissions in the above process.</p><p>Now you can turn the Mi Home Smart Camera on and off from the “Home” APP!</p><p><strong>2. Mi Home LED Smart Desk Lamp HomeBridge Resource: <a href="https://github.com/vieira/homebridge-yeelight-wifi" target="_blank">homebridge-yeelight-wifi</a></strong></p><p>Next is the Mi Home LED Smart Desk Lamp. Since it does not support Apple HomeKit like the Pro version, we still need to use the HomeBridge method to add it. Although the steps <strong>do not require a cumbersome process to obtain IP and Token</strong>, it is relatively simpler than the camera, but the desk lamp has its own pitfalls. You need to use another YeeLight APP to pair it and then turn on the local network control setting:</p><p><a href="/assets/c3150cdc85dd/1*uuaLjWduzC5RrOf-gd2-Jw.jpeg" class="popup img-link "><img data-src="/assets/c3150cdc85dd/1*uuaLjWduzC5RrOf-gd2-Jw.jpeg" alt="" class="lazyload" data-proofer-ignore></a></p><p>I have to complain about this poor integration; the native Mi Home APP cannot make this setting. So please search for the “ <a href="https://apps.apple.com/tw/app/yeelight/id977125608" target="_blank">Yeelight</a> “ APP in the APP Store to download and install it.</p><p>Open the APP -&gt; Log in directly using the Mi Home account -&gt; Add device -&gt; Mi Home Desk Lamp -&gt; Follow the instructions to rebind the desk lamp to the Yeelight APP.</p><p><a href="/assets/c3150cdc85dd/1*GTcap563FDdC0TsH09hZww.jpeg" class="popup img-link "><img data-src="/assets/c3150cdc85dd/1*GTcap563FDdC0TsH09hZww.jpeg" alt="" class="lazyload" data-proofer-ignore></a></p><p>After the device is bound, go back to the “Device” page -&gt; Click “Mi Home Desk Lamp” to enter -&gt; Click the bottom right “△” Tab -&gt; Click “Local Network Control” to enter the settings -&gt; Turn on the button to allow local network control.</p><p><strong>The desk lamp setup is complete here. You can keep this APP to control the desk lamp or rebind it back to Mi Home.</strong></p><p><strong>Next is the HomeBridge setup; similarly, open the “Terminal” and enter the command to install the <a href="https://github.com/vieira/homebridge-yeelight-wifi" target="_blank">homebridge-yeelight-wifi</a> npm package</strong></p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">sudo </span>npm <span class="nb">install</span> <span class="nt">-g</span> homebridge-yeelight-wifi
</pre></table></code></div></div><p>After installation, follow the same steps as the camera, go to the ~/.homebridge folder, create or edit the config.json file, and this time just add the following inside the last }:</p><div class="language-json highlighter-rouge"><div class="code-header"> <span data-label-text="JSON"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="nl">"platforms"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
   </span><span class="p">{</span><span class="w">
         </span><span class="nl">"platform"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"yeelight"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"yeelight"</span><span class="w">
   </span><span class="p">}</span><span class="w">
 </span><span class="p">]</span><span class="w">
</span></pre></table></code></div></div><p>That’s it!</p><p><strong>Finally, combine the above camera config.json file as follows:</strong></p><div class="language-json highlighter-rouge"><div class="code-header"> <span data-label-text="JSON"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
</pre><td class="rouge-code"><pre><span class="p">{</span><span class="w">
 </span><span class="nl">"bridge"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Homebridge"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CC:22:3D:E3:CE:30"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"port"</span><span class="p">:</span><span class="w"> </span><span class="mi">51826</span><span class="p">,</span><span class="w">
  </span><span class="nl">"pin"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123-45-568"</span><span class="w">
 </span><span class="p">},</span><span class="w">

 </span><span class="nl">"accessories"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="nl">"accessory"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MijiaCamera"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Mi Camera"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"ip"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
   </span><span class="nl">"token"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="w">
  </span><span class="p">}</span><span class="w">
 </span><span class="p">],</span><span class="w">

 </span><span class="nl">"platforms"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
   </span><span class="p">{</span><span class="w">
         </span><span class="nl">"platform"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"yeelight"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"yeelight"</span><span class="w">
   </span><span class="p">}</span><span class="w">
 </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre></table></code></div></div><p>Then go back to the “Terminal” and enter:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">sudo </span>homebridge start
</pre></table></code></div></div><p>or</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">sudo </span>homebridge restart
</pre></table></code></div></div><p>You will see the unsupported Mi Home LED Smart Desk Lamp added to the HomeKit “Home” APP!</p><p><a href="/assets/c3150cdc85dd/1*3jm0Kd4545DcmzNtPY-dXA.jpeg" class="popup img-link "><img data-src="/assets/c3150cdc85dd/1*3jm0Kd4545DcmzNtPY-dXA.jpeg" alt="" class="lazyload" data-proofer-ignore></a></p><p>And it also supports color and brightness adjustment!</p><h4 id="all-homekit-accessories-are-added-how-to-make-them-smart"><span class="me-2">All HomeKit accessories are added, how to make them smart?</span><a href="#all-homekit-accessories-are-added-how-to-make-them-smart" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>After adding and bridging everything, open the “Home” APP again.</p><p><a href="/assets/c3150cdc85dd/1*s33BtesqfNSUNyyR069m_Q.jpeg" class="popup img-link "><img data-src="/assets/c3150cdc85dd/1*s33BtesqfNSUNyyR069m_Q.jpeg" alt="" class="lazyload" data-proofer-ignore></a></p><p>Follow the steps to add a scene scenario, here using “Going Home” as an example:</p><p>Click the “+” in the upper right corner -&gt; Add Scenario -&gt; Custom -&gt; Enter the accessory name yourself (EX: Going Home) -&gt; Click “Add Accessory” at the bottom -&gt; Select the HomeKit accessories that have been connected -&gt; Set the accessory status for this scene (Camera: Off / Desk Lamp: On) -&gt; You can click “Test Scenario” to test -&gt; Click “Done” in the upper right corner!</p><p>Now the scene is set! At this point, clicking the scene on the homepage will execute the settings for all the accessories inside!</p><p><a href="/assets/c3150cdc85dd/1*VSArlFmoFERbjH13Cns5TQ.jpeg" class="popup img-link "><img data-src="/assets/c3150cdc85dd/1*VSArlFmoFERbjH13Cns5TQ.jpeg" alt="" class="lazyload" data-proofer-ignore></a></p><p>There is also a quick tip, which is to directly click the house-shaped button in the pull-up control menu to quickly operate HomeKit/execute scenarios (you can switch modes in the upper right corner)!</p><h4 id="now-that-we-have-the-intelligence-how-do-we-automate-it"><span class="me-2">Now that we have the intelligence, how do we automate it?</span><a href="#now-that-we-have-the-intelligence-how-do-we-automate-it" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Now that we have the intelligence, I want to achieve the ultimate goal: automatically turn off the camera and turn on the lights when I get home; automatically turn on the camera and turn off the lights when I leave home.</p><p><a href="/assets/c3150cdc85dd/1*tCpQ3io2Q2DDCVFxJpBm_g.png" class="popup img-link "><img data-src="/assets/c3150cdc85dd/1*tCpQ3io2Q2DDCVFxJpBm_g.png" alt="" class="lazyload" data-proofer-ignore></a></p><p>Switch to the third tab “Automation” to set it up. Unfortunately, I don’t have any of the aforementioned devices (iPad/Apple TV/HomePod) to act as a <strong>“<a href="https://support.apple.com/zh-tw/HT207057" target="_blank">Home Hub</a>“</strong>, so I haven’t researched this part.</p><p>The principle seems to be that when you get home, the <strong>“Home Hub”</strong> detects your phone/watch and triggers it accurately!</p><h4 id="here-i-found-a-tricky-method-gps-sensing"><span class="me-2">Here I found a tricky method: (GPS sensing)</span><a href="#here-i-found-a-tricky-method-gps-sensing" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>By using a third-party app to connect to “Home” and add automation settings, you can use your phone’s GPS to achieve automation and unlock the “Automation” tab’s functionality.</p><p>p.s. GPS has an error margin of about 100 meters.</p><p><a href="/assets/c3150cdc85dd/1*Rm101LKv29Avb5wv4isg4A.jpeg" class="popup img-link "><img data-src="/assets/c3150cdc85dd/1*Rm101LKv29Avb5wv4isg4A.jpeg" alt="" class="lazyload" data-proofer-ignore></a></p><p>The third-party app I used is: <a href="https://apps.apple.com/us/app/myhome-plus-control-for-nest-wemo-and-homekit/id1050479330" target="_blank">myHome Plus</a></p><p>Download &amp; install the app -&gt; Open the app -&gt; Allow access to “Home Data” -&gt; You will see the data configuration of “Home” -&gt; Click the “Settings button” in the upper right corner -&gt; Click “My Home” to enter -&gt; Scroll down to the “Triggers” area -&gt; Click “Add Trigger”</p><p><a href="/assets/c3150cdc85dd/1*Kk6AMnhSYP4sM8JD_66Iow.jpeg" class="popup img-link "><img data-src="/assets/c3150cdc85dd/1*Kk6AMnhSYP4sM8JD_66Iow.jpeg" alt="" class="lazyload" data-proofer-ignore></a></p><p>Select “Location” as the trigger type -&gt; Enter a name (EX: Going Home) -&gt; Click “Set Location” to set the location area -&gt; Then in REGION STATUS, you can set whether to enter or leave the area -&gt; Finally, in SCENES, you can choose the corresponding “scenario” to execute (created above).</p><p>After clicking “Done” in the upper right corner to save, go back to the “Home” app, and you will see that the “Automation” tab is now available!</p><p><a href="/assets/c3150cdc85dd/1*SXYVBHk9-pMD8YufRQA4zw.png" class="popup img-link "><img data-src="/assets/c3150cdc85dd/1*SXYVBHk9-pMD8YufRQA4zw.png" alt="" class="lazyload" data-proofer-ignore></a></p><p>At this point, you can click the “+” in the upper right corner to directly add automation scripts using the “Home” app!</p><p><a href="/assets/c3150cdc85dd/1*qbtjNCj9mOvjuX7an6rhXw.jpeg" class="popup img-link "><img data-src="/assets/c3150cdc85dd/1*qbtjNCj9mOvjuX7an6rhXw.jpeg" alt="" class="lazyload" data-proofer-ignore></a></p><p>The steps are similar to the third-party app, but with better integration! After creating the automation using the native “Home” app, you can also swipe to delete the one created with the third-party app.</p><blockquote><p><strong><em>!! Just note that you need to keep at least one; otherwise, the tab will revert to its original locked state!!</em></strong></p></blockquote><p><strong>Siri Voice Control:</strong></p><p>Compared to the Mi Home introduced below, HomeKit has a high level of integration and can directly use voice control for the set accessories and execute scenes without additional settings.</p><p><a href="/assets/c3150cdc85dd/1*q_ui00ruJl1Fd3_5M-0EhQ.png" class="popup img-link "><img data-src="/assets/c3150cdc85dd/1*q_ui00ruJl1Fd3_5M-0EhQ.png" alt="" class="lazyload" data-proofer-ignore></a></p><p>This concludes the introduction to HomeKit settings. Next, let’s explain how to use Mi Home’s native smart home features.</p><h4 id="using-mi-home-to-build-a-smart-home"><span class="me-2"><strong>Using Mi Home to build a smart home:</strong></span><a href="#using-mi-home-to-build-a-smart-home" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Here I encountered a confusing point: I couldn’t find the same Mi Home desk lamp in the list of new devices in Mi Home. The answer is:</p><p><a href="/assets/c3150cdc85dd/1*xLM5-khndWjvEDdTaFiPfw.png" class="popup img-link "><img data-src="/assets/c3150cdc85dd/1*xLM5-khndWjvEDdTaFiPfw.png" alt="Just look at the text, this is it" class="lazyload" data-proofer-ignore></a></p><p>Just look at the text, this is it</p><p>Other devices: For the camera and Pro desk lamp, just follow the official instructions to add them, no need to elaborate here.</p><p><strong>Scene Scenario Settings:</strong></p><p><a href="/assets/c3150cdc85dd/1*leO3Z492pJPh3hEASYr-ww.jpeg" class="popup img-link "><img data-src="/assets/c3150cdc85dd/1*leO3Z492pJPh3hEASYr-ww.jpeg" alt="" class="lazyload" data-proofer-ignore></a></p><p>Similar to the “Home” setup -&gt; Switch to the “Smart” tab -&gt; Select “Manual Execution” -&gt; Choose device operation at the bottom (since it’s native, you can choose more functions) -&gt; Continue to add other devices (desk lamp) -&gt; Click “Save” to complete!</p><blockquote><p><em>Someone might ask why not just choose “leave or arrive at a place”? Because this function is useless, the app is not optimized for Taiwan’s GPS, which is wrong, and its positioning can only be set on landmarks. If your location has that, you can directly use this function. <strong>You can skip the rest of the article!</strong></em></p></blockquote><blockquote><p><strong><em>Fun fact: <a href="https://buzzorange.com/techorange/2019/05/09/china-map-is-wrong/" target="_blank">All maps of China in Google Maps are wrong!</a></em></strong></p></blockquote><p><a href="/assets/c3150cdc85dd/1*ZjdH5A0QnLq2LNh9lWvCCw.jpeg" class="popup img-link "><img data-src="/assets/c3150cdc85dd/1*ZjdH5A0QnLq2LNh9lWvCCw.jpeg" alt="" class="lazyload" data-proofer-ignore></a></p><p>For the quick switch part, you can set the widget from “My” -&gt; “Widgets”!</p><p>This way, you can quickly execute scenes and devices from the notification center!</p><p><a href="/assets/c3150cdc85dd/1*DMmicpzKUIr2xtN8JtP3wQ.png" class="popup img-link "><img data-src="/assets/c3150cdc85dd/1*DMmicpzKUIr2xtN8JtP3wQ.png" alt="" class="lazyload" data-proofer-ignore></a></p><p>You can also control the widget from <a href="../a2920e33e73e/">Apple Watch</a>! <em>*If the watch app keeps showing blank, please delete and reinstall the watch or phone app. This app has quite a few bugs.</em></p><h4 id="now-that-we-have-the-intelligence-how-do-we-automate-it-1"><span class="me-2">Now that we have the intelligence, how do we automate it?</span><a href="#now-that-we-have-the-intelligence-how-do-we-automate-it-1" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Here, we still need to use the GPS sensing method. <strong>If the scene added above is “leave or arrive at a place”, you can skip the following settings!</strong></p><p>* * * * *</p><h4 id="20190926-update-ios--13-to-achieve-automation-using-only-the-built-in-shortcuts-app"><span class="me-2">[2019/09/26] Update iOS ≥ 13 to achieve automation using only the built-in Shortcuts app:</span><a href="#20190926-update-ios--13-to-achieve-automation-using-only-the-built-in-shortcuts-app" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><a href="../21119db777dd/">iOS ≥ 13.1 Use the “Shortcuts” automation feature with Mi Home smart home, click to view»</a></p><p>* * * * *</p><blockquote><p><em>iOS ≥ 12, iOS &lt; 13 Only:</em></p></blockquote><blockquote><p><strong>Use the built-in Shortcuts app with IFTTT</strong></p></blockquote><p><a href="/assets/c3150cdc85dd/1*e9ld6Qn7D64CG-DZA1vAsA.jpeg" class="popup img-link "><img data-src="/assets/c3150cdc85dd/1*e9ld6Qn7D64CG-DZA1vAsA.jpeg" alt="" class="lazyload" data-proofer-ignore></a></p><p>First, go to “My” -&gt; “Experimental Features” -&gt; “iOS Shortcuts” -&gt; “Add Mi Home scenes to Shortcuts”</p><p>Open the system-built “ <a href="https://apps.apple.com/tw/app/%E6%8D%B7%E5%BE%91/id915249334" target="_blank">Shortcuts</a> “ app (if you can’t find it, please search and download it from the App Store)</p><p><a href="/assets/c3150cdc85dd/1*-rjtmZ6PHzSzOoBvjJ-FJQ.jpeg" class="popup img-link "><img data-src="/assets/c3150cdc85dd/1*-rjtmZ6PHzSzOoBvjJ-FJQ.jpeg" alt="" class="lazyload" data-proofer-ignore></a></p><p>Click the “+” in the upper right corner to create a shortcut -&gt; Click the settings button below the upper right corner -&gt; Name -&gt; Enter a name (it is recommended to use English, because you will use it later)</p><p><a href="/assets/c3150cdc85dd/1*5aUsslYvZvlFiSQYJrGgRw.jpeg" class="popup img-link "><img data-src="/assets/c3150cdc85dd/1*5aUsslYvZvlFiSQYJrGgRw.jpeg" alt="" class="lazyload" data-proofer-ignore></a></p><p>Return to the new shortcut page -&gt; Enter “Mi Home” in the search menu below -&gt; Add the corresponding scene set in Mi Home, and turn off “Show When Run” otherwise it will open the Mi Home app after execution.</p><blockquote><p>*If you can’t find Mi Home, please go back to the Mi Home app and try to toggle “My” -&gt; “Experimental Features” -&gt; “iOS Shortcuts” -&gt; “Add Mi Home scenes to Shortcuts”, and restart the “Shortcuts” app.</p></blockquote><p>At this time, we need to use a third-party app again. We use IFTTT to create a GPS entry and exit background trigger. Search for “ <a href="https://apps.apple.com/us/app/ifttt/id660944635" target="_blank">IFTTT</a> “ in the App Store to download and install.</p><p><a href="/assets/c3150cdc85dd/1*5tXhFP4uT1ySSFAZnnDQGw.jpeg" class="popup img-link "><img data-src="/assets/c3150cdc85dd/1*5tXhFP4uT1ySSFAZnnDQGw.jpeg" alt="" class="lazyload" data-proofer-ignore></a></p><p>Open IFTTT, log in to your account, switch to the “My Applets” tab, click the “+” in the upper right corner to add -&gt; Click “+this” -&gt; Search for “Location” -&gt; Choose whether to enter or leave</p><p><a href="/assets/c3150cdc85dd/1*2vs32eIxtEmvqzxOsDLGEw.jpeg" class="popup img-link "><img data-src="/assets/c3150cdc85dd/1*2vs32eIxtEmvqzxOsDLGEw.jpeg" alt="" class="lazyload" data-proofer-ignore></a></p><p>Set the location -&gt; Click “Create trigger” to confirm -&gt; Then click “+that” below -&gt; Search for “notification”</p><p><a href="/assets/c3150cdc85dd/1*bVmWLH5tUcko5eeOmnR3kQ.jpeg" class="popup img-link "><img data-src="/assets/c3150cdc85dd/1*bVmWLH5tUcko5eeOmnR3kQ.jpeg" alt="" class="lazyload" data-proofer-ignore></a></p><p>Choose “Send a rich notification from the IFTTT app”:</p><p>Title = Notification title, Message = Notification content</p><p>Link URL, please enter: shortcuts://run-shortcut?name= <strong><em>Shortcut name</em></strong></p><p>So it’s recommended to set the shortcut name in English</p><p>-&gt; Click “Create action” -&gt; You can click “Edit title” to set the name</p><p>-&gt; “Finish” save completed!</p><p><strong>You will receive a triggered notification the next time you leave/enter the set area range (with an error range of about 100 meters). Clicking the notification will automatically execute the Mi Home scene!</strong></p><p><a href="/assets/c3150cdc85dd/1*a9zXd_JSpz9IKInJlPoJ1w.png" class="popup img-link "><img data-src="/assets/c3150cdc85dd/1*a9zXd_JSpz9IKInJlPoJ1w.png" alt="Clicking the notification will automatically execute the scene in the background" class="lazyload" data-proofer-ignore></a></p><p>Clicking the notification will automatically execute the scene in the background</p><p><strong>For Siri voice control:</strong></p><p>Since Mi Home is not an Apple built-in app, you need to set it up separately to support Siri voice control:</p><p><a href="/assets/c3150cdc85dd/1*lyzEU2cKxafbnXkWnR7ltg.jpeg" class="popup img-link "><img data-src="/assets/c3150cdc85dd/1*lyzEU2cKxafbnXkWnR7ltg.jpeg" alt="" class="lazyload" data-proofer-ignore></a></p><p>In the “Smart” Tab -&gt; “Add to Siri” -&gt; Select “Target Scene” and click “Add to Siri”</p><p>-&gt; Click the red record command (EX: turn off the light) -&gt; Done!</p><p>You can directly call and control the scene execution in Siri!</p><h3 id="summary"><span class="me-2">Summary</span><a href="#summary" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>To summarize the above setup steps:</p><p>For a good experience, you need to spend a lot of money to buy appliances with the HomeKit logo (so you don’t need to keep a Mac running HomeBridge, and it integrates perfectly with the native Apple Home function). You also need to buy a HomePod or Apple TV, or iPad as the home hub; both HomeKit appliances and home hubs are not cheap!</p><p>If you have technical skills, you can consider using third-party smart devices (such as Mi Home) with a Raspberry Pi to run HomeBridge.</p><p>If you are an ordinary person like me, it is still most convenient to use Mi Home directly. Currently, my usage habit is to execute scene operations from the notification center shortcut widget when coming home or leaving home; the Shortcuts app with IFTTT is only used for notification reminders, in case I forget sometimes.</p><p>Although the current experience has not reached the ideal goal, it has already taken a step closer to a <strong>“smart home”!</strong></p><h3 id="advanced"><span class="me-2">Advanced</span><a href="#advanced" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><a href="../99db2a1fbfe5/"><strong>Demonstration of using Raspberry Pi as a HomeBridge host to connect all Mi Home appliances to HomeKit</strong></a></p><h3 id="further-reading"><span class="me-2">Further Reading</span><a href="#further-reading" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ol><li><a href="../bcff7c157941/">New additions to Xiaomi smart home (AI speaker, temperature and humidity sensor, scale 2, DC inverter fan)</a><li><a href="../21119db777dd/">iOS ≥ 13.1 using “Shortcuts” automation function with Mi Home smart home (directly using the built-in Shortcuts app in iOS ≥ 13.1 to complete automation operations)</a><li><a href="../94a4020edb82/">Mi Home APP / Xiao Ai speaker region issues</a></ol><p>If you have any questions or comments, feel free to <a href="https://www.zhgchg.li/contact" target="_blank">contact me</a>.</p><p>===</p><p><a href="https://zhgchg.li/posts/c3150cdc85dd/" target="_blank">本文中文版本</a></p><p>===</p><p>This article was first published in Traditional Chinese on Medium ➡️ <a href="https://medium.com/p/c3150cdc85dd" target="_blank"><strong>View Here</strong></a></p><widgetic id="64ce71d5ecb2a165598b4567" resize="fill" width="560" height="60" autoscale="on" adaptive="414"></widgetic><script async src="https://widgetic.com/sdk/sdk.js"></script></div><hr/> <a href="https://www.buymeacoffee.com/zhgchgli" target="_blank" class="img-link shimmer" ><img data-src="https://img.buymeacoffee.com/button-api/?text=Buy me a beer!&emoji=🍺&slug=zhgchgli&button_colour=FFDD00&font_colour=000000&font_family=Bree&outline_colour=000000&coffee_colour=ffffff" class="lazyload" data-proofer-ignore></a> <br/> <a href="https://medium.com/@zhgchgli" target="_blank" class="img-link shimmer" ><img data-src="/assets/images/followmymedium.png" class="lazyload" data-proofer-ignore></a> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3184248473087645" crossorigin="anonymous"></script> <ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-3184248473087645" data-ad-slot="7555148040"></ins> <script> (adsbygoogle = window.adsbygoogle || []).push({}); </script><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw me-1"></i> <a href='/categories/zrealm/'>ZRealm</a>, <a href='/categories/life/'>Life.</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw me-1"></i> <a href="/tags/life/" class="post-tag no-text-decoration" >life</a> <a href="/tags/unboxing/" class="post-tag no-text-decoration" >unboxing</a> <a href="/tags/3c/" class="post-tag no-text-decoration" >3c</a> <a href="/tags/mijia/" class="post-tag no-text-decoration" >Mijia</a> <a href="/tags/homekit/" class="post-tag no-text-decoration" >homekit</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted me-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=First%20Experience%20with%20Smart%20Home%20-%20Apple%20HomeKit%20&%20Xiaomi%20Mijia%20-%20ZhgChgLi&url=https%3A%2F%2Fen.zhgchg.li%2Fposts%2Fc3150cdc85dd%2F" data-bs-toggle="tooltip" data-bs-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter" > <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=First%20Experience%20with%20Smart%20Home%20-%20Apple%20HomeKit%20&%20Xiaomi%20Mijia%20-%20ZhgChgLi&u=https%3A%2F%2Fen.zhgchg.li%2Fposts%2Fc3150cdc85dd%2F" data-bs-toggle="tooltip" data-bs-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook" > <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fen.zhgchg.li%2Fposts%2Fc3150cdc85dd%2F" data-bs-toggle="tooltip" data-bs-placement="top" title="Linkedin" target="_blank" rel="noopener" aria-label="Linkedin" > <i class="fa-fw fab fa-linkedin"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-bs-toggle="tooltip" data-bs-placement="top" title="Copy link" data-title-succeed="Link copied successfully!" > </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 ps-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content list-unstyled ps-0 pb-1 ms-1 mt-2"><li class="text-truncate lh-lg"> <a href="/posts/d9a95d4224ea/">Medium Custom Domain Feature Returns</a><li class="text-truncate lh-lg"> <a href="/posts/483af5d93297/">Custom Domain Tutorial for Github Pages</a><li class="text-truncate lh-lg"> <a href="/posts/9e43897d99fc/">Behavior Change in Merging NSAttributedString Attributes Range in iOS ≥ 18</a><li class="text-truncate lh-lg"> <a href="/posts/b08ef940c196/">iOS Deferred Deep Link Implementation (Swift)</a><li class="text-truncate lh-lg"> <a href="/posts/12c5026da33d/">What's New with Universal Links</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/ios-app-development/">ios-app-development</a> <a class="post-tag btn btn-outline-primary" href="/tags/ios/">ios</a> <a class="post-tag btn btn-outline-primary" href="/tags/swift/">swift</a> <a class="post-tag btn btn-outline-primary" href="/tags/life/">life</a> <a class="post-tag btn btn-outline-primary" href="/tags/medium/">medium</a> <a class="post-tag btn btn-outline-primary" href="/tags/unboxing/">unboxing</a> <a class="post-tag btn btn-outline-primary" href="/tags/life/">Life</a> <a class="post-tag btn btn-outline-primary" href="/tags/japan/">japan</a> <a class="post-tag btn btn-outline-primary" href="/tags/automation/">automation</a> <a class="post-tag btn btn-outline-primary" href="/tags/nsattributedstring/">nsattributedstring</a></div></div></div><div id="toc-wrapper" class="ps-0 pe-4 mb-5"><div class="panel-heading ps-3 pt-2 mb-2">Contents</div><nav id="toc"></nav></div></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 px-3 pe-xl-4 mt-5"><div id="related-posts" class="mb-2 mb-sm-4"><h3 class="pt-2 mb-4 ms-1" data-toc-skip> Further Reading</h3><div class="row row-cols-1 row-cols-md-2 row-cols-xl-3 g-4 mb-4"><div class="col"> <a href="/posts/33afa0ae557d/" class="card post-preview h-100"><div class="card-body"> <em class="small" data-ts="1556717540" data-df="ll" > May 1, 2019 </em><h4 class="pt-0 my-2" data-toc-skip>AirPods 2 Unboxing and Hands-On Experience</h4><div class="text-muted small"><p> AirPods 2 Unboxing and Hands-On Experience (Laser Engraved Version) More ingenious, incredibly amazing. [Latest] Apple Watch Series 6 Unboxing &amp;amp; Two-Year Experience &amp;gt;&amp;gt;&amp;gt;Click Here Whe...</p></div></div></a></div><div class="col"> <a href="/posts/a66ce3dc8bb9/" class="card post-preview h-100"><div class="card-body"> <em class="small" data-ts="1562597750" data-df="ll" > Jul 8, 2019 </em><h4 class="pt-0 my-2" data-toc-skip>Apple Watch Case Unboxing Experience (Catalyst & Muvit)</h4><div class="text-muted small"><p> Apple Watch Case Unboxing Experience (Catalyst &amp;amp; Muvit) Catalyst Apple Watch Ultra-Thin Waterproof Case &amp;amp; Muvit Apple Watch Case [Latest Update] Apple Watch Series 6 Unboxing &amp;amp; Two...</p></div></div></a></div><div class="col"> <a href="/posts/a2920e33e73e/" class="card post-preview h-100"><div class="card-body"> <em class="small" data-ts="1543241921" data-df="ll" > Nov 26, 2018 </em><h4 class="pt-0 my-2" data-toc-skip>Apple Watch Series 4: Comprehensive Review from Unboxing to Mastery</h4><div class="text-muted small"><p> Apple Watch Series 4 Unboxing: Comprehensive Review from Unboxing to Mastery (Updated 2020–10–24) Why buy it? Is it useful? What’s good about it? How to use it? &amp;amp; WatchOS APP recommendations ...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/33afa0ae557d/" class="btn btn-outline-primary" prompt="Older" ><p>AirPods 2 Unboxing and Hands-On Experience</p></a> <a href="/posts/a66ce3dc8bb9/" class="btn btn-outline-primary" prompt="Newer" ><p>Apple Watch Case Unboxing Experience (Catalyst & Muvit)</p></a></div><script type="text/javascript"> (function () { const origin = 'https://giscus.app'; const iframe = 'iframe.giscus-frame'; const lightTheme = 'light'; const darkTheme = 'dark_dimmed'; let initTheme = lightTheme; const html = document.documentElement; if ( (html.hasAttribute('data-mode') && html.getAttribute('data-mode') === 'dark') || (!html.hasAttribute('data-mode') && window.matchMedia('(prefers-color-scheme: dark)').matches) ) { initTheme = darkTheme; } let giscusAttributes = { src: 'https://giscus.app/client.js', 'data-repo': 'ZhgChgLi/zhgchgli.github.io', 'data-repo-id': 'R_kgDOHdowLw', 'data-category': 'Q&A', 'data-category-id': 'DIC_kwDOHdowL84CU-q6', 'data-mapping': 'url', 'data-reactions-enabled': '1', 'data-emit-metadata': '0', 'data-theme': initTheme, 'data-input-position': 'bottom', 'data-lang': 'en', crossorigin: 'anonymous', async: '' }; let giscusScript = document.createElement('script'); Object.entries(giscusAttributes).forEach(([key, value]) => giscusScript.setAttribute(key, value) ); document.getElementById('tail-wrapper').appendChild(giscusScript); addEventListener('message', (event) => { if ( event.source === window && event.data && event.data.direction === ModeToggle.ID ) { /* global theme mode changed */ const mode = event.data.message; const theme = mode === ModeToggle.DARK_MODE ? darkTheme : lightTheme; const message = { setConfig: { theme: theme } }; const giscus = document.querySelector(iframe).contentWindow; giscus.postMessage({ giscus: message }, origin); } }); })(); </script></div></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/ios-app-development/">ios-app-development</a> <a class="post-tag btn btn-outline-primary" href="/tags/ios/">ios</a> <a class="post-tag btn btn-outline-primary" href="/tags/swift/">swift</a> <a class="post-tag btn btn-outline-primary" href="/tags/life/">life</a> <a class="post-tag btn btn-outline-primary" href="/tags/medium/">medium</a> <a class="post-tag btn btn-outline-primary" href="/tags/unboxing/">unboxing</a> <a class="post-tag btn btn-outline-primary" href="/tags/life/">Life</a> <a class="post-tag btn btn-outline-primary" href="/tags/japan/">japan</a> <a class="post-tag btn btn-outline-primary" href="/tags/automation/">automation</a> <a class="post-tag btn btn-outline-primary" href="/tags/nsattributedstring/">nsattributedstring</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div></div><footer><div class="container px-lg-4"><div class="d-flex justify-content-center align-items-center text-muted mx-md-3"><p>Using the <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> theme <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> <br/> <a href="https://zhgchg.li" target="_blank">中文版網站</a><br/> Powered by <a href="https://github.com/ZhgChgLi/ZMediumToMarkdown" target="_blank">ZMediumToMarkdown</a>.</p><p>© 2024 <a href="https://medium.com/@zhgchgli">ZhgChgLi</a>. <span data-bs-toggle="tooltip" data-bs-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author." >All rights reserved.</span></p></div></div></footer><div id="mask"></div><button id="back-to-top" aria-label="back-to-top" class="btn btn-lg btn-box-shadow"> <i class="fas fa-angle-up"></i> </button><div id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-bs-animation="true" data-bs-autohide="false" ><div class="toast-header"> <button type="button" class="btn-close ms-auto" data-bs-dismiss="toast" aria-label="Close" ></button></div><div class="toast-body text-center pt-0"><p class="px-2 mb-3">A new version of content is available.</p><button type="button" class="btn btn-primary" aria-label="Update"> Update </button></div></div><script src="https://cdn.jsdelivr.net/combine/npm/jquery@3.7.0/dist/jquery.min.js,npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js,npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js,npm/lazysizes@5.3.2/lazysizes.min.js,npm/magnific-popup@1.1.0/dist/jquery.magnific-popup.min.js,npm/clipboard@2.0.11/dist/clipboard.min.js,npm/dayjs@1.11.7/dayjs.min.js,npm/dayjs@1.11.7/locale/en.min.js,npm/dayjs@1.11.7/plugin/relativeTime.min.js,npm/dayjs@1.11.7/plugin/localizedFormat.min.js,npm/tocbot@4.21.0/dist/tocbot.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-JSGN97L56L"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-JSGN97L56L'); }); </script> <script> /* Note: dependent library will be loaded in `js-selector.html` */ SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="px-1 px-sm-2 px-lg-4 px-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5"></p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="me-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script>
